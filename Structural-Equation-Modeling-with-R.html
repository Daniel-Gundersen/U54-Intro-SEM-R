<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta http-equiv="Content-Style-Type" content="text/css" />
  <meta name="generator" content="pandoc" />
  <meta name="author" content="Daniel Gundersen, PhD DanielA_Gundersen@dfci.harvard.edu Survey and Data Management Core Dana-Farber Cancer Institute" />
  <meta name="date" content="2017-09-28" />
  <title>Introduction to Structural Equation Modeling with R</title>
  <style type="text/css">code{white-space: pre;}</style>
  <style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
  </style>
  <link href="data:text/css;charset=utf-8,%0Abody%0A%7B%0Amargin%3A%200%200%200%200%3B%0Apadding%3A%200%200%200%200%3B%0Awidth%3A%20100%25%3B%0Aheight%3A%20100%25%3B%0Acolor%3A%20black%3B%0Abackground%2Dcolor%3A%20white%3B%0Afont%2Dfamily%3A%20%22Gill%20Sans%20MT%22%2C%20%22Gill%20Sans%22%2C%20GillSans%2C%20sans%2Dserif%3B%0Afont%2Dsize%3A%2014pt%3B%0A%7D%0Adiv%2Etoolbar%20%7B%0Aposition%3A%20fixed%3B%20z%2Dindex%3A%20200%3B%0Atop%3A%20auto%3B%20bottom%3A%200%3B%20left%3A%200%3B%20right%3A%200%3B%0Aheight%3A%201%2E2em%3B%20text%2Dalign%3A%20right%3B%0Apadding%2Dleft%3A%201em%3B%0Apadding%2Dright%3A%201em%3B%20font%2Dsize%3A%2060%25%3B%0Acolor%3A%20DimGray%3B%0Abackground%2Dcolor%3A%20rgb%28240%2C240%2C240%29%3B%0Aborder%2Dtop%3A%20solid%201px%20rgb%28180%2C180%2C180%29%3B%0A%7D%0Adiv%2Etoolbar%20span%2Ecopyright%20%7B%0Acolor%3A%20DimGray%3B%0Amargin%2Dleft%3A%200%2E5em%3B%0A%7D%0Adiv%2Einitial%5Fprompt%20%7B%0Aposition%3A%20absolute%3B%0Az%2Dindex%3A%201000%3B%0Abottom%3A%201%2E2em%3B%0Awidth%3A%20100%25%3B%0Abackground%2Dcolor%3A%20rgb%28200%2C200%2C200%29%3B%0Aopacity%3A%200%2E35%3B%0Abackground%2Dcolor%3A%20rgb%28200%2C200%2C200%2C%200%2E35%29%3B%0Acursor%3A%20pointer%3B%0A%7D%0Adiv%2Einitial%5Fprompt%20p%2Ehelp%20%7B%0Atext%2Dalign%3A%20center%3B%0A%7D%0Adiv%2Einitial%5Fprompt%20p%2Eclose%20%7B%0Atext%2Dalign%3A%20right%3B%0Afont%2Dstyle%3A%20italic%3B%0A%7D%0Adiv%2Eslidy%5Ftoc%20%7B%0Aposition%3A%20absolute%3B%0Az%2Dindex%3A%20300%3B%0Awidth%3A%2060%25%3B%0Amax%2Dwidth%3A%2030em%3B%0Aheight%3A%2030em%3B%0Aoverflow%3A%20auto%3B%0Atop%3A%20auto%3B%0Aright%3A%20auto%3B%0Aleft%3A%204em%3B%0Abottom%3A%204em%3B%0Apadding%3A%201em%3B%0Abackground%3A%20rgb%28240%2C240%2C240%29%3B%0Aborder%2Dstyle%3A%20solid%3B%0Aborder%2Dwidth%3A%202px%3B%0Afont%2Dsize%3A%2060%25%3B%0A%7D%0Adiv%2Eslidy%5Ftoc%20%2Etoc%5Fheading%20%7B%0Atext%2Dalign%3A%20center%3B%0Awidth%3A%20100%25%3B%0Amargin%3A%200%3B%0Amargin%2Dbottom%3A%201em%3B%0Aborder%2Dbottom%2Dstyle%3A%20solid%3B%0Aborder%2Dbottom%2Dcolor%3A%20rgb%28180%2C180%2C180%29%3B%0Aborder%2Dbottom%2Dwidth%3A%201px%3B%0A%7D%0Adiv%2Eslide%20%7B%0Az%2Dindex%3A%2020%3B%0Amargin%3A%200%200%200%200%3B%0Apadding%2Dtop%3A%200%3B%0Apadding%2Dbottom%3A%200%3B%0Apadding%2Dleft%3A%2020px%3B%0Apadding%2Dright%3A%2020px%3B%0Aborder%2Dwidth%3A%200%3B%0Aclear%3A%20both%3B%0Atop%3A%200%3B%0Abottom%3A%200%3B%0Aleft%3A%200%3B%0Aright%3A%200%3B%0Aline%2Dheight%3A%20120%25%3B%0Abackground%2Dcolor%3A%20transparent%3B%0A%7D%0Adiv%2Ebackground%20%7B%0Adisplay%3A%20none%3B%0A%7D%0Adiv%2Ehandout%20%7B%0Amargin%2Dleft%3A%2020px%3B%0Amargin%2Dright%3A%2020px%3B%0A%7D%0Adiv%2Eslide%2Etitlepage%20%7B%0Atext%2Dalign%3A%20center%3B%0A%7D%0Adiv%2Eslide%2Etitlepage%20h1%20%7B%0Apadding%2Dtop%3A%2010%25%3B%0Amargin%2Dright%3A%200%3B%0A%7D%0Adiv%2Eslide%20h1%20%7B%0Apadding%2Dleft%3A%200%3B%0Apadding%2Dright%3A%2020pt%3B%0Apadding%2Dtop%3A%204pt%3B%0Apadding%2Dbottom%3A%204pt%3B%0Amargin%2Dtop%3A%200%3B%0Amargin%2Dleft%3A%200%3B%0Amargin%2Dright%3A%2060pt%3B%0Amargin%2Dbottom%3A%200%2E5em%3B%0Adisplay%3A%20block%3B%20font%2Dsize%3A%20160%25%3B%0Aline%2Dheight%3A%201%2E2em%3B%0Abackground%3A%20transparent%3B%0A%7D%0A%40media%20screen%20and%20%28max%2Ddevice%2Dwidth%3A%201024px%29%0A%7B%0Adiv%2Eslide%20%7B%20font%2Dsize%3A%20100%25%3B%20%7D%0A%7D%0A%40media%20screen%20and%20%28max%2Ddevice%2Dwidth%3A%20800px%29%0A%7B%0Adiv%2Eslide%20%7B%20font%2Dsize%3A%20200%25%3B%20%7D%0Adiv%2Eslidy%5Ftoc%20%7B%0Atop%3A%201em%3B%0Aleft%3A%201em%3B%0Aright%3A%20auto%3B%0Awidth%3A%2080%25%3B%0Afont%2Dsize%3A%20180%25%3B%0A%7D%0A%7D%0Adiv%2Etoc%2Dheading%20%7B%0Awidth%3A%20100%25%3B%0Aborder%2Dbottom%3A%20solid%201px%20rgb%28180%2C180%2C180%29%3B%0Amargin%2Dbottom%3A%201em%3B%0Atext%2Dalign%3A%20center%3B%0A%7D%0Aimg%20%7B%0Aimage%2Drendering%3A%20optimize%2Dquality%3B%0A%7D%0Apre%20%7B%0Afont%2Dsize%3A%2080%25%3B%0Afont%2Dweight%3A%20bold%3B%0Aline%2Dheight%3A%20120%25%3B%0Apadding%2Dtop%3A%200%2E2em%3B%0Apadding%2Dbottom%3A%200%2E2em%3B%0Apadding%2Dleft%3A%201em%3B%0Apadding%2Dright%3A%201em%3B%0Aborder%2Dstyle%3A%20solid%3B%0Aborder%2Dleft%2Dwidth%3A%201em%3B%0Aborder%2Dtop%2Dwidth%3A%20thin%3B%0Aborder%2Dright%2Dwidth%3A%20thin%3B%0Aborder%2Dbottom%2Dwidth%3A%20thin%3B%0Aborder%2Dcolor%3A%20%2395ABD0%3B%0Acolor%3A%20%2300428C%3B%0Abackground%2Dcolor%3A%20%23E4E5E7%3B%0A%7D%0Ali%20pre%20%7B%20margin%2Dleft%3A%200%3B%20%7D%0Ablockquote%20%7B%20font%2Dstyle%3A%20italic%20%7D%0Aimg%20%7B%20background%2Dcolor%3A%20transparent%20%7D%0Ap%2Ecopyright%20%7B%20font%2Dsize%3A%20smaller%20%7D%0A%2Ecenter%20%7B%20text%2Dalign%3A%20center%20%7D%0A%2Efootnote%20%7B%20font%2Dsize%3A%20smaller%3B%20margin%2Dleft%3A%202em%3B%20%7D%0Aa%20img%20%7B%20border%2Dwidth%3A%200%3B%20border%2Dstyle%3A%20none%20%7D%0Aa%3Avisited%20%7B%20color%3A%20navy%20%7D%0Aa%3Alink%20%7B%20color%3A%20navy%20%7D%0Aa%3Ahover%20%7B%20color%3A%20red%3B%20text%2Ddecoration%3A%20underline%20%7D%0Aa%3Aactive%20%7B%20color%3A%20red%3B%20text%2Ddecoration%3A%20underline%20%7D%0Aa%20%7Btext%2Ddecoration%3A%20none%7D%0A%2Etoolbar%20a%3Alink%20%7Bcolor%3A%20blue%7D%0A%2Etoolbar%20a%3Avisited%20%7Bcolor%3A%20blue%7D%0A%2Etoolbar%20a%3Aactive%20%7Bcolor%3A%20red%7D%0A%2Etoolbar%20a%3Ahover%20%7Bcolor%3A%20red%7D%0Aul%20%7B%20list%2Dstyle%2Dtype%3A%20square%3B%20%7D%0Aul%20ul%20%7B%20list%2Dstyle%2Dtype%3A%20disc%3B%20%7D%0Aul%20ul%20ul%20%7B%20list%2Dstyle%2Dtype%3A%20circle%3B%20%7D%0Aul%20ul%20ul%20ul%20%7B%20list%2Dstyle%2Dtype%3A%20disc%3B%20%7D%0Ali%20%7B%20margin%2Dleft%3A%200%2E5em%3B%20margin%2Dtop%3A%200%2E5em%3B%20%7D%0Ali%20li%20%7B%20font%2Dsize%3A%2085%25%3B%20font%2Dstyle%3A%20italic%20%7D%0Ali%20li%20li%20%7B%20font%2Dsize%3A%2085%25%3B%20font%2Dstyle%3A%20normal%20%7D%0Adiv%20dt%0A%7B%0Amargin%2Dleft%3A%200%3B%0Amargin%2Dtop%3A%201em%3B%0Amargin%2Dbottom%3A%200%2E5em%3B%0Afont%2Dweight%3A%20bold%3B%0A%7D%0Adiv%20dd%0A%7B%0Amargin%2Dleft%3A%202em%3B%0Amargin%2Dbottom%3A%200%2E5em%3B%0A%7D%0Ap%2Cpre%2Cul%2Col%2Cblockquote%2Ch2%2Ch3%2Ch4%2Ch5%2Ch6%2Cdl%2Ctable%20%7B%0Amargin%2Dleft%3A%201em%3B%0Amargin%2Dright%3A%201em%3B%0A%7D%0Ap%2Esubhead%20%7B%20font%2Dweight%3A%20bold%3B%20margin%2Dtop%3A%202em%3B%20%7D%0A%2Esmaller%20%7B%20font%2Dsize%3A%20smaller%20%7D%0A%2Ebigger%20%7B%20font%2Dsize%3A%20130%25%20%7D%0Atd%2Cth%20%7B%20padding%3A%200%2E2em%20%7D%0Aul%20%7B%0Amargin%3A%200%2E5em%201%2E5em%200%2E5em%201%2E5em%3B%0Apadding%3A%200%3B%0A%7D%0Aol%20%7B%0Amargin%3A%200%2E5em%201%2E5em%200%2E5em%201%2E5em%3B%0Apadding%3A%200%3B%0A%7D%0Aul%20%7B%20list%2Dstyle%2Dtype%3A%20square%3B%20%7D%0Aul%20ul%20%7B%20list%2Dstyle%2Dtype%3A%20disc%3B%20%7D%0Aul%20ul%20ul%20%7B%20list%2Dstyle%2Dtype%3A%20circle%3B%20%7D%0Aul%20ul%20ul%20ul%20%7B%20list%2Dstyle%2Dtype%3A%20disc%3B%20%7D%0Aul%20li%20%7B%20list%2Dstyle%3A%20square%3B%0Amargin%3A%200%2E1em%200em%200%2E6em%200%3B%0Apadding%3A%200%200%200%200%3B%0Aline%2Dheight%3A%20140%25%3B%0A%7D%0Aol%20li%20%7B%20margin%3A%200%2E1em%200em%200%2E6em%201%2E5em%3B%0Apadding%3A%200%200%200%200px%3B%0Aline%2Dheight%3A%20140%25%3B%0Alist%2Dstyle%2Dtype%3A%20decimal%3B%0A%7D%0Ali%20ul%20li%20%7B%20font%2Dsize%3A%2085%25%3B%20font%2Dstyle%3A%20italic%3B%0Alist%2Dstyle%2Dtype%3A%20disc%3B%0Abackground%3A%20transparent%3B%0Apadding%3A%200%200%200%200%3B%0A%7D%0Ali%20li%20ul%20li%20%7B%20font%2Dsize%3A%2085%25%3B%20font%2Dstyle%3A%20normal%3B%0Alist%2Dstyle%2Dtype%3A%20circle%3B%0Abackground%3A%20transparent%3B%0Apadding%3A%200%200%200%200%3B%0A%7D%0Ali%20li%20li%20ul%20li%20%7B%0Alist%2Dstyle%2Dtype%3A%20disc%3B%0Abackground%3A%20transparent%3B%0Apadding%3A%200%200%200%200%3B%0A%7D%0Ali%20ol%20li%20%7B%0Alist%2Dstyle%2Dtype%3A%20decimal%3B%0A%7D%0Ali%20li%20ol%20li%20%7B%0Alist%2Dstyle%2Dtype%3A%20decimal%3B%0A%7D%0A%0Aol%2Eoutline%20li%3Ahover%20%7B%20cursor%3A%20pointer%20%7D%0Aol%2Eoutline%20li%2Enofold%3Ahover%20%7B%20cursor%3A%20default%20%7D%0Aul%2Eoutline%20li%3Ahover%20%7B%20cursor%3A%20pointer%20%7D%0Aul%2Eoutline%20li%2Enofold%3Ahover%20%7B%20cursor%3A%20default%20%7D%0Aol%2Eoutline%20%7B%20list%2Dstyle%3Adecimal%3B%20%7D%0Aol%2Eoutline%20ol%20%7B%20list%2Dstyle%2Dtype%3Alower%2Dalpha%20%7D%0Aol%2Eoutline%20li%2Enofold%20%7B%0Apadding%3A%200%200%200%2020px%3B%0Abackground%3A%20transparent%20url%28data%3Aimage%2Fgif%3Bbase64%2CR0lGODdhCQAJAIACAMzMzOvr%2FywAAAAACQAJAAACD4SPoRvG614Dctb4MEMcFAA7%29%20no%2Drepeat%200px%200%2E5em%3B%0A%7D%0Aol%2Eoutline%20li%2Eunfolded%20%7B%0Apadding%3A%200%200%200%2020px%3B%0Abackground%3A%20transparent%20url%28data%3Aimage%2Fgif%3Bbase64%2CR0lGODdhCQAJAKEDAMPD%2F8zMzOvr%2F%2F%2F%2F%2FywAAAAACQAJAAACEYyPoivG614LAlg7ZZbxoR8UADs%3D%29%20no%2Drepeat%200px%200%2E5em%3B%0A%7D%0Aol%2Eoutline%20li%2Efolded%20%7B%0Apadding%3A%200%200%200%2020px%3B%0Abackground%3A%20transparent%20url%28data%3Aimage%2Fgif%3Bbase64%2CR0lGODdhCQAJAKEDAMPD%2F8zMzOvr%2F%2F%2F%2F%2FywAAAAACQAJAAACFIyPoiu2sJyCyoF7W3hxz850CFIAADs%3D%29%20no%2Drepeat%200px%200%2E5em%3B%0A%7D%0Aol%2Eoutline%20li%2Eunfolded%3Ahover%20%7B%0Apadding%3A%200%200%200%2020px%3B%0Abackground%3A%20transparent%20url%28data%3Aimage%2Fgif%3Bbase64%2CR0lGODdhCQAJAKEDAAAAAAAA%2F8PD%2F%2F%2F%2F%2FywAAAAACQAJAAACEYSPoivG614DIlg7ZZbxoQ8UADs%3D%29%20no%2Drepeat%200px%200%2E5em%3B%0A%7D%0Aol%2Eoutline%20li%2Efolded%3Ahover%20%7B%0Apadding%3A%200%200%200%2020px%3B%0Abackground%3A%20transparent%20url%28data%3Aimage%2Fgif%3Bbase64%2CR0lGODdhCQAJAKEDAAAAAAAA%2F8PD%2F%2F%2F%2F%2FywAAAAACQAJAAACFISPoiu2sZyCyoV7G3hxz850CFIAADs%3D%29%20no%2Drepeat%200px%200%2E5em%3B%0A%7D%0Aul%2Eoutline%20li%2Enofold%20%7B%0Apadding%3A%200%200%200%2020px%3B%0Abackground%3A%20transparent%20url%28data%3Aimage%2Fgif%3Bbase64%2CR0lGODdhCQAJAIACAMzMzOvr%2FywAAAAACQAJAAACD4SPoRvG614Dctb4MEMcFAA7%29%20no%2Drepeat%200px%200%2E5em%3B%0A%7D%0Aul%2Eoutline%20li%2Eunfolded%20%7B%0Apadding%3A%200%200%200%2020px%3B%0Abackground%3A%20transparent%20url%28data%3Aimage%2Fgif%3Bbase64%2CR0lGODdhCQAJAKEDAMPD%2F8zMzOvr%2F%2F%2F%2F%2FywAAAAACQAJAAACEYyPoivG614LAlg7ZZbxoR8UADs%3D%29%20no%2Drepeat%200px%200%2E5em%3B%0A%7D%0Aul%2Eoutline%20li%2Efolded%20%7B%0Apadding%3A%200%200%200%2020px%3B%0Abackground%3A%20transparent%20url%28data%3Aimage%2Fgif%3Bbase64%2CR0lGODdhCQAJAKEDAMPD%2F8zMzOvr%2F%2F%2F%2F%2FywAAAAACQAJAAACFIyPoiu2sJyCyoF7W3hxz850CFIAADs%3D%29%20no%2Drepeat%200px%200%2E5em%3B%0A%7D%0Aul%2Eoutline%20li%2Eunfolded%3Ahover%20%7B%0Apadding%3A%200%200%200%2020px%3B%0Abackground%3A%20transparent%20url%28data%3Aimage%2Fgif%3Bbase64%2CR0lGODdhCQAJAKEDAAAAAAAA%2F8PD%2F%2F%2F%2F%2FywAAAAACQAJAAACEYSPoivG614DIlg7ZZbxoQ8UADs%3D%29%20no%2Drepeat%200px%200%2E5em%3B%0A%7D%0Aul%2Eoutline%20li%2Efolded%3Ahover%20%7B%0Apadding%3A%200%200%200%2020px%3B%0Abackground%3A%20transparent%20url%28data%3Aimage%2Fgif%3Bbase64%2CR0lGODdhCQAJAKEDAAAAAAAA%2F8PD%2F%2F%2F%2F%2FywAAAAACQAJAAACFISPoiu2sZyCyoV7G3hxz850CFIAADs%3D%29%20no%2Drepeat%200px%200%2E5em%3B%0A%7D%0A%0Aa%2Etitleslide%20%7B%20font%2Dweight%3A%20bold%3B%20font%2Dstyle%3A%20italic%20%7D%0A%0Aimg%2Ehidden%20%7B%20display%3A%20none%3B%20visibility%3A%20hidden%20%7D%0Adiv%2Einitial%5Fprompt%20%7B%20display%3A%20none%3B%20visibility%3A%20hidden%20%7D%0Adiv%2Eslide%20%7B%0Avisibility%3A%20visible%3B%0Aposition%3A%20inherit%3B%0A%7D%0Adiv%2Ehandout%20%7B%0Aborder%2Dtop%2Dstyle%3A%20solid%3B%0Aborder%2Dtop%2Dwidth%3A%20thin%3B%0Aborder%2Dtop%2Dcolor%3A%20black%3B%0A%7D%0A%40media%20screen%20%7B%0A%2Ehidden%20%7B%20display%3A%20none%3B%20visibility%3A%20visible%20%7D%0Adiv%2Eslide%2Ehidden%20%7B%20display%3A%20block%3B%20visibility%3A%20visible%20%7D%0Adiv%2Ehandout%2Ehidden%20%7B%20display%3A%20block%3B%20visibility%3A%20visible%20%7D%0Adiv%2Ebackground%20%7B%20display%3A%20none%3B%20visibility%3A%20hidden%20%7D%0Abody%2Esingle%5Fslide%20div%2Einitial%5Fprompt%20%7B%20display%3A%20block%3B%20visibility%3A%20visible%20%7D%0Abody%2Esingle%5Fslide%20div%2Ebackground%20%7B%20display%3A%20block%3B%20visibility%3A%20visible%20%7D%0Abody%2Esingle%5Fslide%20div%2Ebackground%2Ehidden%20%7B%20display%3A%20none%3B%20visibility%3A%20hidden%20%7D%0Abody%2Esingle%5Fslide%20%2Einvisible%20%7B%20visibility%3A%20hidden%20%7D%0Abody%2Esingle%5Fslide%20%2Ehidden%20%7B%20display%3A%20none%3B%20visibility%3A%20hidden%20%7D%0Abody%2Esingle%5Fslide%20div%2Eslide%20%7B%20position%3A%20absolute%20%7D%0Abody%2Esingle%5Fslide%20div%2Ehandout%20%7B%20display%3A%20none%3B%20visibility%3A%20hidden%20%7D%0A%7D%0A%40media%20print%20%7B%0A%2Ehidden%20%7B%20display%3A%20block%3B%20visibility%3A%20visible%20%7D%0Adiv%2Eslide%20pre%20%7B%20font%2Dsize%3A%2060%25%3B%20padding%2Dleft%3A%200%2E5em%3B%20%7D%0Adiv%2Etoolbar%20%7B%20display%3A%20none%3B%20visibility%3A%20hidden%3B%20%7D%0Adiv%2Eslidy%5Ftoc%20%7B%20display%3A%20none%3B%20visibility%3A%20hidden%3B%20%7D%0Adiv%2Ebackground%20%7B%20display%3A%20none%3B%20visibility%3A%20hidden%3B%20%7D%0Adiv%2Eslide%20%7B%20page%2Dbreak%2Dbefore%3A%20always%20%7D%0A%0Adiv%2Eslide%2Efirst%2Dslide%20%7B%20page%2Dbreak%2Dbefore%3A%20avoid%20%7D%0A%7D%0A%0A%0A%2Ejslider%20table%20%7B%0Amargin%2Dleft%3A%200em%3B%0Amargin%2Dright%3A%200em%3B%0A%7D%0A%0Atable%2EdataTable%2C%20%2Eshiny%2Ddatatable%2Doutput%20div%20%7B%0Afont%2Dsize%3A%2014pt%3B%0A%7D%0A%0A%2EdataTables%5Finfo%2C%20%2EdataTables%5Fpaginate%20%7B%0Afont%2Dsize%3A%2019px%3B%0A%7D%0A%0Apre%2EsourceCode%2C%20code%2EsourceCode%20%7B%0Afont%2Dsize%3A%2080%25%3B%0A%7D%0A%0Alabel%2C%20button%2C%20input%2C%20select%2C%20textarea%20%7B%0Afont%2Dsize%3A%2014pt%3B%0A%7D%0A%0Aul%2Enav%2C%20ul%2Enav%20li%20%7B%0Alist%2Dstyle%2Dtype%3A%20none%3B%0A%7D%0A" rel="stylesheet" />
  <script src="data:application/x-javascript;base64,Lyogc2xpZHkuanMKCiAgIENvcHlyaWdodCAoYykgMjAwNS0yMDEzIFczQyAoTUlULCBFUkNJTSwgS2VpbyksIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAgIFczQyBsaWFiaWxpdHksIHRyYWRlbWFyaywgZG9jdW1lbnQgdXNlIGFuZCBzb2Z0d2FyZSBsaWNlbnNpbmcKICAgcnVsZXMgYXBwbHksIHNlZToKCiAgIGh0dHA6Ly93d3cudzMub3JnL0NvbnNvcnRpdW0vTGVnYWwvY29weXJpZ2h0LWRvY3VtZW50cwogICBodHRwOi8vd3d3LnczLm9yZy9Db25zb3J0aXVtL0xlZ2FsL2NvcHlyaWdodC1zb2Z0d2FyZQoKICAgRGVmaW5lcyBzaW5nbGUgbmFtZSAidzNjX3NsaWR5IiBpbiBnbG9iYWwgbmFtZXNwYWNlCiAgIEFkZHMgZXZlbnQgaGFuZGxlcnMgd2l0aG91dCB0cmFtcGxpbmcgb24gYW55IG90aGVycwoqLwoKLy8gdGhlIHNsaWR5IG9iamVjdCBpbXBsZW1lbnRhdGlvbgp2YXIgdzNjX3NsaWR5ID0gewogIC8vIGNsYXNzaWZ5IHdoaWNoIGtpbmQgb2YgYnJvd3NlciB3ZSdyZSBydW5uaW5nIHVuZGVyCiAgbnNfcG9zOiAodHlwZW9mIHdpbmRvdy5wYWdlWU9mZnNldCE9J3VuZGVmaW5lZCcpLAogIGtodG1sOiAoKG5hdmlnYXRvci51c2VyQWdlbnQpLmluZGV4T2YoIktIVE1MIikgPj0gMCA/IHRydWUgOiBmYWxzZSksCiAgb3BlcmE6ICgobmF2aWdhdG9yLnVzZXJBZ2VudCkuaW5kZXhPZigiT3BlcmEiKSA+PSAwID8gdHJ1ZSA6IGZhbHNlKSwKICBpcGFkOiAoKG5hdmlnYXRvci51c2VyQWdlbnQpLmluZGV4T2YoImlQYWQiKSA+PSAwID8gdHJ1ZSA6IGZhbHNlKSwKICBpcGhvbmU6ICgobmF2aWdhdG9yLnVzZXJBZ2VudCkuaW5kZXhPZigiaVBob25lIikgPj0gMCA/IHRydWUgOiBmYWxzZSksCiAgYW5kcm9pZDogKChuYXZpZ2F0b3IudXNlckFnZW50KS5pbmRleE9mKCJBbmRyb2lkIikgPj0gMCA/IHRydWUgOiBmYWxzZSksCiAgaWU6ICh0eXBlb2YgZG9jdW1lbnQuYWxsICE9ICJ1bmRlZmluZWQiICYmICF0aGlzLm9wZXJhKSwKICBpZTY6ICghdGhpcy5uc19wb3MgJiYgbmF2aWdhdG9yLnVzZXJBZ2VudC5pbmRleE9mKCJNU0lFIDYiKSAhPSAtMSksCiAgaWU3OiAoIXRoaXMubnNfcG9zICYmIG5hdmlnYXRvci51c2VyQWdlbnQuaW5kZXhPZigiTVNJRSA3IikgIT0gLTEpLAogIGllODogKCF0aGlzLm5zX3BvcyAmJiBuYXZpZ2F0b3IudXNlckFnZW50LmluZGV4T2YoIk1TSUUgOCIpICE9IC0xKSwKICBpZTk6ICghdGhpcy5uc19wb3MgJiYgbmF2aWdhdG9yLnVzZXJBZ2VudC5pbmRleE9mKCJNU0lFIDkiKSAhPSAtMSksCgogIC8vIGRhdGEgZm9yIHN3aXBlIGFuZCBkb3VibGUgdGFwIGRldGVjdGlvbiBvbiB0b3VjaCBzY3JlZW5zCiAgbGFzdF90YXA6IDAsCiAgcHJldl90YXA6IDAsCiAgc3RhcnRfeDogMCwKICBzdGFydF95OiAwLAogIGRlbHRhX3g6IDAsCiAgZGVsdGFfeTogMCwKCiAgLy8gYXJlIHdlIHJ1bm5pbmcgYXMgWEhUTUw/IChkb2Vzbid0IHdvcmsgb24gT3BlcmEpCiAgaXNfeGh0bWw6IC94bWwvLnRlc3QoZG9jdW1lbnQuY29udGVudFR5cGUpLAoKICBzbGlkZV9udW1iZXI6IDAsIC8vIGludGVnZXIgc2xpZGUgY291bnQ6IDAsIDEsIDIsIC4uLgogIHNsaWRlX251bWJlcl9lbGVtZW50OiBudWxsLCAvLyBlbGVtZW50IGNvbnRhaW5pbmcgc2xpZGUgbnVtYmVyCiAgc2xpZGVzOiBbXSwgLy8gc2V0IHRvIGFycmF5IG9mIHNsaWRlIGRpdidzCiAgbm90ZXM6IFtdLCAvLyBzZXQgdG8gYXJyYXkgb2YgaGFuZG91dCBkaXYncwogIGJhY2tncm91bmRzOiBbXSwgLy8gc2V0IHRvIGFycmF5IG9mIGJhY2tncm91bmQgZGl2J3MKICBvYnNlcnZlcnM6IFtdLCAvLyBsaXN0IG9mIG9ic2VydmVyIGZ1bmN0aW9ucwogIHRvb2xiYXI6IG51bGwsIC8vIGVsZW1lbnQgY29udGFpbmluZyB0b29sYmFyCiAgdGl0bGU6IG51bGwsIC8vIGRvY3VtZW50IHRpdGxlCiAgbGFzdF9zaG93bjogbnVsbCwgLy8gbGFzdCBpbmNyZW1lbnRhbGx5IHNob3duIGl0ZW0KICBlb3M6IG51bGwsICAvLyBzcGFuIGVsZW1lbnQgZm9yIGVuZCBvZiBzbGlkZSBpbmRpY2F0b3IKICB0b2M6IG51bGwsIC8vIHRhYmxlIG9mIGNvbnRlbnRzCiAgb3V0bGluZTogbnVsbCwgLy8gb3V0bGluZSBlbGVtZW50IHdpdGggdGhlIGZvY3VzCiAgc2VsZWN0ZWRfdGV4dF9sZW46IDAsIC8vIGxlbmd0aCBvZiBkcmFnIHNlbGVjdGlvbiBvbiBkb2N1bWVudAogIHZpZXdfYWxsOiAwLCAgLy8gMSB0byB2aWV3IGFsbCBzbGlkZXMgKyBoYW5kb3V0cwogIHdhbnRfdG9vbGJhcjogdHJ1ZSwgIC8vIHVzZXIgcHJlZmVyZW5jZSB0byBzaG93L2hpZGUgdG9vbGJhcgogIG1vdXNlX2NsaWNrX2VuYWJsZWQ6IHRydWUsIC8vIGVuYWJsZXMgbGVmdCBjbGljayBmb3IgbmV4dCBzbGlkZQogIHNjcm9sbF9oYWNrOiAwLCAvLyBJRSB3b3JrIGFyb3VuZCBmb3IgcG9zaXRpb246IGZpeGVkCiAgZGlzYWJsZV9zbGlkZV9jbGljazogZmFsc2UsICAvLyB1c2VkIGJ5IGNsaWNrZWQgYW5jaG9ycwoKICBsYW5nOiAiZW4iLCAvLyB1cGRhdGVkIHRvIGxhbmd1YWdlIHNwZWNpZmllZCBieSBodG1sIGZpbGUKCiAgaGVscF9hbmNob3I6IG51bGwsIC8vIHVzZWQgZm9yIGtleWJvYXJkIGZvY3VzIGhhY2sgaW4gc2hvd1Rvb2xiYXIoKQogIGhlbHBfcGFnZTogImh0dHA6Ly93d3cudzMub3JnL1RhbGtzL1Rvb2xzL1NsaWR5Mi9oZWxwL2hlbHAuaHRtbCIsCiAgaGVscF90ZXh0OiAiTmF2aWdhdGUgd2l0aCBtb3VzZSBjbGljaywgc3BhY2UgYmFyLCBDdXJzb3IgTGVmdC9SaWdodCwgIiArCiAgICAgICAgICAgICAib3IgUGcgVXAgYW5kIFBnIERuLiBVc2UgUyBhbmQgQiB0byBjaGFuZ2UgZm9udCBzaXplLiIsCgogIHNpemVfaW5kZXg6IDAsCiAgc2l6ZV9hZGp1c3RtZW50OiAwLAogIHNpemVzOiAgbmV3IEFycmF5KCIxMHB0IiwgIjEycHQiLCAiMTRwdCIsICIxNnB0IiwgIjE4cHQiLCAiMjBwdCIsCiAgICAgICAgICAgICAgICAgICAgIjIycHQiLCAiMjRwdCIsICIyNnB0IiwgIjI4cHQiLCAiMzBwdCIsICIzMnB0IiksCgogIC8vIG5lZWRlZCBmb3IgZWZmaWNpZW50IHJlc2l6aW5nCiAgbGFzdF93aWR0aDogMCwKICBsYXN0X2hlaWdodDogMCwKCgogIC8vIE5lZWRlZCBmb3IgY3Jvc3MgYnJvd3NlciBzdXBwb3J0IGZvciByZWxhdGl2ZSB3aWR0aC9oZWlnaHQgb24KICAvLyBvYmplY3QgZWxlbWVudHMuIFRoZSB3b3JrIGFyb3VuZCBpcyB0byBzYXZlIHdpZHRoL2hlaWdodCBhdHRyaWJ1dGVzCiAgLy8gYW5kIHRoZW4gdG8gcmVjb21wdXRlIGFic29sdXRlIHdpZHRoL2hlaWdodCBkaW1lbnNpb25zIG9uIHJlc2l6aW5nCiAgIG9iamVjdHM6IFtdLAoKICAvLyBhdHRhY2ggaW5pdGlhbGlhdGlvbiBldmVudCBoYW5kbGVycwogIHNldF91cDogZnVuY3Rpb24gKCkgewogICAgdmFyIGluaXQgPSBmdW5jdGlvbigpIHsgdzNjX3NsaWR5LmluaXQoKTsgfTsKICAgIGlmICh0eXBlb2Ygd2luZG93LmFkZEV2ZW50TGlzdGVuZXIgIT0gInVuZGVmaW5lZCIpCiAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCJsb2FkIiwgaW5pdCwgZmFsc2UpOwogICAgZWxzZQogICAgICB3aW5kb3cuYXR0YWNoRXZlbnQoIm9ubG9hZCIsIGluaXQpOwogIH0sCgogIGhpZGVfc2xpZGVzOiBmdW5jdGlvbiAoKSB7CiAgICBpZiAoZG9jdW1lbnQuYm9keSAmJiAhdzNjX3NsaWR5LmluaXRpYWxpemVkKQogICAgICBkb2N1bWVudC5ib2R5LnN0eWxlLnZpc2liaWxpdHkgPSAiaGlkZGVuIjsKICAgIGVsc2UKICAgICAgc2V0VGltZW91dCh3M2Nfc2xpZHkuaGlkZV9zbGlkZXMsIDUwKTsKICB9LAoKICAvLyBoYWNrIHRvIHBlcnN1YWRlIElFIHRvIGNvbXB1dGUgY29ycmVjdCBkb2N1bWVudCBoZWlnaHQKICAvLyBhcyBuZWVkZWQgZm9yIHNpbXVsYXRpbmcgZml4ZWQgcG9zaXRpb25pbmcgb2YgdG9vbGJhcgogIGllX2hhY2s6IGZ1bmN0aW9uICgpIHsKICAgIHdpbmRvdy5yZXNpemVCeSgwLC0xKTsKICAgIHdpbmRvdy5yZXNpemVCeSgwLCAxKTsKICB9LAoKICBpbml0OiBmdW5jdGlvbiAoKSB7CiAgICAvL2FsZXJ0KCJzbGlkeSBzdGFydGluZyB0ZXN0IDEwIik7CiAgICBkb2N1bWVudC5ib2R5LnN0eWxlLnZpc2liaWxpdHkgPSAidmlzaWJsZSI7CiAgICB0aGlzLmluaXRfbG9jYWxpemF0aW9uKCk7CiAgICB0aGlzLmFkZF90b29sYmFyKCk7CiAgICB0aGlzLndyYXBfaW1wbGljaXRfc2xpZGVzKCk7CiAgICB0aGlzLmNvbGxlY3Rfc2xpZGVzKCk7CiAgICB0aGlzLmNvbGxlY3Rfbm90ZXMoKTsKICAgIHRoaXMuY29sbGVjdF9iYWNrZ3JvdW5kcygpOwogICAgdGhpcy5vYmplY3RzID0gZG9jdW1lbnQuYm9keS5nZXRFbGVtZW50c0J5VGFnTmFtZSgib2JqZWN0Iik7CiAgICB0aGlzLnBhdGNoX2FuY2hvcnMoKTsKICAgIHRoaXMuc2xpZGVfbnVtYmVyID0gdGhpcy5maW5kX3NsaWRlX251bWJlcihsb2NhdGlvbi5ocmVmKTsKICAgIHdpbmRvdy5vZmZzY3JlZW5idWZmZXJpbmcgPSB0cnVlOwogICAgdGhpcy5zaXplX2FkanVzdG1lbnQgPSB0aGlzLmZpbmRfc2l6ZV9hZGp1c3QoKTsKICAgIHRoaXMudGltZV9sZWZ0ID0gdGhpcy5maW5kX2R1cmF0aW9uKCk7CiAgICB0aGlzLmhpZGVfaW1hZ2VfdG9vbGJhcigpOyAgLy8gc3VwcHJlc3MgSUUgaW1hZ2UgdG9vbGJhciBwb3B1cAogICAgdGhpcy5pbml0X291dGxpbmVyKCk7ICAvLyBhY3RpdmF0ZSBmb2xkL3VuZm9sZCBzdXBwb3J0CiAgICB0aGlzLnRpdGxlID0gZG9jdW1lbnQudGl0bGU7CiAgICB0aGlzLmtleWJvYXJkbGVzcyA9ICh0aGlzLmlwYWR8fHRoaXMuaXBob25lfHx0aGlzLmFuZHJvaWQpOwoKICAgIGlmICh0aGlzLmtleWJvYXJkbGVzcykKICAgIHsKICAgICAgdzNjX3NsaWR5LnJlbW92ZV9jbGFzcyh3M2Nfc2xpZHkudG9vbGJhciwgImhpZGRlbiIpCiAgICAgIHRoaXMud2FudF90b29sYmFyID0gMDsKICAgIH0KCiAgICAvLyB3b3JrIGFyb3VuZCBmb3Igb3BlcmEgYnVnCiAgICB0aGlzLmlzX3hodG1sID0gKGRvY3VtZW50LmJvZHkudGFnTmFtZSA9PSAiQk9EWSIgPyBmYWxzZSA6IHRydWUpOwoKICAgIGlmICh0aGlzLnNsaWRlcy5sZW5ndGggPiAwKQogICAgewogICAgICB2YXIgc2xpZGUgPSB0aGlzLnNsaWRlc1t0aGlzLnNsaWRlX251bWJlcl07CiAgIAogICAgICBpZiAodGhpcy5zbGlkZV9udW1iZXIgPiAwKQogICAgICB7CiAgICAgICAgdGhpcy5zZXRfdmlzaWJpbGl0eV9hbGxfaW5jcmVtZW50YWwoInZpc2libGUiKTsKICAgICAgICB0aGlzLmxhc3Rfc2hvd24gPSB0aGlzLnByZXZpb3VzX2luY3JlbWVudGFsX2l0ZW0obnVsbCk7CiAgICAgICAgdGhpcy5zZXRfZW9zX3N0YXR1cyh0cnVlKTsKICAgICAgfQogICAgICBlbHNlCiAgICAgIHsKICAgICAgICB0aGlzLmxhc3Rfc2hvd24gPSBudWxsOwogICAgICAgIHRoaXMuc2V0X3Zpc2liaWxpdHlfYWxsX2luY3JlbWVudGFsKCJoaWRkZW4iKTsKICAgICAgICB0aGlzLnNldF9lb3Nfc3RhdHVzKCF0aGlzLm5leHRfaW5jcmVtZW50YWxfaXRlbSh0aGlzLmxhc3Rfc2hvd24pKTsKICAgICAgfQoKICAgICAgdGhpcy5zZXRfbG9jYXRpb24oKTsKICAgICAgdGhpcy5hZGRfY2xhc3ModGhpcy5zbGlkZXNbMF0sICJmaXJzdC1zbGlkZSIpOwogICAgICB3M2Nfc2xpZHkuc2hvd19zbGlkZShzbGlkZSk7CiAgICB9CgogICAgdGhpcy50b2MgPSB0aGlzLnRhYmxlX29mX2NvbnRlbnRzKCk7CgogICAgdGhpcy5hZGRfaW5pdGlhbF9wcm9tcHQoKTsKCiAgICAvLyBiaW5kIGV2ZW50IGhhbmRsZXJzIHdpdGhvdXQgaW50ZXJmZXJpbmcgd2l0aCBjdXN0b20gcGFnZSBzY3JpcHRzCiAgICAvLyBUYXAgZXZlbnRzIGJlaGF2ZSB0b28gd2VpcmRseSB0byBzdXBwb3J0IGNsaWNrcyByZWxpYWJseSBvbgogICAgLy8gaVBob25lIGFuZCBpUGFkLCBzbyBleGNsdWRlIHRoZXNlIGZyb20gY2xpY2sgaGFuZGxlcgoKICAgIGlmICghdGhpcy5rZXlib2FyZGxlc3MpCiAgICB7CiAgICAgIHRoaXMuYWRkX2xpc3RlbmVyKGRvY3VtZW50LmJvZHksICJjbGljayIsIHRoaXMubW91c2VfYnV0dG9uX2NsaWNrKTsKICAgICAgdGhpcy5hZGRfbGlzdGVuZXIoZG9jdW1lbnQuYm9keSwgIm1vdXNlZG93biIsIHRoaXMubW91c2VfYnV0dG9uX2Rvd24pOwogICAgfQoKICAgIHRoaXMuYWRkX2xpc3RlbmVyKGRvY3VtZW50LCAia2V5ZG93biIsIHRoaXMua2V5X2Rvd24pOwogICAgdGhpcy5hZGRfbGlzdGVuZXIoZG9jdW1lbnQsICJrZXlwcmVzcyIsIHRoaXMua2V5X3ByZXNzKTsKICAgIHRoaXMuYWRkX2xpc3RlbmVyKHdpbmRvdywgInJlc2l6ZSIsIHRoaXMucmVzaXplZCk7CiAgICB0aGlzLmFkZF9saXN0ZW5lcih3aW5kb3csICJzY3JvbGwiLCB0aGlzLnNjcm9sbGVkKTsKICAgIHRoaXMuYWRkX2xpc3RlbmVyKHdpbmRvdywgInVubG9hZCIsIHRoaXMudW5sb2FkZWQpOwoKICAgIHRoaXMuYWRkX2xpc3RlbmVyKGRvY3VtZW50LCAiZ2VzdHVyZWNoYW5nZSIsIGZ1bmN0aW9uICgpCiAgICB7CiAgICAgIHJldHVybiBmYWxzZTsKICAgIH0pOwoKICAgIHRoaXMuYXR0YWNoX3RvdWNoX2hhbmRlcnModGhpcy5zbGlkZXMpOwoKICAgIC8vIHRoaXMgc2VlbXMgdG8gYmUgYSBkZWJ1Z2dpbmcgaGFjawogICAgLy9pZiAoIWRvY3VtZW50LmJvZHkub25jbGljaykKICAgIC8vICBkb2N1bWVudC5ib2R5Lm9uY2xpY2sgPSBmdW5jdGlvbiAoKSB7IH07CgogICAgdGhpcy5zaW5nbGVfc2xpZGVfdmlldygpOwoKICAgIC8vdGhpcy5zZXRfbG9jYXRpb24oKTsKCiAgICB0aGlzLnJlc2l6ZWQoKTsKCiAgICBpZiAodGhpcy5pZTcpCiAgICAgIHNldFRpbWVvdXQodzNjX3NsaWR5LmllX2hhY2ssIDEwMCk7CgogICAgdGhpcy5zaG93X3Rvb2xiYXIoKTsKCiAgICAvLyBmb3IgYmFjayBidXR0b24gZGV0ZWN0aW9uCiAgICBzZXRJbnRlcnZhbChmdW5jdGlvbiAoKSB7IHczY19zbGlkeS5jaGVja19sb2NhdGlvbigpOyB9LCAyMDApOwogICAgdzNjX3NsaWR5LmluaXRpYWxpemVkID0gdHJ1ZTsKICB9LAoKICAvLyBjcmVhdGUgZGl2IGVsZW1lbnQgd2l0aCBsaW5rcyB0byBlYWNoIHNsaWRlCiAgdGFibGVfb2ZfY29udGVudHM6IGZ1bmN0aW9uICgpIHsKICAgIHZhciB0b2MgPSB0aGlzLmNyZWF0ZV9lbGVtZW50KCJkaXYiKTsKICAgIHRoaXMuYWRkX2NsYXNzKHRvYywgInNsaWR5X3RvYyBoaWRkZW4iKTsKICAgIC8vdG9jLnNldEF0dHJpYnV0ZSgidGFiaW5kZXgiLCAiMCIpOwoKICAgIHZhciBoZWFkaW5nID0gdGhpcy5jcmVhdGVfZWxlbWVudCgiZGl2Iik7CiAgICB0aGlzLmFkZF9jbGFzcyhoZWFkaW5nLCAidG9jLWhlYWRpbmciKTsKICAgIGhlYWRpbmcuaW5uZXJIVE1MID0gdGhpcy5sb2NhbGl6ZSgiVGFibGUgb2YgQ29udGVudHMiKTsKCiAgICB0b2MuYXBwZW5kQ2hpbGQoaGVhZGluZyk7CiAgICB2YXIgcHJldmlvdXMgPSBudWxsOwoKICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5zbGlkZXMubGVuZ3RoOyArK2kpCiAgICB7CiAgICAgIHZhciB0aXRsZSA9IHRoaXMuaGFzX2NsYXNzKHRoaXMuc2xpZGVzW2ldLCAidGl0bGUiKTsKICAgICAgdmFyIG51bSA9IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKChpICsgMSkgKyAiLiAiKTsKCiAgICAgIHRvYy5hcHBlbmRDaGlsZChudW0pOwoKICAgICAgdmFyIGEgPSB0aGlzLmNyZWF0ZV9lbGVtZW50KCJhIik7CiAgICAgIGEuc2V0QXR0cmlidXRlKCJocmVmIiwgIiMoIiArIChpKzEpICsgIikiKTsKCiAgICAgIGlmICh0aXRsZSkKICAgICAgICB0aGlzLmFkZF9jbGFzcyhhLCAidGl0bGVzbGlkZSIpOwoKICAgICAgdmFyIG5hbWUgPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSh0aGlzLnNsaWRlX25hbWUoaSkpOwogICAgICBhLmFwcGVuZENoaWxkKG5hbWUpOwogICAgICBhLm9uY2xpY2sgPSB3M2Nfc2xpZHkudG9jX2NsaWNrOwogICAgICBhLm9ua2V5ZG93biA9IHczY19zbGlkeS50b2Nfa2V5X2Rvd247CiAgICAgIGEucHJldmlvdXMgPSBwcmV2aW91czsKCiAgICAgIGlmIChwcmV2aW91cykKICAgICAgICBwcmV2aW91cy5uZXh0ID0gYTsKCiAgICAgIHRvYy5hcHBlbmRDaGlsZChhKTsKCiAgICAgIGlmIChpID09IDApCiAgICAgICAgdG9jLmZpcnN0ID0gYTsKCiAgICAgIGlmIChpIDwgdGhpcy5zbGlkZXMubGVuZ3RoIC0gMSkKICAgICAgewogICAgICAgIHZhciBiciA9IHRoaXMuY3JlYXRlX2VsZW1lbnQoImJyIik7CiAgICAgICAgdG9jLmFwcGVuZENoaWxkKGJyKTsKICAgICAgfQoKICAgICAgcHJldmlvdXMgPSBhOwogICAgfQoKICAgIHRvYy5mb2N1cyA9IGZ1bmN0aW9uICgpIHsKICAgICAgaWYgKHRoaXMuZmlyc3QpCiAgICAgICAgdGhpcy5maXJzdC5mb2N1cygpOwogICAgfQoKICAgIHRvYy5vbm1vdXNldXAgPSB3M2Nfc2xpZHkubW91c2VfYnV0dG9uX3VwOwoKICAgIHRvYy5vbmNsaWNrID0gZnVuY3Rpb24gKGUpIHsKICAgICAgZXx8KGU9d2luZG93LmV2ZW50KTsKCiAgICAgIGlmICh3M2Nfc2xpZHkuc2VsZWN0ZWRfdGV4dF9sZW4gPD0gMCkKICAgICAgICAgdzNjX3NsaWR5LmhpZGVfdGFibGVfb2ZfY29udGVudHModHJ1ZSk7CgogICAgICB3M2Nfc2xpZHkuc3RvcF9wcm9wYWdhdGlvbihlKTsKICAgIAogICAgICBpZiAoZS5jYW5jZWwgIT0gdW5kZWZpbmVkKQogICAgICAgIGUuY2FuY2VsID0gdHJ1ZTsKICAgICAgCiAgICAgIGlmIChlLnJldHVyblZhbHVlICE9IHVuZGVmaW5lZCkKICAgICAgICBlLnJldHVyblZhbHVlID0gZmFsc2U7CiAgICAgIAogICAgICByZXR1cm4gZmFsc2U7CiAgICB9OwoKICAgIGRvY3VtZW50LmJvZHkuaW5zZXJ0QmVmb3JlKHRvYywgZG9jdW1lbnQuYm9keS5maXJzdENoaWxkKTsKICAgIHJldHVybiB0b2M7CiAgfSwKCiAgaXNfc2hvd25fdG9jOiBmdW5jdGlvbiAoKSB7CiAgICByZXR1cm4gIXczY19zbGlkeS5oYXNfY2xhc3ModzNjX3NsaWR5LnRvYywgImhpZGRlbiIpOwogIH0sCgogIHNob3dfdGFibGVfb2ZfY29udGVudHM6IGZ1bmN0aW9uICgpIHsKICAgIHczY19zbGlkeS5yZW1vdmVfY2xhc3ModzNjX3NsaWR5LnRvYywgImhpZGRlbiIpOwogICAgdmFyIHRvYyA9IHczY19zbGlkeS50b2M7CiAgICB0b2MuZm9jdXMoKTsKCiAgICBpZiAodzNjX3NsaWR5LmllNyAmJiB3M2Nfc2xpZHkuc2xpZGVfbnVtYmVyID09IDApCiAgICAgIHNldFRpbWVvdXQodzNjX3NsaWR5LmllX2hhY2ssIDEwMCk7CiAgfSwKCiAgaGlkZV90YWJsZV9vZl9jb250ZW50czogZnVuY3Rpb24gKGZvY3VzKSB7CiAgICB3M2Nfc2xpZHkuYWRkX2NsYXNzKHczY19zbGlkeS50b2MsICJoaWRkZW4iKTsKCiAgICBpZiAoZm9jdXMgJiYgIXczY19zbGlkeS5vcGVyYSAmJgogICAgICAgICF3M2Nfc2xpZHkuaGFzX2NsYXNzKHczY19zbGlkeS50b2MsICJoaWRkZW4iKSkKICAgICAgdzNjX3NsaWR5LnNldF9mb2N1cygpOwogIH0sCgogIHRvZ2dsZV90YWJsZV9vZl9jb250ZW50czogZnVuY3Rpb24gKCkgewogICAgaWYgKHczY19zbGlkeS5pc19zaG93bl90b2MoKSkKICAgICAgdzNjX3NsaWR5LmhpZGVfdGFibGVfb2ZfY29udGVudHModHJ1ZSk7CiAgICBlbHNlCiAgICAgIHczY19zbGlkeS5zaG93X3RhYmxlX29mX2NvbnRlbnRzKCk7CiAgfSwKCiAgLy8gY2FsbGVkIG9uIGNsaWNraW5nIHRvYyBlbnRyeQogIHRvY19jbGljazogZnVuY3Rpb24gKGUpIHsKICAgIGlmICghZSkKICAgICAgZSA9IHdpbmRvdy5ldmVudDsKCiAgICB2YXIgdGFyZ2V0ID0gdzNjX3NsaWR5LmdldF90YXJnZXQoZSk7CgogICAgaWYgKHRhcmdldCAmJiB0YXJnZXQubm9kZVR5cGUgPT0gMSkKICAgIHsKICAgICAgdmFyIHVyaSA9IHRhcmdldC5nZXRBdHRyaWJ1dGUoImhyZWYiKTsKCiAgICAgIGlmICh1cmkpCiAgICAgIHsKICAgICAgICAvL2FsZXJ0KCJnb2luZyB0byAiICsgdXJpKTsKICAgICAgICB2YXIgc2xpZGUgPSB3M2Nfc2xpZHkuc2xpZGVzW3czY19zbGlkeS5zbGlkZV9udW1iZXJdOwogICAgICAgIHczY19zbGlkeS5oaWRlX3NsaWRlKHNsaWRlKTsKICAgICAgICB3M2Nfc2xpZHkuc2xpZGVfbnVtYmVyID0gdzNjX3NsaWR5LmZpbmRfc2xpZGVfbnVtYmVyKHVyaSk7CiAgICAgICAgc2xpZGUgPSB3M2Nfc2xpZHkuc2xpZGVzW3czY19zbGlkeS5zbGlkZV9udW1iZXJdOwogICAgICAgIHczY19zbGlkeS5sYXN0X3Nob3duID0gbnVsbDsKICAgICAgICB3M2Nfc2xpZHkuc2V0X2xvY2F0aW9uKCk7CiAgICAgICAgdzNjX3NsaWR5LnNldF92aXNpYmlsaXR5X2FsbF9pbmNyZW1lbnRhbCgiaGlkZGVuIik7CiAgICAgICAgdzNjX3NsaWR5LnNldF9lb3Nfc3RhdHVzKCF3M2Nfc2xpZHkubmV4dF9pbmNyZW1lbnRhbF9pdGVtKHczY19zbGlkeS5sYXN0X3Nob3duKSk7CiAgICAgICAgdzNjX3NsaWR5LnNob3dfc2xpZGUoc2xpZGUpOwogICAgICAgIC8vdGFyZ2V0LmZvY3VzKCk7CgogICAgICAgIHRyeQogICAgICAgIHsKICAgICAgICAgIGlmICghdzNjX3NsaWR5Lm9wZXJhKQogICAgICAgICAgICB3M2Nfc2xpZHkuc2V0X2ZvY3VzKCk7CiAgICAgICAgfQogICAgICAgIGNhdGNoIChlKQogICAgICAgIHsKICAgICAgICB9CiAgICAgIH0KICAgIH0KCiAgICB3M2Nfc2xpZHkuaGlkZV90YWJsZV9vZl9jb250ZW50cyh0cnVlKTsKICAgIGlmICh3M2Nfc2xpZHkuaWU3KSB3M2Nfc2xpZHkuaWVfaGFjaygpOwogICAgdzNjX3NsaWR5LnN0b3BfcHJvcGFnYXRpb24oZSk7CiAgICByZXR1cm4gdzNjX3NsaWR5LmNhbmNlbChlKTsKICB9LAoKICAvLyBjYWxsZWQgb25rZXlkb3duIGZvciB0b2MgZW50cnkKICB0b2Nfa2V5X2Rvd246IGZ1bmN0aW9uIChldmVudCkgewogICAgdmFyIGtleTsKCiAgICBpZiAoIWV2ZW50KQogICAgICB2YXIgZXZlbnQgPSB3aW5kb3cuZXZlbnQ7CgogICAgLy8ga2x1ZGdlIGFyb3VuZCBOUy9JRSBkaWZmZXJlbmNlcyAKICAgIGlmICh3aW5kb3cuZXZlbnQpCiAgICAgIGtleSA9IHdpbmRvdy5ldmVudC5rZXlDb2RlOwogICAgZWxzZSBpZiAoZXZlbnQud2hpY2gpCiAgICAgIGtleSA9IGV2ZW50LndoaWNoOwogICAgZWxzZQogICAgICByZXR1cm4gdHJ1ZTsgLy8gWWlrZXMhIHVua25vd24gYnJvd3NlcgoKICAgIC8vIGlnbm9yZSBldmVudCBpZiBrZXkgdmFsdWUgaXMgemVybwogICAgLy8gYXMgZm9yIGFsdCBvbiBPcGVyYSBhbmQgS29ucXVlcm9yCiAgICBpZiAoIWtleSkKICAgICAgcmV0dXJuIHRydWU7CgogICAgLy8gY2hlY2sgZm9yIGNvbmN1cnJlbnQgY29udHJvbC9jb21tYW5kL2FsdCBrZXkKICAgIC8vIGJ1dCBhcmUgdGhlc2Ugb25seSBwcmVzZW50IG9uIG1vdXNlIGV2ZW50cz8KCiAgICBpZiAoZXZlbnQuY3RybEtleSB8fCBldmVudC5hbHRLZXkpCiAgICAgIHJldHVybiB0cnVlOwoKICAgIGlmIChrZXkgPT0gMTMpCiAgICB7CiAgICAgIHZhciB1cmkgPSB0aGlzLmdldEF0dHJpYnV0ZSgiaHJlZiIpOwoKICAgICAgaWYgKHVyaSkKICAgICAgewogICAgICAgIC8vYWxlcnQoImdvaW5nIHRvICIgKyB1cmkpOwogICAgICAgdmFyIHNsaWRlID0gdzNjX3NsaWR5LnNsaWRlc1t3M2Nfc2xpZHkuc2xpZGVfbnVtYmVyXTsKICAgICAgICB3M2Nfc2xpZHkuaGlkZV9zbGlkZShzbGlkZSk7CiAgICAgICAgdzNjX3NsaWR5LnNsaWRlX251bWJlciA9IHczY19zbGlkeS5maW5kX3NsaWRlX251bWJlcih1cmkpOwogICAgICAgIHNsaWRlID0gdzNjX3NsaWR5LnNsaWRlc1t3M2Nfc2xpZHkuc2xpZGVfbnVtYmVyXTsKICAgICAgICB3M2Nfc2xpZHkubGFzdF9zaG93biA9IG51bGw7CiAgICAgICAgdzNjX3NsaWR5LnNldF9sb2NhdGlvbigpOwogICAgICAgIHczY19zbGlkeS5zZXRfdmlzaWJpbGl0eV9hbGxfaW5jcmVtZW50YWwoImhpZGRlbiIpOwogICAgICAgIHczY19zbGlkeS5zZXRfZW9zX3N0YXR1cyghdzNjX3NsaWR5Lm5leHRfaW5jcmVtZW50YWxfaXRlbSh3M2Nfc2xpZHkubGFzdF9zaG93bikpOwogICAgICAgIHczY19zbGlkeS5zaG93X3NsaWRlKHNsaWRlKTsKICAgICAgICAvL3RhcmdldC5mb2N1cygpOwoKICAgICAgICB0cnkKICAgICAgICB7CiAgICAgICAgICBpZiAoIXczY19zbGlkeS5vcGVyYSkKICAgICAgICAgICAgdzNjX3NsaWR5LnNldF9mb2N1cygpOwogICAgICAgIH0KICAgICAgICBjYXRjaCAoZSkKICAgICAgICB7CiAgICAgICAgfQogICAgICB9CgogICAgICB3M2Nfc2xpZHkuaGlkZV90YWJsZV9vZl9jb250ZW50cyh0cnVlKTsKCiAgICAgIGlmIChzZWxmLmllNykKICAgICAgIHczY19zbGlkeS5pZV9oYWNrKCk7CgogICAgICByZXR1cm4gdzNjX3NsaWR5LmNhbmNlbChldmVudCk7CiAgICB9CgogICAgaWYgKGtleSA9PSA0MCAmJiB0aGlzLm5leHQpCiAgICB7CiAgICAgIHRoaXMubmV4dC5mb2N1cygpOwogICAgICByZXR1cm4gdzNjX3NsaWR5LmNhbmNlbChldmVudCk7CiAgICB9CgogICAgaWYgKGtleSA9PSAzOCAmJiB0aGlzLnByZXZpb3VzKQogICAgewogICAgICB0aGlzLnByZXZpb3VzLmZvY3VzKCk7CiAgICAgIHJldHVybiB3M2Nfc2xpZHkuY2FuY2VsKGV2ZW50KTsKICAgIH0KCiAgICByZXR1cm4gdHJ1ZTsKICB9LAoKICB0b3VjaHN0YXJ0OiBmdW5jdGlvbiAoZSkKICB7CiAgICAvLyBhIGRvdWJsZSB0b3VjaCBvZnRlbiBzdGFydHMgd2l0aCBhCiAgICAvLyBzaW5nbGUgdG91Y2ggZHVlIHRvIGZpbmdlcnMgdG91Y2hpbmcKICAgIC8vIGRvd24gYXQgc2xpZ2h0bHkgZGlmZmVyZW50IHRpbWVzCiAgICAvLyB0aHVzIGF2b2lkIGNhbGxpbmcgcHJldmVudERlZmF1bHQgaGVyZQogICAgdGhpcy5wcmV2X3RhcCA9IHRoaXMubGFzdF90YXA7CiAgICB0aGlzLmxhc3RfdGFwID0gKG5ldyBEYXRlKS5nZXRUaW1lKCk7CgogICAgdmFyIHRhcF9kZWxheSA9IHRoaXMubGFzdF90YXAgLSB0aGlzLnByZXZfdGFwOwoKICAgIGlmICh0YXBfZGVsYXkgPD0gMjAwKQogICAgewogICAgICAvLyBkb3VibGUgdGFwCiAgICB9CgogICAgdmFyIHRvdWNoID0gZS50b3VjaGVzWzBdOwoKICAgIHRoaXMucGFnZVggPSB0b3VjaC5wYWdlWDsKICAgIHRoaXMucGFnZVkgPSB0b3VjaC5wYWdlWTsKICAgIHRoaXMuc2NyZWVuWCA9IHRvdWNoLnNjcmVlblg7CiAgICB0aGlzLnNjcmVlblkgPSB0b3VjaC5zY3JlZW5ZOwogICAgdGhpcy5jbGllbnRYID0gdG91Y2guY2xpZW50WDsKICAgIHRoaXMuY2xpZW50WSA9IHRvdWNoLmNsaWVudFk7CgogICAgdGhpcy5kZWx0YV94ID0gdGhpcy5kZWx0YV95ID0gMDsKICB9LAoKICB0b3VjaG1vdmU6IGZ1bmN0aW9uIChlKQogIHsKICAgIC8vIG92ZXJyaWRlIG5hdGl2ZSBnZXN0dXJlcyBmb3Igc2luZ2xlIHRvdWNoCiAgICBpZiAoZS50b3VjaGVzLmxlbmd0aCA+IDEpCiAgICAgIHJldHVybjsKCiAgICBlLnByZXZlbnREZWZhdWx0KCk7CiAgICB2YXIgdG91Y2ggPSBlLnRvdWNoZXNbMF07CiAgICB0aGlzLmRlbHRhX3ggPSB0b3VjaC5wYWdlWCAtIHRoaXMucGFnZVg7CiAgICB0aGlzLmRlbHRhX3kgPSB0b3VjaC5wYWdlWSAtIHRoaXMucGFnZVk7CiAgfSwKCiAgdG91Y2hlbmQ6IGZ1bmN0aW9uIChlKQogIHsKICAgIC8vIGRlZmF1bHQgYmVoYXZpb3IgZm9yIG11bHRpLXRvdWNoCiAgICBpZiAoZS50b3VjaGVzLmxlbmd0aCA+IDEpCiAgICAgIHJldHVybjsKCiAgICB2YXIgZGVsYXkgPSAobmV3IERhdGUpLmdldFRpbWUoKSAtIHRoaXMubGFzdF90YXA7CiAgICB2YXIgZHggPSB0aGlzLmRlbHRhX3g7CiAgICB2YXIgZHkgPSB0aGlzLmRlbHRhX3k7CiAgICB2YXIgYWJzX2R4ID0gTWF0aC5hYnMoZHgpOwogICAgdmFyIGFic19keSA9IE1hdGguYWJzKGR5KTsKCiAgICBpZiAoZGVsYXkgPCA1MDAgJiYgKGFic19keCA+IDEwMCB8fCBhYnNfZHkgPiAxMDApKQogICAgewogICAgICBpZiAoYWJzX2R4ID4gMC41ICogYWJzX2R5KQogICAgICB7CiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOwoKICAgICAgICBpZiAoZHggPCAwKQogICAgICAgICAgdzNjX3NsaWR5Lm5leHRfc2xpZGUodHJ1ZSk7CiAgICAgICAgZWxzZQogICAgICAgICAgdzNjX3NsaWR5LnByZXZpb3VzX3NsaWRlKHRydWUpOwogICAgICB9CiAgICAgIGVsc2UgaWYgKGFic19keSA+IDIgKiBhYnNfZHgpCiAgICAgIHsKICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7CiAgICAgICAgdzNjX3NsaWR5LnRvZ2dsZV90YWJsZV9vZl9jb250ZW50cygpOwogICAgICB9CiAgICB9CiAgfSwKCiAgLy8gIyMjIE9CU09MRVRFICMjIwogIGJlZm9yZV9wcmludDogZnVuY3Rpb24gKCkgewogICAgdGhpcy5zaG93X2FsbF9zbGlkZXMoKTsKICAgIHRoaXMuaGlkZV90b29sYmFyKCk7CiAgICBhbGVydCgiYmVmb3JlIHByaW50Iik7CiAgfSwKCiAgLy8gIyMjIE9CU09MRVRFICMjIwogIGFmdGVyX3ByaW50OiBmdW5jdGlvbiAoKSB7CiAgICBpZiAoIXRoaXMudmlld19hbGwpCiAgICB7CiAgICAgIHRoaXMuc2luZ2xlX3NsaWRlX3ZpZXcoKTsKICAgICAgdGhpcy5zaG93X3Rvb2xiYXIoKTsKICAgIH0KICAgIGFsZXJ0KCJhZnRlciBwcmludCIpOwogIH0sCgogIC8vICMjIyBPQlNPTEVURSAjIyMKICBwcmludF9zbGlkZXM6IGZ1bmN0aW9uICgpIHsKICAgIHRoaXMuYmVmb3JlX3ByaW50KCk7CiAgICB3aW5kb3cucHJpbnQoKTsKICAgIHRoaXMuYWZ0ZXJfcHJpbnQoKTsKICB9LAoKICAvLyAjIyMgT0JTT0xFVEUgPz8gIyMjCiAgdG9nZ2xlX3ZpZXc6IGZ1bmN0aW9uICgpIHsKICAgIGlmICh0aGlzLnZpZXdfYWxsKQogICAgewogICAgICB0aGlzLnNpbmdsZV9zbGlkZV92aWV3KCk7CiAgICAgIHRoaXMuc2hvd190b29sYmFyKCk7CiAgICAgIHRoaXMudmlld19hbGwgPSAwOwogICAgfQogICAgZWxzZQogICAgewogICAgICB0aGlzLnNob3dfYWxsX3NsaWRlcygpOwogICAgICB0aGlzLmhpZGVfdG9vbGJhcigpOwogICAgICB0aGlzLnZpZXdfYWxsID0gMTsKICAgIH0KICB9LAoKICAvLyBwcmVwYXJlIGZvciBwcmludGluZyAgIyMjIE9CU09MRVRFICMjIwogIHNob3dfYWxsX3NsaWRlczogZnVuY3Rpb24gKCkgewogICAgdGhpcy5yZW1vdmVfY2xhc3MoZG9jdW1lbnQuYm9keSwgInNpbmdsZV9zbGlkZSIpOwogICAgdGhpcy5zZXRfdmlzaWJpbGl0eV9hbGxfaW5jcmVtZW50YWwoInZpc2libGUiKTsKICB9LAoKICAvLyByZXN0b3JlIGFmdGVyIHByaW50aW5nICAjIyMgT0JTT0xFVEUgIyMjCiAgc2luZ2xlX3NsaWRlX3ZpZXc6IGZ1bmN0aW9uICgpIHsKICAgIHRoaXMuYWRkX2NsYXNzKGRvY3VtZW50LmJvZHksICJzaW5nbGVfc2xpZGUiKTsKICAgIHRoaXMuc2V0X3Zpc2liaWxpdHlfYWxsX2luY3JlbWVudGFsKCJ2aXNpYmxlIik7CiAgICB0aGlzLmxhc3Rfc2hvd24gPSB0aGlzLnByZXZpb3VzX2luY3JlbWVudGFsX2l0ZW0obnVsbCk7CiAgfSwKCiAgLy8gc3VwcHJlc3MgSUUncyBpbWFnZSB0b29sYmFyIHBvcCB1cAogIGhpZGVfaW1hZ2VfdG9vbGJhcjogZnVuY3Rpb24gKCkgewogICAgaWYgKCF0aGlzLm5zX3BvcykKICAgIHsKICAgICAgdmFyIGltYWdlcyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCJJTUciKTsKCiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgaW1hZ2VzLmxlbmd0aDsgKytpKQogICAgICAgIGltYWdlc1tpXS5zZXRBdHRyaWJ1dGUoImdhbGxlcnlpbWciLCAibm8iKTsKICAgIH0KICB9LAoKICB1bmxvYWRlZDogZnVuY3Rpb24gKGUpIHsKICAgIC8vYWxlcnQoInVubG9hZGVkIik7CiAgfSwKCiAgLy8gU2FmYXJpIGFuZCBLb25xdWVyb3IgZG9uJ3QgeWV0IHN1cHBvcnQgZ2V0Q29tcHV0ZWRTdHlsZSgpCiAgLy8gYW5kIHRoZXkgYWx3YXlzIHJlbG9hZCBwYWdlIHdoZW4gbG9jYXRpb24uaHJlZiBpcyB1cGRhdGVkCiAgaXNfS0hUTUw6IGZ1bmN0aW9uICgpIHsKICAgIHZhciBhZ2VudCA9IG5hdmlnYXRvci51c2VyQWdlbnQ7CiAgICByZXR1cm4gKGFnZW50LmluZGV4T2YoIktIVE1MIikgPj0gMCA/IHRydWUgOiBmYWxzZSk7CiAgfSwKCiAgLy8gZmluZCBzbGlkZSBuYW1lIGZyb20gZmlyc3QgaDEgZWxlbWVudAogIC8vIGRlZmF1bHQgdG8gZG9jdW1lbnQgdGl0bGUgKyBzbGlkZSBudW1iZXIKICBzbGlkZV9uYW1lOiBmdW5jdGlvbiAoaW5kZXgpIHsKICAgIHZhciBuYW1lID0gbnVsbDsKICAgIHZhciBzbGlkZSA9IHRoaXMuc2xpZGVzW2luZGV4XTsKCiAgICB2YXIgaGVhZGluZyA9IHRoaXMuZmluZF9oZWFkaW5nKHNsaWRlKTsKCiAgICBpZiAoaGVhZGluZykKICAgICAgbmFtZSA9IHRoaXMuZXh0cmFjdF90ZXh0KGhlYWRpbmcpOwoKICAgIGlmICghbmFtZSkKICAgICAgbmFtZSA9IHRoaXMudGl0bGUgKyAiKCIgKyAoaW5kZXggKyAxKSArICIpIjsKCiAgICBuYW1lLnJlcGxhY2UoL1wmL2csICImYW1wOyIpOwogICAgbmFtZS5yZXBsYWNlKC9cPC9nLCAiJmx0OyIpOwogICAgbmFtZS5yZXBsYWNlKC9cPi9nLCAiJmd0OyIpOwoKICAgIHJldHVybiBuYW1lOwogIH0sCgogIC8vIGZpbmQgZmlyc3QgaDEgZWxlbWVudCBpbiBET00gdHJlZQogIGZpbmRfaGVhZGluZzogZnVuY3Rpb24gKG5vZGUpIHsKICAgIGlmICghbm9kZSB8fCBub2RlLm5vZGVUeXBlICE9IDEpCiAgICAgIHJldHVybiBudWxsOwoKICAgIGlmIChub2RlLm5vZGVOYW1lID09ICJIMSIgfHwgbm9kZS5ub2RlTmFtZSA9PSAiaDEiKQogICAgICByZXR1cm4gbm9kZTsKCiAgICB2YXIgY2hpbGQgPSBub2RlLmZpcnN0Q2hpbGQ7CgogICAgd2hpbGUgKGNoaWxkKQogICAgewogICAgICBub2RlID0gdGhpcy5maW5kX2hlYWRpbmcoY2hpbGQpOwoKICAgICAgaWYgKG5vZGUpCiAgICAgICAgcmV0dXJuIG5vZGU7CgogICAgICBjaGlsZCA9IGNoaWxkLm5leHRTaWJsaW5nOwogICAgfQoKICAgIHJldHVybiBudWxsOwogIH0sCgogIC8vIHJlY3Vyc2l2ZWx5IGV4dHJhY3QgdGV4dCBmcm9tIERPTSB0cmVlCiAgZXh0cmFjdF90ZXh0OiBmdW5jdGlvbiAobm9kZSkgewogICAgaWYgKCFub2RlKQogICAgICByZXR1cm4gIiI7CgogICAgLy8gdGV4dCBub2RlcwogICAgaWYgKG5vZGUubm9kZVR5cGUgPT0gMykKICAgICAgcmV0dXJuIG5vZGUubm9kZVZhbHVlOwoKICAgIC8vIGVsZW1lbnRzCiAgICBpZiAobm9kZS5ub2RlVHlwZSA9PSAxKQogICAgewogICAgICBub2RlID0gbm9kZS5maXJzdENoaWxkOwogICAgICB2YXIgdGV4dCA9ICIiOwoKICAgICAgd2hpbGUgKG5vZGUpCiAgICAgIHsKICAgICAgICB0ZXh0ID0gdGV4dCArIHRoaXMuZXh0cmFjdF90ZXh0KG5vZGUpOwogICAgICAgIG5vZGUgPSBub2RlLm5leHRTaWJsaW5nOwogICAgICB9CgogICAgICByZXR1cm4gdGV4dDsKICAgIH0KCiAgICByZXR1cm4gIiI7CiAgfSwKCiAgLy8gZmluZCBjb3B5cmlnaHQgdGV4dCBmcm9tIG1ldGEgZWxlbWVudAogIGZpbmRfY29weXJpZ2h0OiBmdW5jdGlvbiAoKSB7CiAgICB2YXIgbmFtZSwgY29udGVudDsKICAgIHZhciBtZXRhID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoIm1ldGEiKTsKCiAgICBmb3IgKHZhciBpID0gMDsgaSA8IG1ldGEubGVuZ3RoOyArK2kpCiAgICB7CiAgICAgIG5hbWUgPSBtZXRhW2ldLmdldEF0dHJpYnV0ZSgibmFtZSIpOwogICAgICBjb250ZW50ID0gbWV0YVtpXS5nZXRBdHRyaWJ1dGUoImNvbnRlbnQiKTsKCiAgICAgIGlmIChuYW1lID09ICJjb3B5cmlnaHQiKQogICAgICAgIHJldHVybiBjb250ZW50OwogICAgfQoKICAgIHJldHVybiBudWxsOwogIH0sCgogIGZpbmRfc2l6ZV9hZGp1c3Q6IGZ1bmN0aW9uICgpIHsKICAgIHZhciBuYW1lLCBjb250ZW50LCBvZmZzZXQ7CiAgICB2YXIgbWV0YSA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCJtZXRhIik7CgogICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtZXRhLmxlbmd0aDsgKytpKQogICAgewogICAgICBuYW1lID0gbWV0YVtpXS5nZXRBdHRyaWJ1dGUoIm5hbWUiKTsKICAgICAgY29udGVudCA9IG1ldGFbaV0uZ2V0QXR0cmlidXRlKCJjb250ZW50Iik7CgogICAgICBpZiAobmFtZSA9PSAiZm9udC1zaXplLWFkanVzdG1lbnQiKQogICAgICAgIHJldHVybiAxICogY29udGVudDsKICAgIH0KCiAgICByZXR1cm4gMTsKICB9LAoKICAvLyA8bWV0YSBuYW1lPSJkdXJhdGlvbiIgY29udGVudD0iMjAiIC8+ICBmb3IgMjAgbWludXRlcwogIGZpbmRfZHVyYXRpb246IGZ1bmN0aW9uICgpIHsKICAgIHZhciBuYW1lLCBjb250ZW50LCBvZmZzZXQ7CiAgICB2YXIgbWV0YSA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCJtZXRhIik7CgogICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtZXRhLmxlbmd0aDsgKytpKQogICAgewogICAgICBuYW1lID0gbWV0YVtpXS5nZXRBdHRyaWJ1dGUoIm5hbWUiKTsKICAgICAgY29udGVudCA9IG1ldGFbaV0uZ2V0QXR0cmlidXRlKCJjb250ZW50Iik7CgogICAgICBpZiAobmFtZSA9PSAiZHVyYXRpb24iKQogICAgICAgIHJldHVybiA2MDAwMCAqIGNvbnRlbnQ7CiAgICB9CgogICAgcmV0dXJuIG51bGw7CiAgfSwKCiAgcmVwbGFjZV9ieV9ub25fYnJlYWtpbmdfc3BhY2U6IGZ1bmN0aW9uIChzdHIpIHsKICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc3RyLmxlbmd0aDsgKytpKQogICAgICBzdHJbaV0gPSAxNjA7CiAgfSwKCiAgLy8gIyMjIENIRUNLIE1FICMjIyBpcyB1c2Ugb2YgImxpIiBva2F5IGZvciB0ZXh0L2h0bWw/CiAgLy8gZm9yIFhIVE1MIGRvIHdlIGFsc28gbmVlZCB0byBzcGVjaWZ5IG5hbWVzcGFjZT8KICBpbml0X291dGxpbmVyOiBmdW5jdGlvbiAoKSB7CiAgICB2YXIgaXRlbXMgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgibGkiKTsKCiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGl0ZW1zLmxlbmd0aDsgKytpKQogICAgewogICAgICB2YXIgdGFyZ2V0ID0gaXRlbXNbaV07CgogICAgICBpZiAoIXRoaXMuaGFzX2NsYXNzKHRhcmdldC5wYXJlbnROb2RlLCAib3V0bGluZSIpKQogICAgICAgIGNvbnRpbnVlOwoKICAgICAgdGFyZ2V0Lm9uY2xpY2sgPSB0aGlzLm91dGxpbmVfY2xpY2s7Ci8qICMjIyBtb3JlIHdvcmsgbmVlZGVkIGZvciBJRTYKICAgICAgaWYgKCF0aGlzLm5zX3BvcykKICAgICAgewogICAgICAgIHRhcmdldC5vbm1vdXNlb3ZlciA9IHRoaXMuaG92ZXJfb3V0bGluZTsKICAgICAgICB0YXJnZXQub25tb3VzZW91dCA9IHRoaXMudW5ob3Zlcl9vdXRsaW5lOwogICAgICB9CiovCiAgICAgIGlmICh0aGlzLmZvbGRhYmxlKHRhcmdldCkpCiAgICAgIHsKICAgICAgICB0YXJnZXQuZm9sZGFibGUgPSB0cnVlOwogICAgICAgIHRhcmdldC5vbmZvY3VzID0gZnVuY3Rpb24gKCkge3czY19zbGlkeS5vdXRsaW5lID0gdGhpczt9OwogICAgICAgIHRhcmdldC5vbmJsdXIgPSBmdW5jdGlvbiAoKSB7dzNjX3NsaWR5Lm91dGxpbmUgPSBudWxsO307CgogICAgICAgIGlmICghdGFyZ2V0LmdldEF0dHJpYnV0ZSgidGFiaW5kZXgiKSkKICAgICAgICAgIHRhcmdldC5zZXRBdHRyaWJ1dGUoInRhYmluZGV4IiwgIjAiKTsKCiAgICAgICAgaWYgKHRoaXMuaGFzX2NsYXNzKHRhcmdldCwgImV4cGFuZCIpKQogICAgICAgICAgdGhpcy51bmZvbGQodGFyZ2V0KTsKICAgICAgICBlbHNlCiAgICAgICAgICB0aGlzLmZvbGQodGFyZ2V0KTsKICAgICAgfQogICAgICBlbHNlCiAgICAgIHsKICAgICAgICB0aGlzLmFkZF9jbGFzcyh0YXJnZXQsICJub2ZvbGQiKTsKICAgICAgICB0YXJnZXQudmlzaWJsZSA9IHRydWU7CiAgICAgICAgdGFyZ2V0LmZvbGRhYmxlID0gZmFsc2U7CiAgICAgIH0KICAgIH0KICB9LAoKICBmb2xkYWJsZTogZnVuY3Rpb24gKGl0ZW0pIHsKICAgIGlmICghaXRlbSB8fCBpdGVtLm5vZGVUeXBlICE9IDEpCiAgICAgIHJldHVybiBmYWxzZTsKCiAgICB2YXIgbm9kZSA9IGl0ZW0uZmlyc3RDaGlsZDsKCiAgICB3aGlsZSAobm9kZSkKICAgIHsKICAgICAgaWYgKG5vZGUubm9kZVR5cGUgPT0gMSAmJiB0aGlzLmlzX2Jsb2NrKG5vZGUpKQogICAgICAgIHJldHVybiB0cnVlOwoKICAgICAgbm9kZSA9IG5vZGUubmV4dFNpYmxpbmc7CiAgICB9CgogICAgcmV0dXJuIGZhbHNlOwogIH0sCgogIC8vICMjIyBDSEVDSyBNRSAjIyMgc3dpdGNoIHRvIGFkZC9yZW1vdmUgImhpZGRlbiIgY2xhc3MKICBmb2xkOiBmdW5jdGlvbiAoaXRlbSkgewogICAgaWYgKGl0ZW0pCiAgICB7CiAgICAgIHRoaXMucmVtb3ZlX2NsYXNzKGl0ZW0sICJ1bmZvbGRlZCIpOwogICAgICB0aGlzLmFkZF9jbGFzcyhpdGVtLCAiZm9sZGVkIik7CiAgICB9CgogICAgdmFyIG5vZGUgPSBpdGVtID8gaXRlbS5maXJzdENoaWxkIDogbnVsbDsKCiAgICB3aGlsZSAobm9kZSkKICAgIHsKICAgICAgaWYgKG5vZGUubm9kZVR5cGUgPT0gMSAmJiB0aGlzLmlzX2Jsb2NrKG5vZGUpKSAvLyBlbGVtZW50CiAgICAgIHsKICAgICAgICAgdzNjX3NsaWR5LmFkZF9jbGFzcyhub2RlLCAiaGlkZGVuIik7CiAgICAgIH0KCiAgICAgIG5vZGUgPSBub2RlLm5leHRTaWJsaW5nOwogICAgfQoKICAgIGl0ZW0udmlzaWJsZSA9IGZhbHNlOwogIH0sCgogIC8vICMjIyBDSEVDSyBNRSAjIyMgc3dpdGNoIHRvIGFkZC9yZW1vdmUgImhpZGRlbiIgY2xhc3MKICB1bmZvbGQ6IGZ1bmN0aW9uIChpdGVtKSB7CiAgICBpZiAoaXRlbSkKICAgIHsKICAgICAgdGhpcy5hZGRfY2xhc3MoaXRlbSwgInVuZm9sZGVkIik7CiAgICAgIHRoaXMucmVtb3ZlX2NsYXNzKGl0ZW0sICJmb2xkZWQiKTsKICAgIH0KCiAgICB2YXIgbm9kZSA9IGl0ZW0gPyBpdGVtLmZpcnN0Q2hpbGQgOiBudWxsOwoKICAgIHdoaWxlIChub2RlKQogICAgewogICAgICBpZiAobm9kZS5ub2RlVHlwZSA9PSAxICYmIHRoaXMuaXNfYmxvY2sobm9kZSkpIC8vIGVsZW1lbnQKICAgICAgewogICAgICAgIHczY19zbGlkeS5yZW1vdmVfY2xhc3Mobm9kZSwgImhpZGRlbiIpOwogICAgICB9CgogICAgICBub2RlID0gbm9kZS5uZXh0U2libGluZzsKICAgIH0KCiAgICBpdGVtLnZpc2libGUgPSB0cnVlOwogIH0sCgogIG91dGxpbmVfY2xpY2s6IGZ1bmN0aW9uIChlKSB7CiAgICBpZiAoIWUpCiAgICAgIGUgPSB3aW5kb3cuZXZlbnQ7CgogICAgdmFyIHJpZ2h0Y2xpY2sgPSBmYWxzZTsKICAgIHZhciB0YXJnZXQgPSB3M2Nfc2xpZHkuZ2V0X3RhcmdldChlKTsKCiAgICB3aGlsZSAodGFyZ2V0ICYmIHRhcmdldC52aXNpYmxlID09IHVuZGVmaW5lZCkKICAgICAgdGFyZ2V0ID0gdGFyZ2V0LnBhcmVudE5vZGU7CgogICAgaWYgKCF0YXJnZXQpCiAgICAgIHJldHVybiB0cnVlOwoKICAgIGlmIChlLndoaWNoKQogICAgICByaWdodGNsaWNrID0gKGUud2hpY2ggPT0gMyk7CiAgICBlbHNlIGlmIChlLmJ1dHRvbikKICAgICAgcmlnaHRjbGljayA9IChlLmJ1dHRvbiA9PSAyKTsKCiAgICBpZiAoIXJpZ2h0Y2xpY2sgJiYgdGFyZ2V0LnZpc2libGUgIT0gdW5kZWZpbmVkKQogICAgewogICAgICBpZiAodGFyZ2V0LmZvbGRhYmxlKQogICAgICB7CiAgICAgICAgaWYgKHRhcmdldC52aXNpYmxlKQogICAgICAgICAgdzNjX3NsaWR5LmZvbGQodGFyZ2V0KTsKICAgICAgICBlbHNlCiAgICAgICAgICB3M2Nfc2xpZHkudW5mb2xkKHRhcmdldCk7CiAgICAgIH0KCiAgICAgIHczY19zbGlkeS5zdG9wX3Byb3BhZ2F0aW9uKGUpOwogICAgICBlLmNhbmNlbCA9IHRydWU7CiAgICAgIGUucmV0dXJuVmFsdWUgPSBmYWxzZTsKICAgIH0KCiAgICByZXR1cm4gZmFsc2U7CiAgfSwKCiAgYWRkX2luaXRpYWxfcHJvbXB0OiBmdW5jdGlvbiAoKSB7CiAgICB2YXIgcHJvbXB0ID0gdGhpcy5jcmVhdGVfZWxlbWVudCgiZGl2Iik7CiAgICBwcm9tcHQuc2V0QXR0cmlidXRlKCJjbGFzcyIsICJpbml0aWFsX3Byb21wdCIpOwoKICAgIHZhciBwMSA9IHRoaXMuY3JlYXRlX2VsZW1lbnQoInAiKTsKICAgIHByb21wdC5hcHBlbmRDaGlsZChwMSk7CiAgICBwMS5zZXRBdHRyaWJ1dGUoImNsYXNzIiwgImhlbHAiKTsKCiAgICBpZiAodGhpcy5rZXlib2FyZGxlc3MpCiAgICAgIHAxLmlubmVySFRNTCA9ICJzd2lwZSBsZWZ0IHRvIG1vdmUgdG8gbmV4dCBzbGlkZSI7CiAgICBlbHNlCiAgICAgIHAxLmlubmVySFRNTCA9ICJTcGFjZSwgUmlnaHQgQXJyb3cgb3Igc3dpcGUgbGVmdCB0byBtb3ZlIHRvICIgKwogICAgICAgICAgICAgICAgICAgICAibmV4dCBzbGlkZSwgY2xpY2sgaGVscCBiZWxvdyBmb3IgbW9yZSBkZXRhaWxzIjsKCiAgICB0aGlzLmFkZF9saXN0ZW5lcihwcm9tcHQsICJjbGljayIsIGZ1bmN0aW9uIChlKSB7CiAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQocHJvbXB0KTsKICAgICAgdzNjX3NsaWR5LnN0b3BfcHJvcGFnYXRpb24oZSk7CiAgICAKICAgICAgaWYgKGUuY2FuY2VsICE9IHVuZGVmaW5lZCkKICAgICAgICBlLmNhbmNlbCA9IHRydWU7CiAgICAgIAogICAgICBpZiAoZS5yZXR1cm5WYWx1ZSAhPSB1bmRlZmluZWQpCiAgICAgICAgZS5yZXR1cm5WYWx1ZSA9IGZhbHNlOwogICAgICAKICAgICAgcmV0dXJuIGZhbHNlOwogICAgfSk7CgogICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChwcm9tcHQpOwogICAgdGhpcy5pbml0aWFsX3Byb21wdCA9IHByb21wdDsKICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7ZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChwcm9tcHQpO30sIDUwMDApOwogIH0sCgogIGFkZF90b29sYmFyOiBmdW5jdGlvbiAoKSB7CiAgICB2YXIgY291bnRlciwgcGFnZTsKCiAgICAgdGhpcy50b29sYmFyID0gdGhpcy5jcmVhdGVfZWxlbWVudCgiZGl2Iik7CiAgICAgdGhpcy50b29sYmFyLnNldEF0dHJpYnV0ZSgiY2xhc3MiLCAidG9vbGJhciIpOwoKICAgICAvLyBhIHJlYXNvbmFibHkgYmVoYXZlZCBicm93c2VyCiAgICAgaWYgKHRoaXMubnNfcG9zIHx8ICF0aGlzLmllNikKICAgICB7CiAgICAgICB2YXIgcmlnaHQgPSB0aGlzLmNyZWF0ZV9lbGVtZW50KCJkaXYiKTsKICAgICAgIHJpZ2h0LnNldEF0dHJpYnV0ZSgic3R5bGUiLCAiZmxvYXQ6IHJpZ2h0OyB0ZXh0LWFsaWduOiByaWdodCIpOwoKICAgICAgIGNvdW50ZXIgPSB0aGlzLmNyZWF0ZV9lbGVtZW50KCJzcGFuIikKICAgICAgIGNvdW50ZXIuaW5uZXJIVE1MID0gdGhpcy5sb2NhbGl6ZSgic2xpZGUiKSArICIgbi9tIjsKICAgICAgIHJpZ2h0LmFwcGVuZENoaWxkKGNvdW50ZXIpOwogICAgICAgdGhpcy50b29sYmFyLmFwcGVuZENoaWxkKHJpZ2h0KTsKCiAgICAgICB2YXIgbGVmdCA9IHRoaXMuY3JlYXRlX2VsZW1lbnQoImRpdiIpOwogICAgICAgbGVmdC5zZXRBdHRyaWJ1dGUoInN0eWxlIiwgInRleHQtYWxpZ246IGxlZnQiKTsKCiAgICAgICAvLyBnbG9iYWwgZW5kIG9mIHNsaWRlIGluZGljYXRvcgogICAgICAgdGhpcy5lb3MgPSB0aGlzLmNyZWF0ZV9lbGVtZW50KCJzcGFuIik7CiAgICAgICB0aGlzLmVvcy5pbm5lckhUTUwgPSAiKiAiOwogICAgICAgbGVmdC5hcHBlbmRDaGlsZCh0aGlzLmVvcyk7CgogICAgICAgdmFyIGhlbHAgPSB0aGlzLmNyZWF0ZV9lbGVtZW50KCJhIik7CiAgICAgICBoZWxwLnNldEF0dHJpYnV0ZSgiaHJlZiIsIHRoaXMuaGVscF9wYWdlKTsKICAgICAgIGhlbHAuc2V0QXR0cmlidXRlKCJ0aXRsZSIsIHRoaXMubG9jYWxpemUodGhpcy5oZWxwX3RleHQpKTsKICAgICAgIGhlbHAuaW5uZXJIVE1MID0gdGhpcy5sb2NhbGl6ZSgiaGVscD8iKTsKICAgICAgIGxlZnQuYXBwZW5kQ2hpbGQoaGVscCk7CiAgICAgICBoZWxwLnN0eWxlLmRpc3BsYXk9Im5vbmUiOyAKICAgICAgIHRoaXMuaGVscF9hbmNob3IgPSBoZWxwOyAgLy8gc2F2ZSBmb3IgZm9jdXMgaGFjawoKICAgICAgIHZhciBnYXAxID0gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoIiAiKTsKICAgICAgIGxlZnQuYXBwZW5kQ2hpbGQoZ2FwMSk7CgogICAgICAgdmFyIGNvbnRlbnRzID0gdGhpcy5jcmVhdGVfZWxlbWVudCgiYSIpOwogICAgICAgY29udGVudHMuc2V0QXR0cmlidXRlKCJocmVmIiwgImphdmFzY3JpcHQ6dzNjX3NsaWR5LnRvZ2dsZV90YWJsZV9vZl9jb250ZW50cygpIik7CiAgICAgICBjb250ZW50cy5zZXRBdHRyaWJ1dGUoInRpdGxlIiwgdGhpcy5sb2NhbGl6ZSgidGFibGUgb2YgY29udGVudHMiKSk7CiAgICAgICBjb250ZW50cy5pbm5lckhUTUwgPSB0aGlzLmxvY2FsaXplKCJDb250ZW50cyIpOwogICAgICAgbGVmdC5hcHBlbmRDaGlsZChjb250ZW50cyk7CgogICAgICAgdmFyIGdhcDIgPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSgiICIpOwogICAgICAgbGVmdC5hcHBlbmRDaGlsZChnYXAyKTsKCiAgICAgICB2YXIgY29weXJpZ2h0ID0gdGhpcy5maW5kX2NvcHlyaWdodCgpOwoKICAgICAgIGlmIChjb3B5cmlnaHQpCiAgICAgICB7CiAgICAgICAgIHZhciBzcGFuID0gdGhpcy5jcmVhdGVfZWxlbWVudCgic3BhbiIpOwogICAgICAgICBzcGFuLmNsYXNzTmFtZSA9ICJjb3B5cmlnaHQiOwogICAgICAgICBzcGFuLmlubmVySFRNTCA9IGNvcHlyaWdodDsKICAgICAgICAgbGVmdC5hcHBlbmRDaGlsZChzcGFuKTsKICAgICAgIH0KCiAgICAgICB0aGlzLnRvb2xiYXIuc2V0QXR0cmlidXRlKCJ0YWJpbmRleCIsICIwIik7CiAgICAgICB0aGlzLnRvb2xiYXIuYXBwZW5kQ2hpbGQobGVmdCk7CiAgICAgfQogICAgIGVsc2UgLy8gSUU2IHNvIG5lZWQgdG8gd29yayBhcm91bmQgaXRzIHBvb3IgQ1NTIHN1cHBvcnQKICAgICB7CiAgICAgICB0aGlzLnRvb2xiYXIuc3R5bGUucG9zaXRpb24gPSAodGhpcy5pZTcgPyAiZml4ZWQiIDogImFic29sdXRlIik7CiAgICAgICB0aGlzLnRvb2xiYXIuc3R5bGUuekluZGV4ID0gIjIwMCI7CiAgICAgICB0aGlzLnRvb2xiYXIuc3R5bGUud2lkdGggPSAiOTkuOSUiOwogICAgICAgdGhpcy50b29sYmFyLnN0eWxlLmhlaWdodCA9ICIxLjJlbSI7CiAgICAgICB0aGlzLnRvb2xiYXIuc3R5bGUudG9wID0gImF1dG8iOwogICAgICAgdGhpcy50b29sYmFyLnN0eWxlLmJvdHRvbSA9ICIwIjsKICAgICAgIHRoaXMudG9vbGJhci5zdHlsZS5sZWZ0ID0gIjAiOwogICAgICAgdGhpcy50b29sYmFyLnN0eWxlLnJpZ2h0ID0gIjAiOwogICAgICAgdGhpcy50b29sYmFyLnN0eWxlLnRleHRBbGlnbiA9ICJsZWZ0IjsKICAgICAgIHRoaXMudG9vbGJhci5zdHlsZS5mb250U2l6ZSA9ICI2MCUiOwogICAgICAgdGhpcy50b29sYmFyLnN0eWxlLmNvbG9yID0gInJlZCI7CiAgICAgICB0aGlzLnRvb2xiYXIuYm9yZGVyV2lkdGggPSAwOwogICAgICAgdGhpcy50b29sYmFyLmNsYXNzTmFtZSA9ICJ0b29sYmFyIjsKICAgICAgIHRoaXMudG9vbGJhci5zdHlsZS5iYWNrZ3JvdW5kID0gInJnYigyNDAsMjQwLDI0MCkiOwoKICAgICAgIC8vIHdvdWxkIGxpa2UgdG8gaGF2ZSBoZWxwIHRleHQgbGVmdCBhbGlnbmVkCiAgICAgICAvLyBhbmQgcGFnZSBjb3VudGVyIHJpZ2h0IGFsaWduZWQsIGZsb2F0aW5nCiAgICAgICAvLyBkaXYncyBkb24ndCB3b3JrLCBzbyBpbnN0ZWFkIHVzZSBuZXN0ZWQKICAgICAgIC8vIGFic29sdXRlbHkgcG9zaXRpb25lZCBkaXYncy4KCiAgICAgICB2YXIgc3AgPSB0aGlzLmNyZWF0ZV9lbGVtZW50KCJzcGFuIik7CiAgICAgICBzcC5pbm5lckhUTUwgPSAiJm5ic3A7Jm5ic3A7KiZuYnNwOyI7CiAgICAgICB0aGlzLnRvb2xiYXIuYXBwZW5kQ2hpbGQoc3ApOwogICAgICAgdGhpcy5lb3MgPSBzcDsgIC8vIGVuZCBvZiBzbGlkZSBpbmRpY2F0b3IKCiAgICAgICB2YXIgaGVscCA9IHRoaXMuY3JlYXRlX2VsZW1lbnQoImEiKTsKICAgICAgIGhlbHAuc2V0QXR0cmlidXRlKCJocmVmIiwgdGhpcy5oZWxwX3BhZ2UpOwogICAgICAgaGVscC5zZXRBdHRyaWJ1dGUoInRpdGxlIiwgdGhpcy5sb2NhbGl6ZSh0aGlzLmhlbHBfdGV4dCkpOwogICAgICAgaGVscC5pbm5lckhUTUwgPSB0aGlzLmxvY2FsaXplKCJoZWxwPyIpOwogICAgICAgdGhpcy50b29sYmFyLmFwcGVuZENoaWxkKGhlbHApOwogICAgICAgdGhpcy5oZWxwX2FuY2hvciA9IGhlbHA7ICAvLyBzYXZlIGZvciBmb2N1cyBoYWNrCgogICAgICAgdmFyIGdhcDEgPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSgiICIpOwogICAgICAgdGhpcy50b29sYmFyLmFwcGVuZENoaWxkKGdhcDEpOwoKICAgICAgIHZhciBjb250ZW50cyA9IHRoaXMuY3JlYXRlX2VsZW1lbnQoImEiKTsKICAgICAgIGNvbnRlbnRzLnNldEF0dHJpYnV0ZSgiaHJlZiIsICJqYXZhc2NyaXB0OnRvZ2dsZVRhYmxlT2ZDb250ZW50cygpIik7CiAgICAgICBjb250ZW50cy5zZXRBdHRyaWJ1dGUoInRpdGxlIiwgdGhpcy5sb2NhbGl6ZSgidGFibGUgb2YgY29udGVudHMiLmxvY2FsaXplKSk7CiAgICAgICBjb250ZW50cy5pbm5lckhUTUwgPSB0aGlzLmxvY2FsaXplKCJjb250ZW50cz8iKTsKICAgICAgIHRoaXMudG9vbGJhci5hcHBlbmRDaGlsZChjb250ZW50cyk7CgogICAgICAgdmFyIGdhcDIgPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSgiICIpOwogICAgICAgdGhpcy50b29sYmFyLmFwcGVuZENoaWxkKGdhcDIpOwoKICAgICAgIHZhciBjb3B5cmlnaHQgPSB0aGlzLmZpbmRfY29weXJpZ2h0KCk7CgogICAgICAgaWYgKGNvcHlyaWdodCkKICAgICAgIHsKICAgICAgICAgdmFyIHNwYW4gPSB0aGlzLmNyZWF0ZV9lbGVtZW50KCJzcGFuIik7CiAgICAgICAgIHNwYW4uaW5uZXJIVE1MID0gY29weXJpZ2h0OwogICAgICAgICBzcGFuLnN0eWxlLmNvbG9yID0gImJsYWNrIjsKICAgICAgICAgc3Bhbi5zdHlsZS5tYXJnaW5MZWZ0ID0gIjAuNWVtIjsKICAgICAgICAgdGhpcy50b29sYmFyLmFwcGVuZENoaWxkKHNwYW4pOwogICAgICAgfQoKICAgICAgIGNvdW50ZXIgPSB0aGlzLmNyZWF0ZV9lbGVtZW50KCJkaXYiKQogICAgICAgY291bnRlci5zdHlsZS5wb3NpdGlvbiA9ICJhYnNvbHV0ZSI7CiAgICAgICBjb3VudGVyLnN0eWxlLndpZHRoID0gImF1dG8iOyAvLyIyMCUiOwogICAgICAgY291bnRlci5zdHlsZS5oZWlnaHQgPSAiMS4yZW0iOwogICAgICAgY291bnRlci5zdHlsZS50b3AgPSAiYXV0byI7CiAgICAgICBjb3VudGVyLnN0eWxlLmJvdHRvbSA9IDA7CiAgICAgICBjb3VudGVyLnN0eWxlLnJpZ2h0ID0gIjAiOwogICAgICAgY291bnRlci5zdHlsZS50ZXh0QWxpZ24gPSAicmlnaHQiOwogICAgICAgY291bnRlci5zdHlsZS5jb2xvciA9ICJyZWQiOwogICAgICAgY291bnRlci5zdHlsZS5iYWNrZ3JvdW5kID0gInJnYigyNDAsMjQwLDI0MCkiOwoKICAgICAgIGNvdW50ZXIuaW5uZXJIVE1MID0gdGhpcy5sb2NhbGl6ZSgic2xpZGUiKSArICIgbi9tIjsKICAgICAgIHRoaXMudG9vbGJhci5hcHBlbmRDaGlsZChjb3VudGVyKTsKICAgICB9CgogICAgIC8vIGVuc3VyZSB0aGF0IGNsaWNrIGlzbid0IHBhc3NlZCB0aHJvdWdoIHRvIHRoZSBwYWdlCiAgICAgdGhpcy50b29sYmFyLm9uY2xpY2sgPQogICAgICAgICBmdW5jdGlvbiAoZSkgewogICAgICAgICAgIGlmICghZSkKICAgICAgICAgICAgIGUgPSB3aW5kb3cuZXZlbnQ7CgogICAgICAgICAgIHZhciB0YXJnZXQgPSBlLnRhcmdldDsKCiAgICAgICAgICAgaWYgKCF0YXJnZXQgJiYgZS5zcmNFbGVtZW50KQogICAgICAgICAgICAgdGFyZ2V0ID0gZS5zcmNFbGVtZW50OwoKICAgICAgICAgICAvLyB3b3JrIGFyb3VuZCBTYWZhcmkgYnVnCiAgICAgICAgICAgaWYgKHRhcmdldCAmJiB0YXJnZXQubm9kZVR5cGUgPT0gMykKICAgICAgICAgICAgIHRhcmdldCA9IHRhcmdldC5wYXJlbnROb2RlOwoKICAgICAgICAgICB3M2Nfc2xpZHkuc3RvcF9wcm9wYWdhdGlvbihlKTsKCiAgICAgICAgICAgaWYgKHRhcmdldCAmJiB0YXJnZXQubm9kZU5hbWUudG9Mb3dlckNhc2UoKSAhPSAiYSIpCiAgICAgICAgICAgICB3M2Nfc2xpZHkubW91c2VfYnV0dG9uX2NsaWNrKGUpOwogICAgICAgICB9OwoKICAgICB0aGlzLnNsaWRlX251bWJlcl9lbGVtZW50ID0gY291bnRlcjsKICAgICB0aGlzLnNldF9lb3Nfc3RhdHVzKGZhbHNlKTsKICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHRoaXMudG9vbGJhcik7CiAgfSwKCiAgLy8gd3lzaXd5ZyBlZGl0b3JzIG1ha2UgaXQgaGFyZCB0byB1c2UgZGl2IGVsZW1lbnRzCiAgLy8gZS5nLiBhbWF5YSBsb3NlcyB0aGUgZGl2IHdoZW4geW91IGNvcHkgYW5kIHBhc3RlCiAgLy8gdGhpcyBmdW5jdGlvbiB3cmFwcyBkaXYgZWxlbWVudHMgYXJvdW5kIGltcGxpY2l0CiAgLy8gc2xpZGVzIHdoaWNoIHN0YXJ0IHdpdGggYW4gaDEgZWxlbWVudCBhbmQgY29udGludWUKICAvLyB1cCB0byB0aGUgbmV4dCBoZWFkaW5nIG9yIGRpdiBlbGVtZW50CiAgd3JhcF9pbXBsaWNpdF9zbGlkZXM6IGZ1bmN0aW9uICgpIHsKICAgIHZhciBpLCBoZWFkaW5nLCBub2RlLCBuZXh0LCBkaXY7CiAgICB2YXIgaGVhZGluZ3MgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgiaDEiKTsKCiAgICBpZiAoIWhlYWRpbmdzKQogICAgICByZXR1cm47CgogICAgZm9yIChpID0gMDsgaSA8IGhlYWRpbmdzLmxlbmd0aDsgKytpKQogICAgewogICAgICBoZWFkaW5nID0gaGVhZGluZ3NbaV07CgogICAgICBpZiAoaGVhZGluZy5wYXJlbnROb2RlICE9IGRvY3VtZW50LmJvZHkpCiAgICAgICAgY29udGludWU7CgogICAgICBub2RlID0gaGVhZGluZy5uZXh0U2libGluZzsKCiAgICAgIGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpOwogICAgICB0aGlzLmFkZF9jbGFzcyhkaXYsICJzbGlkZSIpOwogICAgICBkb2N1bWVudC5ib2R5LnJlcGxhY2VDaGlsZChkaXYsIGhlYWRpbmcpOwogICAgICBkaXYuYXBwZW5kQ2hpbGQoaGVhZGluZyk7CgogICAgICB3aGlsZSAobm9kZSkKICAgICAgewogICAgICAgIGlmIChub2RlLm5vZGVUeXBlID09IDEpIC8vIGFuIGVsZW1lbnQKICAgICAgICB7CiAgICAgICAgICAgaWYgKG5vZGUubm9kZU5hbWUgPT0gIkgxIiB8fCBub2RlLm5vZGVOYW1lID09ICJoMSIpCiAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgaWYgKG5vZGUubm9kZU5hbWUgPT0gIkRJViIgfHwgbm9kZS5ub2RlTmFtZSA9PSAiZGl2IikKICAgICAgICAgICB7CiAgICAgICAgICAgICBpZiAodGhpcy5oYXNfY2xhc3Mobm9kZSwgInNsaWRlIikpCiAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgIGlmICh0aGlzLmhhc19jbGFzcyhub2RlLCAiaGFuZG91dCIpKQogICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBuZXh0ID0gbm9kZS5uZXh0U2libGluZzsKICAgICAgICBub2RlID0gZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChub2RlKTsKICAgICAgICBkaXYuYXBwZW5kQ2hpbGQobm9kZSk7CiAgICAgICAgbm9kZSA9IG5leHQ7CiAgICAgIH0gCiAgICB9CiAgfSwKCiAgYXR0YWNoX3RvdWNoX2hhbmRlcnM6IGZ1bmN0aW9uKHNsaWRlcykKICB7CiAgICB2YXIgaSwgc2xpZGU7CgogICAgZm9yIChpID0gMDsgaSA8IHNsaWRlcy5sZW5ndGg7ICsraSkKICAgIHsKICAgICAgc2xpZGUgPSBzbGlkZXNbaV07CiAgICAgIHRoaXMuYWRkX2xpc3RlbmVyKHNsaWRlLCAidG91Y2hzdGFydCIsIHRoaXMudG91Y2hzdGFydCk7CiAgICAgIHRoaXMuYWRkX2xpc3RlbmVyKHNsaWRlLCAidG91Y2htb3ZlIiwgdGhpcy50b3VjaG1vdmUpOwogICAgICB0aGlzLmFkZF9saXN0ZW5lcihzbGlkZSwgInRvdWNoZW5kIiwgdGhpcy50b3VjaGVuZCk7CiAgICB9CiAgfSwKCi8vIHJldHVybiBuZXcgYXJyYXkgb2YgYWxsIHNsaWRlcwogIGNvbGxlY3Rfc2xpZGVzOiBmdW5jdGlvbiAoKSB7CiAgICB2YXIgc2xpZGVzID0gbmV3IEFycmF5KCk7CiAgICB2YXIgZGl2cyA9IGRvY3VtZW50LmJvZHkuZ2V0RWxlbWVudHNCeVRhZ05hbWUoImRpdiIpOwoKICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZGl2cy5sZW5ndGg7ICsraSkKICAgIHsKICAgICAgZGl2ID0gZGl2cy5pdGVtKGkpOwoKICAgICAgaWYgKHRoaXMuaGFzX2NsYXNzKGRpdiwgInNsaWRlIikpCiAgICAgIHsKICAgICAgICAvLyBhZGQgc2xpZGUgdG8gY29sbGVjdGlvbgogICAgICAgIHNsaWRlc1tzbGlkZXMubGVuZ3RoXSA9IGRpdjsKCiAgICAgICAgLy8gaGlkZSBlYWNoIHNsaWRlIGFzIGl0IGlzIGZvdW5kCiAgICAgICAgdGhpcy5hZGRfY2xhc3MoZGl2LCAiaGlkZGVuIik7CgogICAgICAgIC8vIGFkZCBkdW1teSA8YnIvPiBhdCBlbmQgZm9yIHNjcm9sbGluZyBoYWNrCiAgICAgICAgdmFyIG5vZGUxID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiYnIiKTsKICAgICAgICBkaXYuYXBwZW5kQ2hpbGQobm9kZTEpOwogICAgICAgIHZhciBub2RlMiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImJyIik7CiAgICAgICAgZGl2LmFwcGVuZENoaWxkKG5vZGUyKTsKICAgICAgfQogICAgICBlbHNlIGlmICh0aGlzLmhhc19jbGFzcyhkaXYsICJiYWNrZ3JvdW5kIikpCiAgICAgIHsgIC8vIHdvcmsgYXJvdW5kIGZvciBGaXJlZm94IFNWRyByZWxvYWQgYnVnCiAgICAgICAgLy8gd2hpY2ggb3RoZXJ3aXNlIHJlcGxhY2VzIDFzdCBTVkcgZ3JhcGhpYyB3aXRoIDJuZAogICAgICAgIGRpdi5zdHlsZS5kaXNwbGF5ID0gImJsb2NrIjsKICAgICAgfQogICAgfQoKICAgIHRoaXMuc2xpZGVzID0gc2xpZGVzOwogIH0sCgogIC8vIHJldHVybiBuZXcgYXJyYXkgb2YgYWxsIDxkaXYgY2xhc3M9ImhhbmRvdXQiPgogIGNvbGxlY3Rfbm90ZXM6IGZ1bmN0aW9uICgpIHsKICAgIHZhciBub3RlcyA9IG5ldyBBcnJheSgpOwogICAgdmFyIGRpdnMgPSBkb2N1bWVudC5ib2R5LmdldEVsZW1lbnRzQnlUYWdOYW1lKCJkaXYiKTsKCiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGRpdnMubGVuZ3RoOyArK2kpCiAgICB7CiAgICAgIGRpdiA9IGRpdnMuaXRlbShpKTsKCiAgICAgIGlmICh0aGlzLmhhc19jbGFzcyhkaXYsICJoYW5kb3V0IikpCiAgICAgIHsKICAgICAgICAvLyBhZGQgbm90ZSB0byBjb2xsZWN0aW9uCiAgICAgICAgbm90ZXNbbm90ZXMubGVuZ3RoXSA9IGRpdjsKCiAgICAgICAgLy8gYW5kIGhpZGUgaXQKICAgICAgICB0aGlzLmFkZF9jbGFzcyhkaXYsICJoaWRkZW4iKTsKICAgICAgfQogICAgfQoKICAgIHRoaXMubm90ZXMgPSBub3RlczsKICB9LAoKICAvLyByZXR1cm4gbmV3IGFycmF5IG9mIGFsbCA8ZGl2IGNsYXNzPSJiYWNrZ3JvdW5kIj4KICAvLyBpbmNsdWRpbmcgbmFtZWQgYmFja2dyb3VuZHMgZS5nLiBjbGFzcz0iYmFja2dyb3VuZCB0aXRsZXBhZ2UiCiAgY29sbGVjdF9iYWNrZ3JvdW5kczogZnVuY3Rpb24gKCkgewogICAgdmFyIGJhY2tncm91bmRzID0gbmV3IEFycmF5KCk7CiAgICB2YXIgZGl2cyA9IGRvY3VtZW50LmJvZHkuZ2V0RWxlbWVudHNCeVRhZ05hbWUoImRpdiIpOwoKICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZGl2cy5sZW5ndGg7ICsraSkKICAgIHsKICAgICAgZGl2ID0gZGl2cy5pdGVtKGkpOwoKICAgICAgaWYgKHRoaXMuaGFzX2NsYXNzKGRpdiwgImJhY2tncm91bmQiKSkKICAgICAgewogICAgICAgIC8vIGFkZCBiYWNrZ3JvdW5kIHRvIGNvbGxlY3Rpb24KICAgICAgICBiYWNrZ3JvdW5kc1tiYWNrZ3JvdW5kcy5sZW5ndGhdID0gZGl2OwoKICAgICAgICAvLyBhbmQgaGlkZSBpdAogICAgICAgIHRoaXMuYWRkX2NsYXNzKGRpdiwgImhpZGRlbiIpOwogICAgICB9CiAgICB9CgogICAgdGhpcy5iYWNrZ3JvdW5kcyA9IGJhY2tncm91bmRzOwogIH0sCgogIC8vIHNldCBjbGljayBoYW5kbGVycyBvbiBhbGwgYW5jaG9ycwogIHBhdGNoX2FuY2hvcnM6IGZ1bmN0aW9uICgpIHsKICAgIHZhciBzZWxmID0gdzNjX3NsaWR5OwogICAgdmFyIGhhbmRsZXIgPSBmdW5jdGlvbiAoZXZlbnQpIHsKICAgICAgLy8gY29tcGFyZSB0aGlzLmhyZWYgd2l0aCBsb2NhdGlvbi5ocmVmCiAgICAgIC8vIGZvciBsaW5rIHRvIGFub3RoZXIgc2xpZGUgaW4gdGhpcyBkb2MKCiAgICAgIGlmIChzZWxmLnBhZ2VfYWRkcmVzcyh0aGlzLmhyZWYpID09IHNlbGYucGFnZV9hZGRyZXNzKGxvY2F0aW9uLmhyZWYpKQogICAgICB7CiAgICAgICAgLy8geWVzLCBzbyBmaW5kIG5ldyBzbGlkZSBudW1iZXIKICAgICAgICB2YXIgbmV3c2xpZGVudW0gPSBzZWxmLmZpbmRfc2xpZGVfbnVtYmVyKHRoaXMuaHJlZik7CgogICAgICAgIGlmIChuZXdzbGlkZW51bSAhPSBzZWxmLnNsaWRlX251bWJlcikKICAgICAgICB7CiAgICAgICAgICB2YXIgc2xpZGUgPSBzZWxmLnNsaWRlc1tzZWxmLnNsaWRlX251bWJlcl07CiAgICAgICAgICBzZWxmLmhpZGVfc2xpZGUoc2xpZGUpOwogICAgICAgICAgc2VsZi5zbGlkZV9udW1iZXIgPSBuZXdzbGlkZW51bTsKICAgICAgICAgIHNsaWRlID0gc2VsZi5zbGlkZXNbc2VsZi5zbGlkZV9udW1iZXJdOwogICAgICAgICAgc2VsZi5zaG93X3NsaWRlKHNsaWRlKTsKICAgICAgICAgIHNlbGYuc2V0X2xvY2F0aW9uKCk7CiAgICAgICAgfQogICAgICB9CiAgICAgIGVsc2UKICAgICAgICB3M2Nfc2xpZHkuc3RvcF9wcm9wYWdhdGlvbihldmVudCk7CgovLyAgICAgIGVsc2UgaWYgKHRoaXMudGFyZ2V0ID09IG51bGwpCi8vICAgICAgICBsb2NhdGlvbi5ocmVmID0gdGhpcy5ocmVmOwoKICAgICAgdGhpcy5ibHVyKCk7CiAgICAgIHNlbGYuZGlzYWJsZV9zbGlkZV9jbGljayA9IHRydWU7CiAgICB9OwoKICAgIHZhciBhbmNob3JzID0gZG9jdW1lbnQuYm9keS5nZXRFbGVtZW50c0J5VGFnTmFtZSgiYSIpOwoKICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYW5jaG9ycy5sZW5ndGg7ICsraSkKICAgIHsKICAgICAgaWYgKHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKQogICAgICAgIGFuY2hvcnNbaV0uYWRkRXZlbnRMaXN0ZW5lcigiY2xpY2siLCBoYW5kbGVyLCBmYWxzZSk7CiAgICAgIGVsc2UKICAgICAgICBhbmNob3JzW2ldLmF0dGFjaEV2ZW50KCJvbmNsaWNrIiwgaGFuZGxlcik7CiAgICB9CiAgfSwKCiAgLy8gIyMjIENIRUNLIE1FICMjIyBzZWUgd2hpY2ggZnVuY3Rpb25zIGFyZSBpbnZva2VkIHZpYSBzZXRUaW1lb3V0CiAgLy8gZWl0aGVyIGRpcmVjdGx5IG9yIGluZGlyZWN0bHkgZm9yIHVzZSBvZiB3M2Nfc2xpZHkgdnMgdGhpcwogIHNob3dfc2xpZGVfbnVtYmVyOiBmdW5jdGlvbiAoKSB7CiAgICB2YXIgdGltZXIgPSB3M2Nfc2xpZHkuZ2V0X3RpbWVyKCk7CiAgICB3M2Nfc2xpZHkuc2xpZGVfbnVtYmVyX2VsZW1lbnQuaW5uZXJIVE1MID0gdGltZXIgKyB3M2Nfc2xpZHkubG9jYWxpemUoInNsaWRlIikgKyAiICIgKwogICAgICAgICAgICh3M2Nfc2xpZHkuc2xpZGVfbnVtYmVyICsgMSkgKyAiLyIgKyB3M2Nfc2xpZHkuc2xpZGVzLmxlbmd0aDsKICB9LAoKICAvLyBldmVyeSAyMDBtUyBjaGVjayBpZiB0aGUgbG9jYXRpb24gaGFzIGJlZW4gY2hhbmdlZCBhcyBhCiAgLy8gcmVzdWx0IG9mIHRoZSB1c2VyIGFjdGl2YXRpbmcgdGhlIEJhY2sgYnV0dG9uL21lbnUgaXRlbQogIC8vIGRvZXNuJ3Qgd29yayBmb3IgT3BlcmEgPCA5LjUKICBjaGVja19sb2NhdGlvbjogZnVuY3Rpb24gKCkgewogICAgdmFyIGhhc2ggPSBsb2NhdGlvbi5oYXNoOwoKICAgIGlmICh3M2Nfc2xpZHkuc2xpZGVfbnVtYmVyID4gMCAmJiAoaGFzaCA9PSAiIiB8fCBoYXNoID09ICIjIikpCiAgICAgIHczY19zbGlkeS5nb3RvX3NsaWRlKDApOwogICAgZWxzZSBpZiAoaGFzaC5sZW5ndGggPiAyICYmIGhhc2ggIT0gIiMoIisodzNjX3NsaWR5LnNsaWRlX251bWJlcisxKSsiKSIpCiAgICB7CiAgICAgIHZhciBudW0gPSBwYXJzZUludChsb2NhdGlvbi5oYXNoLnN1YnN0cigyKSk7CgogICAgICBpZiAoIWlzTmFOKG51bSkpCiAgICAgICAgdzNjX3NsaWR5LmdvdG9fc2xpZGUobnVtLTEpOwogICAgfQoKICAgIGlmICh3M2Nfc2xpZHkudGltZV9sZWZ0ICYmIHczY19zbGlkeS5zbGlkZV9udW1iZXIgPiAwKQogICAgewogICAgICB3M2Nfc2xpZHkuc2hvd19zbGlkZV9udW1iZXIoKTsKCiAgICAgIGlmICh3M2Nfc2xpZHkudGltZV9sZWZ0ID4gMCkKICAgICAgICB3M2Nfc2xpZHkudGltZV9sZWZ0IC09IDIwMDsKICAgIH0gCiAgfSwKCiAgZ2V0X3RpbWVyOiBmdW5jdGlvbiAoKSB7CiAgICB2YXIgdGltZXIgPSAiIjsKICAgIGlmICh3M2Nfc2xpZHkudGltZV9sZWZ0KQogICAgewogICAgICB2YXIgbWlucywgc2VjczsKICAgICAgc2VjcyA9IE1hdGguZmxvb3IodzNjX3NsaWR5LnRpbWVfbGVmdC8xMDAwKTsKICAgICAgbWlucyA9IE1hdGguZmxvb3Ioc2VjcyAvIDYwKTsKICAgICAgc2VjcyA9IHNlY3MgJSA2MDsKICAgICAgdGltZXIgPSAobWlucyA/IG1pbnMrIm0iIDogIiIpICsgc2VjcyArICJzICI7CiAgICB9CgogICAgcmV0dXJuIHRpbWVyOwogIH0sCgogIC8vIHRoaXMgZG9lc24ndCBwdXNoIGxvY2F0aW9uIG9udG8gaGlzdG9yeSBzdGFjayBmb3IgSUUKICAvLyBmb3Igd2hpY2ggYSBoaWRkZW4gaWZyYW1lIGhhY2sgaXMgbmVlZGVkOiBsb2FkIHBhZ2UgaW50bwogIC8vIHRoZSBpZnJhbWUgd2l0aCBzY3JpcHQgdGhhdCBzZXQncyBwYXJlbnQncyBsb2NhdGlvbi5oYXNoCiAgLy8gYnV0IHRoYXQgd29uJ3Qgd29yayBmb3Igc3RhbmRhbG9uZSB1c2UgdW5sZXNzIHdlIGNhbgogIC8vIGNyZWF0ZSB0aGUgcGFnZSBkeW5hbWljYWxseSB2aWEgYSBqYXZhc2NyaXB0OiBVUkwKICAvLyAjIyMgdXNlIGhpc3RvcnkucHVzaFN0YXRlIGlmIGF2YWlsYWJsZQogIHNldF9sb2NhdGlvbjogZnVuY3Rpb24gKCkgewogICAgIHZhciB1cmkgPSB3M2Nfc2xpZHkucGFnZV9hZGRyZXNzKGxvY2F0aW9uLmhyZWYpOwogICAgIHZhciBoYXNoID0gIiMoIiArICh3M2Nfc2xpZHkuc2xpZGVfbnVtYmVyKzEpICsgIikiOwoKICAgICBpZiAodzNjX3NsaWR5LnNsaWRlX251bWJlciA+PSAwKQogICAgICAgdXJpID0gdXJpICsgaGFzaDsKCiAgICAgaWYgKHR5cGVvZihoaXN0b3J5LnB1c2hTdGF0ZSkgIT0gInVuZGVmaW5lZCIgJiYgbG9jYXRpb24ucHJvdG9jb2wgIT09ICJmaWxlOiIpCiAgICAgewogICAgICAgZG9jdW1lbnQudGl0bGUgPSB3M2Nfc2xpZHkudGl0bGUgKyAiICgiICsgKHczY19zbGlkeS5zbGlkZV9udW1iZXIrMSkgKyAiKSI7CiAgICAgICBoaXN0b3J5LnB1c2hTdGF0ZSgwLCBkb2N1bWVudC50aXRsZSwgaGFzaCk7CiAgICAgICB3M2Nfc2xpZHkuc2hvd19zbGlkZV9udW1iZXIoKTsKICAgICAgIHczY19zbGlkeS5ub3RpZnlfb2JzZXJ2ZXJzKCk7CiAgICAgICByZXR1cm47CiAgICAgfQoKICAgICBpZiAodzNjX3NsaWR5LmllICYmICh3M2Nfc2xpZHkuaWU2IHx8IHczY19zbGlkeS5pZTcpKQogICAgICAgdzNjX3NsaWR5LnB1c2hfaGFzaChoYXNoKTsKCiAgICAgaWYgKHVyaSAhPSBsb2NhdGlvbi5ocmVmKSAvLyAmJiAha2h0bWwKICAgICAgICBsb2NhdGlvbi5ocmVmID0gdXJpOwoKICAgICBpZiAodGhpcy5raHRtbCkKICAgICAgICBoYXNoID0gIigiICsgKHczY19zbGlkeS5zbGlkZV9udW1iZXIrMSkgKyAiKSI7CgogICAgIGlmICghdGhpcy5pZSAmJiBsb2NhdGlvbi5oYXNoICE9IGhhc2ggJiYgbG9jYXRpb24uaGFzaCAhPSAiIikKICAgICAgIGxvY2F0aW9uLmhhc2ggPSBoYXNoOwoKICAgICBkb2N1bWVudC50aXRsZSA9IHczY19zbGlkeS50aXRsZSArICIgKCIgKyAodzNjX3NsaWR5LnNsaWRlX251bWJlcisxKSArICIpIjsKICAgICB3M2Nfc2xpZHkuc2hvd19zbGlkZV9udW1iZXIoKTsKICAgICB3M2Nfc2xpZHkubm90aWZ5X29ic2VydmVycygpOwogIH0sCgogIG5vdGlmeV9vYnNlcnZlcnM6IGZ1bmN0aW9uICgpCiAgewogICAgdmFyIHNsaWRlID0gdGhpcy5zbGlkZXNbdGhpcy5zbGlkZV9udW1iZXJdOwoKICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5vYnNlcnZlcnMubGVuZ3RoOyArK2kpCiAgICAgIHRoaXMub2JzZXJ2ZXJzW2ldKHRoaXMuc2xpZGVfbnVtYmVyKzEsIHRoaXMuZmluZF9oZWFkaW5nKHNsaWRlKS5pbm5lclRleHQsIGxvY2F0aW9uLmhyZWYpOwogIH0sCgogIGFkZF9vYnNlcnZlcjogZnVuY3Rpb24gKG9ic2VydmVyKQogIHsKICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5vYnNlcnZlcnMubGVuZ3RoOyArK2kpCiAgICB7CiAgICAgIGlmIChvYnNlcnZlciA9PSB0aGlzLm9ic2VydmVyc1tpXSkKICAgICAgICByZXR1cm47CiAgICB9CgogICAgdGhpcy5vYnNlcnZlcnMucHVzaChvYnNlcnZlcik7CiAgfSwKCiAgcmVtb3ZlX29ic2VydmVyOiBmdW5jdGlvbiAobykKICB7CiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMub2JzZXJ2ZXJzLmxlbmd0aDsgKytpKQogICAgewogICAgICBpZiAob2JzZXJ2ZXIgPT0gdGhpcy5vYnNlcnZlcnNbaV0pCiAgICAgIHsKICAgICAgICB0aGlzLm9ic2VydmVycy5zcGxpY2UoaSwxKTsKICAgICAgICBicmVhazsKICAgICAgfQogICAgfQogIH0sCgogIHBhZ2VfYWRkcmVzczogZnVuY3Rpb24gKHVyaSkgewogICAgdmFyIGkgPSB1cmkuaW5kZXhPZigiIyIpOwoKICAgIGlmIChpIDwgMCkKICAgICAgaSA9IHVyaS5pbmRleE9mKCIlMjMiKTsKCiAgICAvLyBjaGVjayBpZiBhbmNob3IgaXMgZW50aXJlIHBhZ2UKCiAgICBpZiAoaSA8IDApCiAgICAgIHJldHVybiB1cmk7ICAvLyB5ZXMKCiAgICByZXR1cm4gdXJpLnN1YnN0cigwLCBpKTsKICB9LAoKICAvLyBvbmx5IHVzZWQgZm9yIElFNiBhbmQgSUU3CiAgb25fZnJhbWVfbG9hZGVkOiBmdW5jdGlvbiAoaGFzaCkgewogICAgbG9jYXRpb24uaGFzaCA9IGhhc2g7CiAgICB2YXIgdXJpID0gdzNjX3NsaWR5LnBhZ2VfYWRkcmVzcyhsb2NhdGlvbi5ocmVmKTsKICAgIGxvY2F0aW9uLmhyZWYgPSB1cmkgKyBoYXNoOwogIH0sCgogIC8vIGhpc3RvcnkgaGFjayB3aXRoIHRoYW5rcyB0byBCZXJ0cmFuZCBMZSBSb3kKICBwdXNoX2hhc2g6IGZ1bmN0aW9uIChoYXNoKSB7CiAgICBpZiAoaGFzaCA9PSAiIikgaGFzaCA9ICIjKDEpIjsKICAgICAgd2luZG93LmxvY2F0aW9uLmhhc2ggPSBoYXNoOwoKICAgIHZhciBkb2MgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiaGlzdG9yeUZyYW1lIikuY29udGVudFdpbmRvdy5kb2N1bWVudDsKICAgIGRvYy5vcGVuKCJqYXZhc2NyaXB0Oic8aHRtbD48L2h0bWw+JyIpOwogICAgZG9jLndyaXRlKCI8aHRtbD48aGVhZD48c2NyaXB0IHR5cGU9XCJ0ZXh0L2phdmFzY3JpcHRcIj53aW5kb3cucGFyZW50LnczY19zbGlkeS5vbl9mcmFtZV9sb2FkZWQoJyIrCiAgICAgIChoYXNoKSArICInKTs8L3NjcmlwdD48L2hlYWQ+PGJvZHk+aGVsbG8gbXVtPC9ib2R5PjwvaHRtbD4iKTsKICAgICAgZG9jLmNsb3NlKCk7CiAgfSwKCiAgLy8gZmluZCBjdXJyZW50IHNsaWRlIGJhc2VkIHVwb24gbG9jYXRpb24KICAvLyBmaXJzdCBmaW5kIHRhcmdldCBhbmNob3IgYW5kIHRoZW4gbG9vawogIC8vIGZvciBhc3NvY2lhdGVkIGRpdiBlbGVtZW50IGVuY2xvc2luZyBpdAogIC8vIGZpbmFsbHkgbWFwIHRoYXQgdG8gc2xpZGUgbnVtYmVyCiAgZmluZF9zbGlkZV9udW1iZXI6IGZ1bmN0aW9uICh1cmkpIHsKICAgIC8vIGZpcnN0IGdldCBhbmNob3IgZnJvbSBwYWdlIGxvY2F0aW9uCgogICAgdmFyIGkgPSB1cmkuaW5kZXhPZigiIyIpOwoKICAgIC8vIGNoZWNrIGlmIGFuY2hvciBpcyBlbnRpcmUgcGFnZQogICAgaWYgKGkgPCAwKQogICAgICByZXR1cm4gMDsgIC8vIHllcwoKICAgIHZhciBhbmNob3IgPSB1bmVzY2FwZSh1cmkuc3Vic3RyKGkrMSkpOwoKICAgIC8vIG5vdyB1c2UgYW5jaG9yIGFzIFhNTCBJRCB0byBmaW5kIHRhcmdldAogICAgdmFyIHRhcmdldCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGFuY2hvcik7CgogICAgaWYgKCF0YXJnZXQpCiAgICB7CiAgICAgIC8vIGRvZXMgYW5jaG9yIGxvb2sgbGlrZSAiKDIpIiBmb3Igc2xpZGUgMiA/PwogICAgICAvLyB3aGVyZSBmaXJzdCBzbGlkZSBpcyAoMSkKICAgICAgdmFyIHJlID0gL1woKFxkKStcKS87CgogICAgICBpZiAoYW5jaG9yLm1hdGNoKHJlKSkKICAgICAgewogICAgICAgIHZhciBudW0gPSBwYXJzZUludChhbmNob3Iuc3Vic3RyaW5nKDEsIGFuY2hvci5sZW5ndGgtMSkpOwoKICAgICAgICBpZiAobnVtID4gdGhpcy5zbGlkZXMubGVuZ3RoKQogICAgICAgICAgbnVtID0gMTsKCiAgICAgICAgaWYgKC0tbnVtIDwgMCkKICAgICAgICAgIG51bSA9IDA7CgogICAgICAgIHJldHVybiBudW07CiAgICAgIH0KCiAgICAgIC8vIGFjY2VwdCBbMl0gZm9yIGJhY2t3YXJkcyBjb21wYXRpYmlsaXR5CiAgICAgIHJlID0gL1xbKFxkKStcXS87CgogICAgICBpZiAoYW5jaG9yLm1hdGNoKHJlKSkKICAgICAgewogICAgICAgICB2YXIgbnVtID0gcGFyc2VJbnQoYW5jaG9yLnN1YnN0cmluZygxLCBhbmNob3IubGVuZ3RoLTEpKTsKCiAgICAgICAgIGlmIChudW0gPiB0aGlzLnNsaWRlcy5sZW5ndGgpCiAgICAgICAgICAgIG51bSA9IDE7CgogICAgICAgICBpZiAoLS1udW0gPCAwKQogICAgICAgICAgICBudW0gPSAwOwoKICAgICAgICAgcmV0dXJuIG51bTsKICAgICAgfQoKICAgICAgLy8gb2ggZGVhciB1bmtub3duIGFuY2hvcgogICAgICByZXR1cm4gMDsKICAgIH0KCiAgICAvLyBzZWFyY2ggZm9yIGVuY2xvc2luZyBzbGlkZQoKICAgIHdoaWxlICh0cnVlKQogICAgewogICAgICAvLyBicm93c2VyIGNvZXJjZXMgaHRtbCBlbGVtZW50cyB0byB1cHBlcmNhc2UhCiAgICAgIGlmICh0YXJnZXQubm9kZU5hbWUudG9Mb3dlckNhc2UoKSA9PSAiZGl2IiAmJgogICAgICAgICAgICB0aGlzLmhhc19jbGFzcyh0YXJnZXQsICJzbGlkZSIpKQogICAgICB7CiAgICAgICAgLy8gZm91bmQgdGhlIHNsaWRlIGVsZW1lbnQKICAgICAgICBicmVhazsKICAgICAgfQoKICAgICAgLy8gb3RoZXJ3aXNlIHRyeSBwYXJlbnQgZWxlbWVudCBpZiBhbnkKCiAgICAgIHRhcmdldCA9IHRhcmdldC5wYXJlbnROb2RlOwoKICAgICAgaWYgKCF0YXJnZXQpCiAgICAgIHsKICAgICAgICByZXR1cm4gMDsgICAvLyBubyBsdWNrIQogICAgICB9CiAgICB9OwoKICAgIGZvciAoaSA9IDA7IGkgPCBzbGlkZXMubGVuZ3RoOyArK2kpCiAgICB7CiAgICAgIGlmIChzbGlkZXNbaV0gPT0gdGFyZ2V0KQogICAgICAgIHJldHVybiBpOyAgLy8gc3VjY2VzcwogICAgfQoKICAgIC8vIG9oIGRlYXIgc3RpbGwgbm8gbHVjawogICAgcmV0dXJuIDA7CiAgfSwKCiAgcHJldmlvdXNfc2xpZGU6IGZ1bmN0aW9uIChpbmNyZW1lbnRhbCkgewogICAgaWYgKCF3M2Nfc2xpZHkudmlld19hbGwpCiAgICB7CiAgICAgIHZhciBzbGlkZTsKCiAgICAgIGlmICgoaW5jcmVtZW50YWwgfHwgdzNjX3NsaWR5LnNsaWRlX251bWJlciA9PSAwKSAmJiB3M2Nfc2xpZHkubGFzdF9zaG93biAhPSBudWxsKQogICAgICB7CiAgICAgICAgdzNjX3NsaWR5Lmxhc3Rfc2hvd24gPSB3M2Nfc2xpZHkuaGlkZV9wcmV2aW91c19pdGVtKHczY19zbGlkeS5sYXN0X3Nob3duKTsKICAgICAgICB3M2Nfc2xpZHkuc2V0X2Vvc19zdGF0dXMoZmFsc2UpOwogICAgICB9CiAgICAgIGVsc2UgaWYgKHczY19zbGlkeS5zbGlkZV9udW1iZXIgPiAwKQogICAgICB7CiAgICAgICAgc2xpZGUgPSB3M2Nfc2xpZHkuc2xpZGVzW3czY19zbGlkeS5zbGlkZV9udW1iZXJdOwogICAgICAgIHczY19zbGlkeS5oaWRlX3NsaWRlKHNsaWRlKTsKCiAgICAgICAgdzNjX3NsaWR5LnNsaWRlX251bWJlciA9IHczY19zbGlkeS5zbGlkZV9udW1iZXIgLSAxOwogICAgICAgIHNsaWRlID0gdzNjX3NsaWR5LnNsaWRlc1t3M2Nfc2xpZHkuc2xpZGVfbnVtYmVyXTsKICAgICAgICB3M2Nfc2xpZHkuc2V0X3Zpc2liaWxpdHlfYWxsX2luY3JlbWVudGFsKCJ2aXNpYmxlIik7CiAgICAgICAgdzNjX3NsaWR5Lmxhc3Rfc2hvd24gPSB3M2Nfc2xpZHkucHJldmlvdXNfaW5jcmVtZW50YWxfaXRlbShudWxsKTsKICAgICAgICB3M2Nfc2xpZHkuc2V0X2Vvc19zdGF0dXModHJ1ZSk7CiAgICAgICAgdzNjX3NsaWR5LnNob3dfc2xpZGUoc2xpZGUpOwogICAgICB9CgogICAgICB3M2Nfc2xpZHkuc2V0X2xvY2F0aW9uKCk7CgogICAgICBpZiAoIXczY19zbGlkeS5uc19wb3MpCiAgICAgICAgdzNjX3NsaWR5LnJlZnJlc2hfdG9vbGJhcigyMDApOwogICAgfQogIH0sCgogIG5leHRfc2xpZGU6IGZ1bmN0aW9uIChpbmNyZW1lbnRhbCkgewogICAgaWYgKCF3M2Nfc2xpZHkudmlld19hbGwpCiAgICB7CiAgICAgIHZhciBzbGlkZSwgbGFzdCA9IHczY19zbGlkeS5sYXN0X3Nob3duOwoKICAgICAgaWYgKGluY3JlbWVudGFsIHx8IHczY19zbGlkeS5zbGlkZV9udW1iZXIgPT0gdzNjX3NsaWR5LnNsaWRlcy5sZW5ndGggLSAxKQogICAgICAgICB3M2Nfc2xpZHkubGFzdF9zaG93biA9IHczY19zbGlkeS5yZXZlYWxfbmV4dF9pdGVtKHczY19zbGlkeS5sYXN0X3Nob3duKTsKCiAgICAgIGlmICgoIWluY3JlbWVudGFsIHx8IHczY19zbGlkeS5sYXN0X3Nob3duID09IG51bGwpICYmCiAgICAgICAgICAgICB3M2Nfc2xpZHkuc2xpZGVfbnVtYmVyIDwgdzNjX3NsaWR5LnNsaWRlcy5sZW5ndGggLSAxKQogICAgICB7CiAgICAgICAgIHNsaWRlID0gdzNjX3NsaWR5LnNsaWRlc1t3M2Nfc2xpZHkuc2xpZGVfbnVtYmVyXTsKICAgICAgICAgdzNjX3NsaWR5LmhpZGVfc2xpZGUoc2xpZGUpOwoKICAgICAgICAgdzNjX3NsaWR5LnNsaWRlX251bWJlciA9IHczY19zbGlkeS5zbGlkZV9udW1iZXIgKyAxOwogICAgICAgICBzbGlkZSA9IHczY19zbGlkeS5zbGlkZXNbdzNjX3NsaWR5LnNsaWRlX251bWJlcl07CiAgICAgICAgIHczY19zbGlkeS5sYXN0X3Nob3duID0gbnVsbDsKICAgICAgICAgdzNjX3NsaWR5LnNldF92aXNpYmlsaXR5X2FsbF9pbmNyZW1lbnRhbCgiaGlkZGVuIik7CiAgICAgICAgIHczY19zbGlkeS5zaG93X3NsaWRlKHNsaWRlKTsKICAgICAgfQogICAgICBlbHNlIGlmICghdzNjX3NsaWR5Lmxhc3Rfc2hvd24pCiAgICAgIHsKICAgICAgICAgaWYgKGxhc3QgJiYgaW5jcmVtZW50YWwpCiAgICAgICAgICAgdzNjX3NsaWR5Lmxhc3Rfc2hvd24gPSBsYXN0OwogICAgICB9CgogICAgICB3M2Nfc2xpZHkuc2V0X2xvY2F0aW9uKCk7CgogICAgICB3M2Nfc2xpZHkuc2V0X2Vvc19zdGF0dXMoIXczY19zbGlkeS5uZXh0X2luY3JlbWVudGFsX2l0ZW0odzNjX3NsaWR5Lmxhc3Rfc2hvd24pKTsKCiAgICAgIGlmICghdzNjX3NsaWR5Lm5zX3BvcykKICAgICAgICAgdzNjX3NsaWR5LnJlZnJlc2hfdG9vbGJhcigyMDApOwogICAgIH0KICB9LAoKICAvLyB0byBmaXJzdCBzbGlkZSB3aXRoIG5vdGhpbmcgcmV2ZWFsZWQKICAvLyBpLmUuIHN0YXRlIGF0IHN0YXJ0IG9mIHByZXNlbnRhdGlvbgogIGZpcnN0X3NsaWRlOiBmdW5jdGlvbiAoKSB7CiAgICAgaWYgKCF3M2Nfc2xpZHkudmlld19hbGwpCiAgICAgewogICAgICAgdmFyIHNsaWRlOwoKICAgICAgIGlmICh3M2Nfc2xpZHkuc2xpZGVfbnVtYmVyICE9IDApCiAgICAgICB7CiAgICAgICAgIHNsaWRlID0gdzNjX3NsaWR5LnNsaWRlc1t3M2Nfc2xpZHkuc2xpZGVfbnVtYmVyXTsKICAgICAgICAgdzNjX3NsaWR5LmhpZGVfc2xpZGUoc2xpZGUpOwoKICAgICAgICAgdzNjX3NsaWR5LnNsaWRlX251bWJlciA9IDA7CiAgICAgICAgIHNsaWRlID0gdzNjX3NsaWR5LnNsaWRlc1t3M2Nfc2xpZHkuc2xpZGVfbnVtYmVyXTsKICAgICAgICAgdzNjX3NsaWR5Lmxhc3Rfc2hvd24gPSBudWxsOwogICAgICAgICB3M2Nfc2xpZHkuc2V0X3Zpc2liaWxpdHlfYWxsX2luY3JlbWVudGFsKCJoaWRkZW4iKTsKICAgICAgICAgdzNjX3NsaWR5LnNob3dfc2xpZGUoc2xpZGUpOwogICAgICAgfQoKICAgICAgIHczY19zbGlkeS5zZXRfZW9zX3N0YXR1cygKICAgICAgICAgIXczY19zbGlkeS5uZXh0X2luY3JlbWVudGFsX2l0ZW0odzNjX3NsaWR5Lmxhc3Rfc2hvd24pKTsKICAgICAgIHczY19zbGlkeS5zZXRfbG9jYXRpb24oKTsKICAgICB9CiAgfSwKCiAgLy8gZ290byBsYXN0IHNsaWRlIHdpdGggZXZlcnl0aGluZyByZXZlYWxlZAogIC8vIGkuZS4gc3RhdGUgYXQgZW5kIG9mIHByZXNlbnRhdGlvbgogIGxhc3Rfc2xpZGU6IGZ1bmN0aW9uICgpIHsKICAgIGlmICghdzNjX3NsaWR5LnZpZXdfYWxsKQogICAgewogICAgICB2YXIgc2xpZGU7CgogICAgICB3M2Nfc2xpZHkubGFzdF9zaG93biA9IG51bGw7IC8vcmV2ZWFsTmV4dEl0ZW0obGFzdFNob3duKTsKCiAgICAgIGlmICh3M2Nfc2xpZHkubGFzdF9zaG93biA9PSBudWxsICYmCiAgICAgICAgICB3M2Nfc2xpZHkuc2xpZGVfbnVtYmVyIDwgdzNjX3NsaWR5LnNsaWRlcy5sZW5ndGggLSAxKQogICAgICB7CiAgICAgICAgIHNsaWRlID0gdzNjX3NsaWR5LnNsaWRlc1t3M2Nfc2xpZHkuc2xpZGVfbnVtYmVyXTsKICAgICAgICAgdzNjX3NsaWR5LmhpZGVfc2xpZGUoc2xpZGUpOwogICAgICAgICB3M2Nfc2xpZHkuc2xpZGVfbnVtYmVyID0gdzNjX3NsaWR5LnNsaWRlcy5sZW5ndGggLSAxOwogICAgICAgICBzbGlkZSA9IHczY19zbGlkeS5zbGlkZXNbdzNjX3NsaWR5LnNsaWRlX251bWJlcl07CiAgICAgICAgIHczY19zbGlkeS5zZXRfdmlzaWJpbGl0eV9hbGxfaW5jcmVtZW50YWwoInZpc2libGUiKTsKICAgICAgICAgdzNjX3NsaWR5Lmxhc3Rfc2hvd24gPSB3M2Nfc2xpZHkucHJldmlvdXNfaW5jcmVtZW50YWxfaXRlbShudWxsKTsKCiAgICAgICAgIHczY19zbGlkeS5zaG93X3NsaWRlKHNsaWRlKTsKICAgICAgfQogICAgICBlbHNlCiAgICAgIHsKICAgICAgICAgdzNjX3NsaWR5LnNldF92aXNpYmlsaXR5X2FsbF9pbmNyZW1lbnRhbCgidmlzaWJsZSIpOwogICAgICAgICB3M2Nfc2xpZHkubGFzdF9zaG93biA9IHczY19zbGlkeS5wcmV2aW91c19pbmNyZW1lbnRhbF9pdGVtKG51bGwpOwogICAgICB9CgogICAgICB3M2Nfc2xpZHkuc2V0X2Vvc19zdGF0dXModHJ1ZSk7CiAgICAgIHczY19zbGlkeS5zZXRfbG9jYXRpb24oKTsKICAgIH0KICB9LAoKCiAgLy8gIyMjIGNoZWNrIHRoaXMgYW5kIGNvbnNpZGVyIGFkZC9yZW1vdmUgY2xhc3MKICBzZXRfZW9zX3N0YXR1czogZnVuY3Rpb24gKHN0YXRlKSB7CiAgICBpZiAodGhpcy5lb3MpCiAgICAgIHRoaXMuZW9zLnN0eWxlLmNvbG9yID0gKHN0YXRlID8gInJnYigyNDAsMjQwLDI0MCkiIDogInJlZCIpOwogIH0sCgogIC8vIGZpcnN0IHNsaWRlIGlzIDAKICBnb3RvX3NsaWRlOiBmdW5jdGlvbiAobnVtKSB7CiAgICAvL2FsZXJ0KCJnb2luZyB0byBzbGlkZSAiICsgKG51bSsxKSk7CiAgICB2YXIgc2xpZGUgPSB3M2Nfc2xpZHkuc2xpZGVzW3czY19zbGlkeS5zbGlkZV9udW1iZXJdOwogICAgdzNjX3NsaWR5LmhpZGVfc2xpZGUoc2xpZGUpOwogICAgdzNjX3NsaWR5LnNsaWRlX251bWJlciA9IG51bTsKICAgIHNsaWRlID0gdzNjX3NsaWR5LnNsaWRlc1t3M2Nfc2xpZHkuc2xpZGVfbnVtYmVyXTsKICAgIHczY19zbGlkeS5sYXN0X3Nob3duID0gbnVsbDsKICAgIHczY19zbGlkeS5zZXRfdmlzaWJpbGl0eV9hbGxfaW5jcmVtZW50YWwoImhpZGRlbiIpOwogICAgdzNjX3NsaWR5LnNldF9lb3Nfc3RhdHVzKCF3M2Nfc2xpZHkubmV4dF9pbmNyZW1lbnRhbF9pdGVtKHczY19zbGlkeS5sYXN0X3Nob3duKSk7CiAgICBkb2N1bWVudC50aXRsZSA9IHczY19zbGlkeS50aXRsZSArICIgKCIgKyAodzNjX3NsaWR5LnNsaWRlX251bWJlcisxKSArICIpIjsKICAgIHczY19zbGlkeS5zaG93X3NsaWRlKHNsaWRlKTsKICAgIHczY19zbGlkeS5zaG93X3NsaWRlX251bWJlcigpOwogIH0sCgoKICBzaG93X3NsaWRlOiBmdW5jdGlvbiAoc2xpZGUpIHsKICAgIHRoaXMuc3luY19iYWNrZ3JvdW5kKHNsaWRlKTsKICAgIHRoaXMucmVtb3ZlX2NsYXNzKHNsaWRlLCAiaGlkZGVuIik7CgogICAgLy8gd29yayBhcm91bmQgSUU5IG9iamVjdCByZW5kZXJpbmcgYnVnCiAgICBzZXRUaW1lb3V0KCJ3aW5kb3cuc2Nyb2xsVG8oMCwwKTsiLCAxKTsKICB9LAoKICBoaWRlX3NsaWRlOiBmdW5jdGlvbiAoc2xpZGUpIHsKICAgIHRoaXMuYWRkX2NsYXNzKHNsaWRlLCAiaGlkZGVuIik7CiAgfSwKCiAgc2V0X2ZvY3VzOiBmdW5jdGlvbiAoZWxlbWVudCkKICB7CiAgICBpZiAoZWxlbWVudCkKICAgICAgZWxlbWVudC5mb2N1cygpOwogICAgZWxzZQogICAgewogICAgICB3M2Nfc2xpZHkuaGVscF9hbmNob3IuZm9jdXMoKTsKCiAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7CiAgICAgICAgdzNjX3NsaWR5LmhlbHBfYW5jaG9yLmJsdXIoKTsKICAgICAgfSwgMSk7CiAgICB9CiAgfSwKCiAgLy8gc2hvdyBqdXN0IHRoZSBiYWNrZ3JvdW5kcyBwZXJ0aW5lbnQgdG8gdGhpcyBzbGlkZQogIC8vIHdoZW4gc2xpZGUgYmFja2dyb3VuZC1jb2xvciBpcyB0cmFuc3BhcmVudAogIC8vIHRoaXMgc2hvdWxkIG5vdyB3b3JrIHdpdGggcmdiYSBjb2xvciB2YWx1ZXMKICBzeW5jX2JhY2tncm91bmQ6IGZ1bmN0aW9uIChzbGlkZSkgewogICAgdmFyIGJhY2tncm91bmQ7CiAgICB2YXIgYmdDb2xvcjsKCiAgICBpZiAoc2xpZGUuY3VycmVudFN0eWxlKQogICAgICBiZ0NvbG9yID0gc2xpZGUuY3VycmVudFN0eWxlWyJiYWNrZ3JvdW5kQ29sb3IiXTsKICAgIGVsc2UgaWYgKGRvY3VtZW50LmRlZmF1bHRWaWV3KQogICAgewogICAgICB2YXIgc3R5bGVzID0gZG9jdW1lbnQuZGVmYXVsdFZpZXcuZ2V0Q29tcHV0ZWRTdHlsZShzbGlkZSxudWxsKTsKCiAgICAgIGlmIChzdHlsZXMpCiAgICAgICAgYmdDb2xvciA9IHN0eWxlcy5nZXRQcm9wZXJ0eVZhbHVlKCJiYWNrZ3JvdW5kLWNvbG9yIik7CiAgICAgIGVsc2UgLy8gYnJva2VuIGltcGxlbWVudGF0aW9uIHByb2JhYmx5IGR1ZSBTYWZhcmkgb3IgS29ucXVlcm9yCiAgICAgIHsKICAgICAgICAvL2FsZXJ0KCJkZWZlY3RpdmUgaW1wbGVtZW50YXRpb24gb2YgZ2V0Q29tcHV0ZWRTdHlsZSgpIik7CiAgICAgICAgYmdDb2xvciA9ICJ0cmFuc3BhcmVudCI7CiAgICAgIH0KICAgIH0KICAgIGVsc2UKICAgICAgYmdDb2xvciA9PSAidHJhbnNwYXJlbnQiOwoKICAgIGlmIChiZ0NvbG9yID09ICJ0cmFuc3BhcmVudCIgfHwKICAgICAgICBiZ0NvbG9yLmluZGV4T2YoInJnYmEiKSA+PSAwIHx8CiAgICAgICAgYmdDb2xvci5pbmRleE9mKCJvcGFjaXR5IikgPj0gMCkKICAgIHsKICAgICAgdmFyIHNsaWRlQ2xhc3MgPSB0aGlzLmdldF9jbGFzc19saXN0KHNsaWRlKTsKCiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5iYWNrZ3JvdW5kcy5sZW5ndGg7IGkrKykKICAgICAgewogICAgICAgIGJhY2tncm91bmQgPSB0aGlzLmJhY2tncm91bmRzW2ldOwoKICAgICAgICB2YXIgYmdDbGFzcyA9IHRoaXMuZ2V0X2NsYXNzX2xpc3QoYmFja2dyb3VuZCk7CgogICAgICAgIGlmICh0aGlzLm1hdGNoaW5nX2JhY2tncm91bmQoc2xpZGVDbGFzcywgYmdDbGFzcykpCiAgICAgICAgICB0aGlzLnJlbW92ZV9jbGFzcyhiYWNrZ3JvdW5kLCAiaGlkZGVuIik7CiAgICAgICAgZWxzZQogICAgICAgICAgdGhpcy5hZGRfY2xhc3MoYmFja2dyb3VuZCwgImhpZGRlbiIpOwogICAgICB9CiAgICB9CiAgICBlbHNlIC8vIGZvcmNpYmx5IGhpZGUgYWxsIGJhY2tncm91bmRzCiAgICAgIHRoaXMuaGlkZV9iYWNrZ3JvdW5kcygpOwogIH0sCgogIGhpZGVfYmFja2dyb3VuZHM6IGZ1bmN0aW9uICgpIHsKICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5iYWNrZ3JvdW5kcy5sZW5ndGg7IGkrKykKICAgIHsKICAgICAgYmFja2dyb3VuZCA9IHRoaXMuYmFja2dyb3VuZHNbaV07CiAgICAgIHRoaXMuYWRkX2NsYXNzKGJhY2tncm91bmQsICJoaWRkZW4iKTsKICAgIH0KICB9LAoKICAvLyBjb21wYXJlIGNsYXNzZXMgZm9yIHNsaWRlIGFuZCBiYWNrZ3JvdW5kCiAgbWF0Y2hpbmdfYmFja2dyb3VuZDogZnVuY3Rpb24gKHNsaWRlQ2xhc3MsIGJnQ2xhc3MpIHsKICAgIHZhciBpLCBjb3VudCwgcGF0dGVybiwgcmVzdWx0OwoKICAgIC8vIGRlZmluZSBwYXR0ZXJuIGFzIHJlZ3VsYXIgZXhwcmVzc2lvbgogICAgcGF0dGVybiA9IC9cdysvZzsKCiAgICAvLyBjaGVjayBiYWNrZ3JvdW5kIGNsYXNzIG5hbWVzCiAgICByZXN1bHQgPSBiZ0NsYXNzLm1hdGNoKHBhdHRlcm4pOwoKICAgIGZvciAoaSA9IGNvdW50ID0gMDsgaSA8IHJlc3VsdC5sZW5ndGg7IGkrKykKICAgIHsKICAgICAgaWYgKHJlc3VsdFtpXSA9PSAiaGlkZGVuIikKICAgICAgICBjb250aW51ZTsKCiAgICAgIGlmIChyZXN1bHRbaV0gPT0gImJhY2tncm91bmQiKQoJY29udGludWU7CgogICAgICArK2NvdW50OwogICAgfQoKICAgIGlmIChjb3VudCA9PSAwKSAgLy8gZGVmYXVsdCBtYXRjaAogICAgICByZXR1cm4gdHJ1ZTsKCiAgICAvLyBjaGVjayBmb3IgbWF0Y2hlcyBhbmQgcGxhY2UgcmVzdWx0IGluIGFycmF5CiAgICByZXN1bHQgPSBzbGlkZUNsYXNzLm1hdGNoKHBhdHRlcm4pOwoKICAgIC8vIG5vdyBjaGVjayBpZiBkZXNpcmVkIG5hbWUgaXMgcHJlc2VudCBmb3IgYmFja2dyb3VuZAogICAgZm9yIChpID0gY291bnQgPSAwOyBpIDwgcmVzdWx0Lmxlbmd0aDsgaSsrKQogICAgewogICAgICBpZiAocmVzdWx0W2ldID09ICJoaWRkZW4iKQogICAgICAgIGNvbnRpbnVlOwoKICAgICAgaWYgKHRoaXMuaGFzX3Rva2VuKGJnQ2xhc3MsIHJlc3VsdFtpXSkpCiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgcmV0dXJuIGZhbHNlOwogIH0sCgogIHJlc2l6ZWQ6IGZ1bmN0aW9uICgpIHsKICAgICB2YXIgd2lkdGggPSAwOwoKICAgICBpZiAoIHR5cGVvZiggd2luZG93LmlubmVyV2lkdGggKSA9PSAnbnVtYmVyJyApCiAgICAgICB3aWR0aCA9IHdpbmRvdy5pbm5lcldpZHRoOyAgLy8gTm9uIElFIGJyb3dzZXIKICAgICBlbHNlIGlmIChkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQgJiYgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudFdpZHRoKQogICAgICAgd2lkdGggPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50V2lkdGg7ICAvLyBJRTYKICAgICBlbHNlIGlmIChkb2N1bWVudC5ib2R5ICYmIGRvY3VtZW50LmJvZHkuY2xpZW50V2lkdGgpCiAgICAgICB3aWR0aCA9IGRvY3VtZW50LmJvZHkuY2xpZW50V2lkdGg7IC8vIElFNAoKICAgICB2YXIgaGVpZ2h0ID0gMDsKCiAgICAgaWYgKCB0eXBlb2YoIHdpbmRvdy5pbm5lckhlaWdodCApID09ICdudW1iZXInICkKICAgICAgIGhlaWdodCA9IHdpbmRvdy5pbm5lckhlaWdodDsgIC8vIE5vbiBJRSBicm93c2VyCiAgICAgZWxzZSBpZiAoZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50ICYmIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRIZWlnaHQpCiAgICAgICBoZWlnaHQgPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50SGVpZ2h0OyAgLy8gSUU2CiAgICAgZWxzZSBpZiAoZG9jdW1lbnQuYm9keSAmJiBkb2N1bWVudC5ib2R5LmNsaWVudEhlaWdodCkKICAgICAgIGhlaWdodCA9IGRvY3VtZW50LmJvZHkuY2xpZW50SGVpZ2h0OyAvLyBJRTQKCiAgICAgaWYgKGhlaWdodCAmJiAod2lkdGgvaGVpZ2h0ID4gMS4wNSoxMDI0Lzc2OCkpCiAgICAgewogICAgICAgd2lkdGggPSBoZWlnaHQgKiAxMDI0LjAvNzY4OwogICAgIH0KCiAgICAgLy8gSUUgZmlyZXMgb25yZXNpemUgZXZlbiB3aGVuIG9ubHkgZm9udCBzaXplIGlzIGNoYW5nZWQhCiAgICAgLy8gc28gd2UgZG8gYSBjaGVjayB0byBhdm9pZCBibG9ja2luZyA8IGFuZCA+IGFjdGlvbnMKICAgICBpZiAod2lkdGggIT0gdzNjX3NsaWR5Lmxhc3Rfd2lkdGggfHwgaGVpZ2h0ICE9IHczY19zbGlkeS5sYXN0X2hlaWdodCkKICAgICB7CiAgICAgICBpZiAod2lkdGggPj0gMTEwMCkKICAgICAgICAgdzNjX3NsaWR5LnNpemVfaW5kZXggPSA1OyAgICAvLyA0CiAgICAgICBlbHNlIGlmICh3aWR0aCA+PSAxMDAwKQogICAgICAgICB3M2Nfc2xpZHkuc2l6ZV9pbmRleCA9IDQ7ICAgIC8vIDMKICAgICAgIGVsc2UgaWYgKHdpZHRoID49IDgwMCkKICAgICAgICAgdzNjX3NsaWR5LnNpemVfaW5kZXggPSAzOyAgICAvLyAyCiAgICAgICBlbHNlIGlmICh3aWR0aCA+PSA2MDApCiAgICAgICAgIHczY19zbGlkeS5zaXplX2luZGV4ID0gMjsgICAgLy8gMQogICAgICAgZWxzZSBpZiAod2lkdGgpCiAgICAgICAgIHczY19zbGlkeS5zaXplX2luZGV4ID0gMDsKCiAgICAgICAvLyBhZGQgaW4gZm9udCBzaXplIGFkanVzdG1lbnQgZnJvbSBtZXRhIGVsZW1lbnQgZS5nLgogICAgICAgLy8gPG1ldGEgbmFtZT0iZm9udC1zaXplLWFkanVzdG1lbnQiIGNvbnRlbnQ9Ii0yIiAvPgogICAgICAgLy8gdXNlZnVsIHdoZW4gc2xpZGVzIGhhdmUgdG9vIG11Y2ggY29udGVudCA7LSkKCiAgICAgICBpZiAoMCA8PSB3M2Nfc2xpZHkuc2l6ZV9pbmRleCArIHczY19zbGlkeS5zaXplX2FkanVzdG1lbnQgJiYKICAgICAgICAgICAgIHczY19zbGlkeS5zaXplX2luZGV4ICsgdzNjX3NsaWR5LnNpemVfYWRqdXN0bWVudCA8IHczY19zbGlkeS5zaXplcy5sZW5ndGgpCiAgICAgICAgIHczY19zbGlkeS5zaXplX2luZGV4ID0gdzNjX3NsaWR5LnNpemVfaW5kZXggKyB3M2Nfc2xpZHkuc2l6ZV9hZGp1c3RtZW50OwoKICAgICAgIC8vIGVuYWJsZXMgY3Jvc3MgYnJvd3NlciB1c2Ugb2YgcmVsYXRpdmUgd2lkdGgvaGVpZ2h0CiAgICAgICAvLyBvbiBvYmplY3QgZWxlbWVudHMgZm9yIHVzZSB3aXRoIFNWRyBhbmQgRmxhc2ggbWVkaWEKICAgICAgIHczY19zbGlkeS5hZGp1c3Rfb2JqZWN0X2RpbWVuc2lvbnMod2lkdGgsIGhlaWdodCk7CgogICAgICAgaWYgKGRvY3VtZW50LmJvZHkuc3R5bGUuZm9udFNpemUgIT0gdzNjX3NsaWR5LnNpemVzW3czY19zbGlkeS5zaXplX2luZGV4XSkKICAgICAgIHsKICAgICAgICAgZG9jdW1lbnQuYm9keS5zdHlsZS5mb250U2l6ZSA9IHczY19zbGlkeS5zaXplc1t3M2Nfc2xpZHkuc2l6ZV9pbmRleF07CiAgICAgICB9CgogICAgICAgdzNjX3NsaWR5Lmxhc3Rfd2lkdGggPSB3aWR0aDsKICAgICAgIHczY19zbGlkeS5sYXN0X2hlaWdodCA9IGhlaWdodDsKCiAgICAgICAvLyBmb3JjZSByZWZsb3cgdG8gd29yayBhcm91bmQgTW96aWxsYSBidWcKICAgICAgIGlmICh3M2Nfc2xpZHkubnNfcG9zKQogICAgICAgewogICAgICAgICB2YXIgc2xpZGUgPSB3M2Nfc2xpZHkuc2xpZGVzW3czY19zbGlkeS5zbGlkZV9udW1iZXJdOwogICAgICAgICB3M2Nfc2xpZHkuaGlkZV9zbGlkZShzbGlkZSk7CiAgICAgICAgIHczY19zbGlkeS5zaG93X3NsaWRlKHNsaWRlKTsKICAgICAgIH0KCiAgICAgICAvLyBmb3JjZSBjb3JyZWN0IHBvc2l0aW9uaW5nIG9mIHRvb2xiYXIKICAgICAgIHczY19zbGlkeS5yZWZyZXNoX3Rvb2xiYXIoMjAwKTsKICAgICB9CiAgfSwKCiAgc2Nyb2xsZWQ6IGZ1bmN0aW9uICgpIHsKICAgIGlmICh3M2Nfc2xpZHkudG9vbGJhciAmJiAhdzNjX3NsaWR5Lm5zX3BvcyAmJiAhdzNjX3NsaWR5LmllNykKICAgIHsKICAgICAgdzNjX3NsaWR5LmhhY2tfb2Zmc2V0ID0gdzNjX3NsaWR5LnNjcm9sbF94X29mZnNldCgpOwogICAgICAvLyBoaWRlIHRvb2xiYXIKICAgICAgdzNjX3NsaWR5LnRvb2xiYXIuc3R5bGUuZGlzcGxheSA9ICJub25lIjsKCiAgICAgIC8vIG1ha2UgaXQgcmVhcHBlYXIgbGF0ZXIKICAgICAgaWYgKHczY19zbGlkeS5zY3JvbGxoYWNrID09IDAgJiYgIXczY19zbGlkeS52aWV3X2FsbCkKICAgICAgewogICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge3czY19zbGlkeS5zaG93X3Rvb2xiYXIoKTsgfSwgMTAwMCk7CiAgICAgICAgdzNjX3NsaWR5LnNjcm9sbGhhY2sgPSAxOwogICAgICB9CiAgICB9CiAgfSwKCiAgaGlkZV90b29sYmFyOiBmdW5jdGlvbiAoKSB7CiAgICB3M2Nfc2xpZHkuYWRkX2NsYXNzKHczY19zbGlkeS50b29sYmFyLCAiaGlkZGVuIik7CiAgICB3aW5kb3cuZm9jdXMoKTsKICB9LAoKICAvLyB1c2VkIHRvIGVuc3VyZSBJRSByZWZyZXNoZXMgdG9vbGJhciBpbiBjb3JyZWN0IHBvc2l0aW9uCiAgcmVmcmVzaF90b29sYmFyOiBmdW5jdGlvbiAoaW50ZXJ2YWwpIHsKICAgIGlmICghdzNjX3NsaWR5Lm5zX3BvcyAmJiAhdzNjX3NsaWR5LmllNykKICAgIHsKICAgICAgdzNjX3NsaWR5LmhpZGVfdG9vbGJhcigpOwogICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHt3M2Nfc2xpZHkuc2hvd190b29sYmFyKCk7fSwgaW50ZXJ2YWwpOwogICAgfQogIH0sCgogIC8vIHJlc3RvcmVzIHRvb2xiYXIgYWZ0ZXIgc2hvcnQgZGVsYXkKICBzaG93X3Rvb2xiYXI6IGZ1bmN0aW9uICgpIHsKICAgIGlmICh3M2Nfc2xpZHkud2FudF90b29sYmFyKQogICAgewogICAgICB3M2Nfc2xpZHkudG9vbGJhci5zdHlsZS5kaXNwbGF5ID0gImJsb2NrIjsKCiAgICAgIGlmICghdzNjX3NsaWR5Lm5zX3BvcykKICAgICAgewogICAgICAgIC8vIGFkanVzdCBwb3NpdGlvbiB0byBhbGxvdyBmb3Igc2Nyb2xsaW5nCiAgICAgICAgdmFyIHhvZmZzZXQgPSB3M2Nfc2xpZHkuc2Nyb2xsX3hfb2Zmc2V0KCk7CiAgICAgICAgdzNjX3NsaWR5LnRvb2xiYXIuc3R5bGUubGVmdCA9IHhvZmZzZXQ7CiAgICAgICAgdzNjX3NsaWR5LnRvb2xiYXIuc3R5bGUucmlnaHQgPSB4b2Zmc2V0OwoKICAgICAgICAvLyBkZXRlcm1pbmUgdmVydGljYWwgc2Nyb2xsIG9mZnNldAogICAgICAgIC8vdmFyIHlvZmZzZXQgPSBzY3JvbGxZT2Zmc2V0KCk7CgogICAgICAgIC8vIGJvdHRvbSBpcyBkb2MgaGVpZ2h0IC0gd2luZG93IGhlaWdodCAtIHNjcm9sbCBvZmZzZXQKICAgICAgICAvL3ZhciBib3R0b20gPSBkb2N1bWVudEhlaWdodCgpIC0gbGFzdEhlaWdodCAtIHlvZmZzZXQKCiAgICAgICAgLy9pZiAoeW9mZnNldCA+IDAgfHwgZG9jdW1lbnRIZWlnaHQoKSA+IGxhc3RIZWlnaHQpCiAgICAgICAgLy8gICBib3R0b20gKz0gMTY7ICAvLyBhbGxvdyBmb3IgaGVpZ2h0IG9mIHNjcm9sbGJhcgoKICAgICAgICB3M2Nfc2xpZHkudG9vbGJhci5zdHlsZS5ib3R0b20gPSAwOyAvL2JvdHRvbTsKICAgICAgfQoKICAgICAgdzNjX3NsaWR5LnJlbW92ZV9jbGFzcyh3M2Nfc2xpZHkudG9vbGJhciwgImhpZGRlbiIpOwogICAgfQoKICAgIHczY19zbGlkeS5zY3JvbGxoYWNrID0gMDsKCgogICAgLy8gc2V0IHRoZSBrZXlib2FyZCBmb2N1cyB0byB0aGUgaGVscCBsaW5rIG9uIHRoZQogICAgLy8gdG9vbGJhciB0byBlbnN1cmUgdGhhdCBkb2N1bWVudCBoYXMgdGhlIGZvY3VzCiAgICAvLyBJRSBkb2Vzbid0IGFsd2F5cyB3b3JrIHdpdGggd2luZG93LmZvY3VzKCkKICAgIC8vIGFuZCB0aGlzIGhhY2sgaGFzIGJlbmVmaXQgb2YgRW50ZXIgZm9yIGhlbHAKCiAgICB0cnkKICAgIHsKICAgICAgaWYgKCF3M2Nfc2xpZHkub3BlcmEpCiAgICAgICAgdzNjX3NsaWR5LnNldF9mb2N1cygpOwogICAgfQogICAgY2F0Y2ggKGUpCiAgICB7CiAgICB9CiAgfSwKCi8vIGludm9rZWQgdmlhIEYga2V5CiAgdG9nZ2xlX3Rvb2xiYXI6IGZ1bmN0aW9uICgpIHsKICAgIGlmICghdzNjX3NsaWR5LnZpZXdfYWxsKQogICAgewogICAgICBpZiAodzNjX3NsaWR5Lmhhc19jbGFzcyh3M2Nfc2xpZHkudG9vbGJhciwgImhpZGRlbiIpKQogICAgICB7CiAgICAgICAgdzNjX3NsaWR5LnJlbW92ZV9jbGFzcyh3M2Nfc2xpZHkudG9vbGJhciwgImhpZGRlbiIpCiAgICAgICAgdzNjX3NsaWR5LndhbnRfdG9vbGJhciA9IDE7CiAgICAgIH0KICAgICAgZWxzZQogICAgICB7CiAgICAgICAgdzNjX3NsaWR5LmFkZF9jbGFzcyh3M2Nfc2xpZHkudG9vbGJhciwgImhpZGRlbiIpCiAgICAgICAgdzNjX3NsaWR5LndhbnRfdG9vbGJhciA9IDA7CiAgICAgIH0KICAgIH0KICB9LAoKICBzY3JvbGxfeF9vZmZzZXQ6IGZ1bmN0aW9uICgpIHsKICAgIGlmICh3aW5kb3cucGFnZVhPZmZzZXQpCiAgICAgIHJldHVybiBzZWxmLnBhZ2VYT2Zmc2V0OwoKICAgIGlmIChkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQgJiYgCiAgICAgICAgICAgICBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsTGVmdCkKICAgICAgcmV0dXJuIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxMZWZ0OwoKICAgIGlmIChkb2N1bWVudC5ib2R5KQogICAgICByZXR1cm4gZG9jdW1lbnQuYm9keS5zY3JvbGxMZWZ0OwoKICAgIHJldHVybiAwOwogIH0sCgogIHNjcm9sbF95X29mZnNldDogZnVuY3Rpb24gKCkgewogICAgaWYgKHdpbmRvdy5wYWdlWU9mZnNldCkKICAgICAgcmV0dXJuIHNlbGYucGFnZVlPZmZzZXQ7CgogICAgaWYgKGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCAmJiAKICAgICAgICAgICAgIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxUb3ApCiAgICAgIHJldHVybiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsVG9wOwoKICAgIGlmIChkb2N1bWVudC5ib2R5KQogICAgICByZXR1cm4gZG9jdW1lbnQuYm9keS5zY3JvbGxUb3A7CgogICAgcmV0dXJuIDA7CiAgfSwKCiAgLy8gbG9va2luZyBmb3IgYSB3YXkgdG8gZGV0ZXJtaW5lIGhlaWdodCBvZiBzbGlkZSBjb250ZW50CiAgLy8gdGhlIHNsaWRlIGl0c2VsZiBpcyBzZXQgdG8gdGhlIGhlaWdodCBvZiB0aGUgd2luZG93CiAgb3B0aW1pemVfZm9udF9zaXplOiBmdW5jdGlvbiAoKSB7CiAgICB2YXIgc2xpZGUgPSB3M2Nfc2xpZHkuc2xpZGVzW3czY19zbGlkeS5zbGlkZV9udW1iZXJdOwoKICAgIC8vdmFyIGRoID0gZG9jdW1lbnRIZWlnaHQoKTsgLy9nZXREb2NIZWlnaHQoZG9jdW1lbnQpOwogICAgdmFyIGRoID0gc2xpZGUuc2Nyb2xsSGVpZ2h0OwogICAgdmFyIHdoID0gZ2V0V2luZG93SGVpZ2h0KCk7CiAgICB2YXIgdSA9IDEwMCAqIGRoIC8gd2g7CgogICAgYWxlcnQoIndpbmRvdyB1dGlsaXphdGlvbiA9ICIgKyB1ICsgIiUgKGRvYyAiCiAgICAgICsgZGggKyAiIHdpbiAiICsgd2ggKyAiKSIpOwogIH0sCgogIC8vIGZyb20gZG9jdW1lbnQgb2JqZWN0CiAgZ2V0X2RvY19oZWlnaHQ6IGZ1bmN0aW9uIChkb2MpIHsKICAgIGlmICghZG9jKQogICAgICBkb2MgPSBkb2N1bWVudDsKCiAgICBpZiAoZG9jICYmIGRvYy5ib2R5ICYmIGRvYy5ib2R5Lm9mZnNldEhlaWdodCkKICAgICAgcmV0dXJuIGRvYy5ib2R5Lm9mZnNldEhlaWdodDsgIC8vIG5zL2dlY2tvIHN5bnRheAoKICAgIGlmIChkb2MgJiYgZG9jLmJvZHkgJiYgZG9jLmJvZHkuc2Nyb2xsSGVpZ2h0KQogICAgICByZXR1cm4gZG9jLmJvZHkuc2Nyb2xsSGVpZ2h0OwoKICAgIGFsZXJ0KCJjb3VsZG4ndCBkZXRlcm1pbmUgZG9jdW1lbnQgaGVpZ2h0Iik7CiAgfSwKCiAgZ2V0X3dpbmRvd19oZWlnaHQ6IGZ1bmN0aW9uICgpIHsKICAgIGlmICggdHlwZW9mKCB3aW5kb3cuaW5uZXJIZWlnaHQgKSA9PSAnbnVtYmVyJyApCiAgICAgIHJldHVybiB3aW5kb3cuaW5uZXJIZWlnaHQ7ICAvLyBOb24gSUUgYnJvd3NlcgoKICAgIGlmIChkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQgJiYgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudEhlaWdodCkKICAgICAgcmV0dXJuIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRIZWlnaHQ7ICAvLyBJRTYKCiAgICBpZiAoZG9jdW1lbnQuYm9keSAmJiBkb2N1bWVudC5ib2R5LmNsaWVudEhlaWdodCkKICAgICAgcmV0dXJuIGRvY3VtZW50LmJvZHkuY2xpZW50SGVpZ2h0OyAvLyBJRTQKICB9LAoKICBkb2N1bWVudF9oZWlnaHQ6IGZ1bmN0aW9uICgpIHsKICAgIHZhciBzaCwgb2g7CgogICAgc2ggPSBkb2N1bWVudC5ib2R5LnNjcm9sbEhlaWdodDsKICAgIG9oID0gZG9jdW1lbnQuYm9keS5vZmZzZXRIZWlnaHQ7CgogICAgaWYgKHNoICYmIG9oKQogICAgewogICAgICByZXR1cm4gKHNoID4gb2ggPyBzaCA6IG9oKTsKICAgIH0KCiAgICAvLyBubyBpZGVhIQogICAgcmV0dXJuIDA7CiAgfSwKCiAgc21hbGxlcjogZnVuY3Rpb24gKCkgewogICAgaWYgKHczY19zbGlkeS5zaXplX2luZGV4ID4gMCkKICAgIHsKICAgICAgLS13M2Nfc2xpZHkuc2l6ZV9pbmRleDsKICAgIH0KCiAgICB3M2Nfc2xpZHkudG9vbGJhci5zdHlsZS5kaXNwbGF5ID0gIm5vbmUiOwogICAgZG9jdW1lbnQuYm9keS5zdHlsZS5mb250U2l6ZSA9IHczY19zbGlkeS5zaXplc1t3M2Nfc2xpZHkuc2l6ZV9pbmRleF07CiAgICB2YXIgc2xpZGUgPSB3M2Nfc2xpZHkuc2xpZGVzW3czY19zbGlkeS5zbGlkZV9udW1iZXJdOwogICAgdzNjX3NsaWR5LmhpZGVfc2xpZGUoc2xpZGUpOwogICAgdzNjX3NsaWR5LnNob3dfc2xpZGUoc2xpZGUpOwogICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7dzNjX3NsaWR5LnNob3dfdG9vbGJhcigpOyB9LCA1MCk7CiAgfSwKCiAgYmlnZ2VyOiBmdW5jdGlvbiAoKSB7CiAgICBpZiAodzNjX3NsaWR5LnNpemVfaW5kZXggPCB3M2Nfc2xpZHkuc2l6ZXMubGVuZ3RoIC0gMSkKICAgIHsKICAgICAgKyt3M2Nfc2xpZHkuc2l6ZV9pbmRleDsKICAgIH0KCiAgICB3M2Nfc2xpZHkudG9vbGJhci5zdHlsZS5kaXNwbGF5ID0gIm5vbmUiOwogICAgZG9jdW1lbnQuYm9keS5zdHlsZS5mb250U2l6ZSA9IHczY19zbGlkeS5zaXplc1t3M2Nfc2xpZHkuc2l6ZV9pbmRleF07CiAgICB2YXIgc2xpZGUgPSB3M2Nfc2xpZHkuc2xpZGVzW3czY19zbGlkeS5zbGlkZV9udW1iZXJdOwogICAgdzNjX3NsaWR5LmhpZGVfc2xpZGUoc2xpZGUpOwogICAgdzNjX3NsaWR5LnNob3dfc2xpZGUoc2xpZGUpOwogICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7dzNjX3NsaWR5LnNob3dfdG9vbGJhcigpOyB9LCA1MCk7CiAgfSwKCiAgLy8gZW5hYmxlcyBjcm9zcyBicm93c2VyIHVzZSBvZiByZWxhdGl2ZSB3aWR0aC9oZWlnaHQKICAvLyBvbiBvYmplY3QgZWxlbWVudHMgZm9yIHVzZSB3aXRoIFNWRyBhbmQgRmxhc2ggbWVkaWEKICAvLyB3aXRoIHRoYW5rcyB0byBJdmFuIEhlcm1hbiBmb3IgdGhlIHN1Z2dlc3Rpb24KICBhZGp1c3Rfb2JqZWN0X2RpbWVuc2lvbnM6IGZ1bmN0aW9uICh3aWR0aCwgaGVpZ2h0KSB7CiAgICBmb3IoIHZhciBpID0gMDsgaSA8IHczY19zbGlkeS5vYmplY3RzLmxlbmd0aDsgaSsrICkKICAgIHsKICAgICAgdmFyIG9iaiA9IHRoaXMub2JqZWN0c1tpXTsKICAgICAgdmFyIG1pbWVUeXBlID0gb2JqLmdldEF0dHJpYnV0ZSgidHlwZSIpOwoKICAgICAgaWYgKG1pbWVUeXBlID09ICJpbWFnZS9zdmcreG1sIiB8fCBtaW1lVHlwZSA9PSAiYXBwbGljYXRpb24veC1zaG9ja3dhdmUtZmxhc2giKQogICAgICB7CiAgICAgICAgaWYgKCAhb2JqLmluaXRpYWxXaWR0aCApIAogICAgICAgICAgb2JqLmluaXRpYWxXaWR0aCA9IG9iai5nZXRBdHRyaWJ1dGUoIndpZHRoIik7CgogICAgICAgIGlmICggIW9iai5pbml0aWFsSGVpZ2h0ICkgCiAgICAgICAgICBvYmouaW5pdGlhbEhlaWdodCA9IG9iai5nZXRBdHRyaWJ1dGUoImhlaWdodCIpOwoKICAgICAgICBpZiAoIG9iai5pbml0aWFsV2lkdGggJiYgb2JqLmluaXRpYWxXaWR0aC5jaGFyQXQob2JqLmluaXRpYWxXaWR0aC5sZW5ndGgtMSkgPT0gIiUiICkKICAgICAgICB7CiAgICAgICAgICB2YXIgdyA9IHBhcnNlSW50KG9iai5pbml0aWFsV2lkdGguc2xpY2UoMCwgb2JqLmluaXRpYWxXaWR0aC5sZW5ndGgtMSkpOwogICAgICAgICAgdmFyIG5ld1cgPSB3aWR0aCAqICh3LzEwMC4wKTsKICAgICAgICAgIG9iai5zZXRBdHRyaWJ1dGUoIndpZHRoIixuZXdXKTsKICAgICAgICB9CgogICAgICAgIGlmICggb2JqLmluaXRpYWxIZWlnaHQgJiYKICAgICAgICAgICAgIG9iai5pbml0aWFsSGVpZ2h0LmNoYXJBdChvYmouaW5pdGlhbEhlaWdodC5sZW5ndGgtMSkgPT0gIiUiICkKICAgICAgICB7CiAgICAgICAgICB2YXIgaCA9IHBhcnNlSW50KG9iai5pbml0aWFsSGVpZ2h0LnNsaWNlKDAsIG9iai5pbml0aWFsSGVpZ2h0Lmxlbmd0aC0xKSk7CiAgICAgICAgICB2YXIgbmV3SCA9IGhlaWdodCAqIChoLzEwMC4wKTsKICAgICAgICAgIG9iai5zZXRBdHRyaWJ1dGUoImhlaWdodCIsIG5ld0gpOwogICAgICAgIH0KICAgICAgfQogICAgfQogIH0sCgogIC8vIG5lZWRlZCBmb3IgT3BlcmEgdG8gaW5oaWJpdCBkZWZhdWx0IGJlaGF2aW9yCiAgLy8gc2luY2UgT3BlcmEgZGVsaXZlcnMga2V5UHJlc3MgZXZlbiBpZiBrZXlEb3duCiAgLy8gd2FzIGNhbmNlbGxlZAogIGtleV9wcmVzczogZnVuY3Rpb24gKGV2ZW50KSB7CiAgICBpZiAoIWV2ZW50KQogICAgICBldmVudCA9IHdpbmRvdy5ldmVudDsKCiAgICBpZiAoIXczY19zbGlkeS5rZXlfd2FudGVkKQogICAgICByZXR1cm4gdzNjX3NsaWR5LmNhbmNlbChldmVudCk7CgogICAgcmV0dXJuIHRydWU7CiAgfSwKCiAgLy8gIFNlZSBlLmcuIGh0dHA6Ly93d3cucXVpcmtzbW9kZS5vcmcvanMvZXZlbnRzL2tleXMuaHRtbCBmb3Iga2V5Y29kZXMKICBrZXlfZG93bjogZnVuY3Rpb24gKGV2ZW50KSB7CiAgICB2YXIga2V5LCB0YXJnZXQsIHRhZzsKCiAgICB3M2Nfc2xpZHkua2V5X3dhbnRlZCA9IHRydWU7CgogICAgaWYgKCFldmVudCkKICAgICAgZXZlbnQgPSB3aW5kb3cuZXZlbnQ7CgogICAgLy8ga2x1ZGdlIGFyb3VuZCBOUy9JRSBkaWZmZXJlbmNlcyAKICAgIGlmICh3aW5kb3cuZXZlbnQpCiAgICB7CiAgICAgIGtleSA9IHdpbmRvdy5ldmVudC5rZXlDb2RlOwogICAgICB0YXJnZXQgPSB3aW5kb3cuZXZlbnQuc3JjRWxlbWVudDsKICAgIH0KICAgIGVsc2UgaWYgKGV2ZW50LndoaWNoKQogICAgewogICAgICBrZXkgPSBldmVudC53aGljaDsKICAgICAgdGFyZ2V0ID0gZXZlbnQudGFyZ2V0OwogICAgfQogICAgZWxzZQogICAgICByZXR1cm4gdHJ1ZTsgLy8gWWlrZXMhIHVua25vd24gYnJvd3NlcgoKICAgIC8vIGlnbm9yZSBldmVudCBpZiBrZXkgdmFsdWUgaXMgemVybwogICAgLy8gYXMgZm9yIGFsdCBvbiBPcGVyYSBhbmQgS29ucXVlcm9yCiAgICBpZiAoIWtleSkKICAgICAgIHJldHVybiB0cnVlOwoKICAgIC8vIGF2b2lkIGludGVyZmVyaW5nIHdpdGgga2V5c3Ryb2tlCiAgICAvLyBiZWhhdmlvciBmb3Igbm9uLXNsaWR5IGNocm9tZSBlbGVtZW50cwogICAgaWYgKCF3M2Nfc2xpZHkuc2xpZHlfY2hyb21lKHRhcmdldCkgJiYKICAgICAgICB3M2Nfc2xpZHkuc3BlY2lhbF9lbGVtZW50KHRhcmdldCkpCiAgICAgIHJldHVybiB0cnVlOwoKICAgIC8vIGNoZWNrIGZvciBjb25jdXJyZW50IGNvbnRyb2wvY29tbWFuZC9hbHQga2V5CiAgICAvLyBidXQgYXJlIHRoZXNlIG9ubHkgcHJlc2VudCBvbiBtb3VzZSBldmVudHM/CgogICAgaWYgKGV2ZW50LmN0cmxLZXkgfHwgZXZlbnQuYWx0S2V5IHx8IGV2ZW50Lm1ldGFLZXkpCiAgICAgICByZXR1cm4gdHJ1ZTsKCiAgICAvLyBkaXNtaXNzIHRhYmxlIG9mIGNvbnRlbnRzIGlmIHZpc2libGUKICAgIGlmICh3M2Nfc2xpZHkuaXNfc2hvd25fdG9jKCkgJiYga2V5ICE9IDkgJiYga2V5ICE9IDE2ICYmIGtleSAhPSAzOCAmJiBrZXkgIT0gNDApCiAgICB7CiAgICAgIHczY19zbGlkeS5oaWRlX3RhYmxlX29mX2NvbnRlbnRzKHRydWUpOwoKICAgICAgaWYgKGtleSA9PSAyNyB8fCBrZXkgPT0gODQgfHwga2V5ID09IDY3KQogICAgICAgIHJldHVybiB3M2Nfc2xpZHkuY2FuY2VsKGV2ZW50KTsKICAgIH0KCiAgICBpZiAoa2V5ID09IDM0KSAvLyBQYWdlIERvd24KICAgIHsKICAgICAgaWYgKHczY19zbGlkeS52aWV3X2FsbCkKICAgICAgICByZXR1cm4gdHJ1ZTsKCiAgICAgIHczY19zbGlkeS5uZXh0X3NsaWRlKGZhbHNlKTsKICAgICAgcmV0dXJuIHczY19zbGlkeS5jYW5jZWwoZXZlbnQpOwogICAgfQogICAgZWxzZSBpZiAoa2V5ID09IDMzKSAvLyBQYWdlIFVwCiAgICB7CiAgICAgIGlmICh3M2Nfc2xpZHkudmlld19hbGwpCiAgICAgICAgcmV0dXJuIHRydWU7CgogICAgICB3M2Nfc2xpZHkucHJldmlvdXNfc2xpZGUoZmFsc2UpOwogICAgICByZXR1cm4gdzNjX3NsaWR5LmNhbmNlbChldmVudCk7CiAgICB9CiAgICBlbHNlIGlmIChrZXkgPT0gMzIpIC8vIHNwYWNlIGJhcgogICAgewogICAgICB3M2Nfc2xpZHkubmV4dF9zbGlkZSh0cnVlKTsKICAgICAgcmV0dXJuIHczY19zbGlkeS5jYW5jZWwoZXZlbnQpOwogICAgfQogICAgZWxzZSBpZiAoa2V5ID09IDM3KSAvLyBMZWZ0IGFycm93CiAgICB7CiAgICAgIHczY19zbGlkeS5wcmV2aW91c19zbGlkZSghZXZlbnQuc2hpZnRLZXkpOwogICAgICByZXR1cm4gdzNjX3NsaWR5LmNhbmNlbChldmVudCk7CiAgICB9CiAgICBlbHNlIGlmIChrZXkgPT0gMzYpIC8vIEhvbWUKICAgIHsKICAgICAgdzNjX3NsaWR5LmZpcnN0X3NsaWRlKCk7CiAgICAgIHJldHVybiB3M2Nfc2xpZHkuY2FuY2VsKGV2ZW50KTsKICAgIH0KICAgIGVsc2UgaWYgKGtleSA9PSAzNSkgLy8gRW5kCiAgICB7CiAgICAgIHczY19zbGlkeS5sYXN0X3NsaWRlKCk7CiAgICAgIHJldHVybiB3M2Nfc2xpZHkuY2FuY2VsKGV2ZW50KTsKICAgIH0KICAgIGVsc2UgaWYgKGtleSA9PSAzOSkgLy8gUmlnaHQgYXJyb3cKICAgIHsKICAgICAgdzNjX3NsaWR5Lm5leHRfc2xpZGUoIWV2ZW50LnNoaWZ0S2V5KTsKICAgICAgcmV0dXJuIHczY19zbGlkeS5jYW5jZWwoZXZlbnQpOwogICAgfQogICAgZWxzZSBpZiAoa2V5ID09IDEzKSAvLyBFbnRlcgogICAgewogICAgICBpZiAodzNjX3NsaWR5Lm91dGxpbmUpCiAgICAgIHsKICAgICAgICBpZiAodzNjX3NsaWR5Lm91dGxpbmUudmlzaWJsZSkKICAgICAgICAgIHczY19zbGlkeS5mb2xkKHczY19zbGlkeS5vdXRsaW5lKTsKICAgICAgICBlbHNlCiAgICAgICAgICB3M2Nfc2xpZHkudW5mb2xkKHczY19zbGlkeS5vdXRsaW5lKTsKICAgICAgICAgIAogICAgICAgcmV0dXJuIHczY19zbGlkeS5jYW5jZWwoZXZlbnQpOwogICAgICB9CiAgICB9CiAgICBlbHNlIGlmIChrZXkgPT0gMTg4KSAgLy8gPCBmb3Igc21hbGxlciBmb250cwogICAgewogICAgICB3M2Nfc2xpZHkuc21hbGxlcigpOwogICAgICByZXR1cm4gdzNjX3NsaWR5LmNhbmNlbChldmVudCk7CiAgICB9CiAgICBlbHNlIGlmIChrZXkgPT0gMTkwKSAgLy8gPiBmb3IgbGFyZ2VyIGZvbnRzCiAgICB7CiAgICAgIHczY19zbGlkeS5iaWdnZXIoKTsKICAgICAgcmV0dXJuIHczY19zbGlkeS5jYW5jZWwoZXZlbnQpOwogICAgfQogICAgZWxzZSBpZiAoa2V5ID09IDE4OSB8fCBrZXkgPT0gMTA5KSAgLy8gLSBmb3Igc21hbGxlciBmb250cwogICAgewogICAgICB3M2Nfc2xpZHkuc21hbGxlcigpOwogICAgICByZXR1cm4gdzNjX3NsaWR5LmNhbmNlbChldmVudCk7CiAgICB9CiAgICBlbHNlIGlmIChrZXkgPT0gMTg3IHx8IGtleSA9PSAxOTEgfHwga2V5ID09IDEwNykgIC8vID0gKyAgZm9yIGxhcmdlciBmb250cwogICAgewogICAgICB3M2Nfc2xpZHkuYmlnZ2VyKCk7CiAgICAgIHJldHVybiB3M2Nfc2xpZHkuY2FuY2VsKGV2ZW50KTsKICAgIH0KICAgIGVsc2UgaWYgKGtleSA9PSA4MykgIC8vIFMgZm9yIHNtYWxsZXIgZm9udHMKICAgIHsKICAgICAgdzNjX3NsaWR5LnNtYWxsZXIoKTsKICAgICAgcmV0dXJuIHczY19zbGlkeS5jYW5jZWwoZXZlbnQpOwogICAgfQogICAgZWxzZSBpZiAoa2V5ID09IDY2KSAgLy8gQiBmb3IgbGFyZ2VyIGZvbnRzCiAgICB7CiAgICAgIHczY19zbGlkeS5iaWdnZXIoKTsKICAgICAgcmV0dXJuIHczY19zbGlkeS5jYW5jZWwoZXZlbnQpOwogICAgfQogICAgZWxzZSBpZiAoa2V5ID09IDkwKSAgLy8gWiBmb3IgbGFzdCBzbGlkZQogICAgewogICAgICB3M2Nfc2xpZHkubGFzdF9zbGlkZSgpOwogICAgICByZXR1cm4gdzNjX3NsaWR5LmNhbmNlbChldmVudCk7CiAgICB9CiAgICBlbHNlIGlmIChrZXkgPT0gNzApICAvLyBGIGZvciB0b2dnbGUgdG9vbGJhcgogICAgewogICAgICB3M2Nfc2xpZHkudG9nZ2xlX3Rvb2xiYXIoKTsKICAgICAgcmV0dXJuIHczY19zbGlkeS5jYW5jZWwoZXZlbnQpOwogICAgfQogICAgZWxzZSBpZiAoa2V5ID09IDY1KSAgLy8gQSBmb3IgdG9nZ2xlIHZpZXcgc2luZ2xlL2FsbCBzbGlkZXMKICAgIHsKICAgICAgdzNjX3NsaWR5LnRvZ2dsZV92aWV3KCk7CiAgICAgIHJldHVybiB3M2Nfc2xpZHkuY2FuY2VsKGV2ZW50KTsKICAgIH0KICAgIGVsc2UgaWYgKGtleSA9PSA3NSkgIC8vIHRvZ2dsZSBhY3Rpb24gb2YgbGVmdCBjbGljayBmb3IgbmV4dCBwYWdlCiAgICB7CiAgICAgIHczY19zbGlkeS5tb3VzZV9jbGlja19lbmFibGVkID0gIXczY19zbGlkeS5tb3VzZV9jbGlja19lbmFibGVkOwogICAgICB2YXIgYWxlcnRfbXNnID0gKHczY19zbGlkeS5tb3VzZV9jbGlja19lbmFibGVkID8KICAgICAgICAgICAgICAgICJlbmFibGVkIiA6ICJkaXNhYmxlZCIpICsgICIgbW91c2UgY2xpY2sgYWR2YW5jZSI7CgogICAgICBhbGVydCh3M2Nfc2xpZHkubG9jYWxpemUoYWxlcnRfbXNnKSk7CiAgICAgIHJldHVybiB3M2Nfc2xpZHkuY2FuY2VsKGV2ZW50KTsKICAgIH0KICAgIGVsc2UgaWYgKGtleSA9PSA4NCB8fCBrZXkgPT0gNjcpICAvLyBUIG9yIEMgZm9yIHRhYmxlIG9mIGNvbnRlbnRzCiAgICB7CiAgICAgIGlmICh3M2Nfc2xpZHkudG9jKQogICAgICAgIHczY19zbGlkeS50b2dnbGVfdGFibGVfb2ZfY29udGVudHMoKTsKCiAgICAgIHJldHVybiB3M2Nfc2xpZHkuY2FuY2VsKGV2ZW50KTsKICAgIH0KICAgIGVsc2UgaWYgKGtleSA9PSA3MikgLy8gSCBmb3IgaGVscAogICAgewogICAgICB3aW5kb3cubG9jYXRpb24gPSB3M2Nfc2xpZHkuaGVscF9wYWdlOwogICAgICByZXR1cm4gdzNjX3NsaWR5LmNhbmNlbChldmVudCk7CiAgICB9CiAgICAvL2Vsc2UgYWxlcnQoImtleSBjb2RlIGlzICIrIGtleSk7CgogICAgcmV0dXJuIHRydWU7CiAgfSwKCiAgLy8gc2FmZSBmb3IgYm90aCB0ZXh0L2h0bWwgYW5kIGFwcGxpY2F0aW9uL3hodG1sK3htbAogIGNyZWF0ZV9lbGVtZW50OiBmdW5jdGlvbiAobmFtZSkgewogICAgaWYgKHRoaXMueGh0bWwgJiYgKHR5cGVvZiBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMgIT0gJ3VuZGVmaW5lZCcpKQogICAgICByZXR1cm4gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKCJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hodG1sIiwgbmFtZSkKCiAgICByZXR1cm4gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChuYW1lKTsKICB9LAoKICBnZXRfZWxlbWVudF9zdHlsZTogZnVuY3Rpb24gKGVsZW0sIElFU3R5bGVQcm9wLCBDU1NTdHlsZVByb3ApIHsKICAgIGlmIChlbGVtLmN1cnJlbnRTdHlsZSkKICAgIHsKICAgICAgcmV0dXJuIGVsZW0uY3VycmVudFN0eWxlW0lFU3R5bGVQcm9wXTsKICAgIH0KICAgIGVsc2UgaWYgKHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKQogICAgewogICAgICB2YXIgY29tcFN0eWxlID0gd2luZG93LmdldENvbXB1dGVkU3R5bGUoZWxlbSwgIiIpOwogICAgICByZXR1cm4gY29tcFN0eWxlLmdldFByb3BlcnR5VmFsdWUoQ1NTU3R5bGVQcm9wKTsKICAgIH0KICAgIHJldHVybiAiIjsKICB9LAoKICAvLyB0aGUgc3RyaW5nIHN0ciBpcyBhIHdoaXRlc3BhY2Ugc2VwYXJhdGVkIGxpc3Qgb2YgdG9rZW5zCiAgLy8gdGVzdCBpZiBzdHIgY29udGFpbnMgYSBwYXJ0aWN1bGFyIHRva2VuLCBlLmcuICJzbGlkZSIKICBoYXNfdG9rZW46IGZ1bmN0aW9uIChzdHIsIHRva2VuKSB7CiAgICBpZiAoc3RyKQogICAgewogICAgICAvLyBkZWZpbmUgcGF0dGVybiBhcyByZWd1bGFyIGV4cHJlc3Npb24KICAgICAgdmFyIHBhdHRlcm4gPSAvXHcrL2c7CgogICAgICAvLyBjaGVjayBmb3IgbWF0Y2hlcwogICAgICAvLyBwbGFjZSByZXN1bHQgaW4gYXJyYXkKICAgICAgdmFyIHJlc3VsdCA9IHN0ci5tYXRjaChwYXR0ZXJuKTsKCiAgICAgIC8vIG5vdyBjaGVjayBpZiBkZXNpcmVkIHRva2VuIGlzIHByZXNlbnQKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCByZXN1bHQubGVuZ3RoOyBpKyspCiAgICAgIHsKICAgICAgICBpZiAocmVzdWx0W2ldID09IHRva2VuKQogICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgIH0KICAgIH0KCiAgICByZXR1cm4gZmFsc2U7CiAgfSwKCiAgZ2V0X2NsYXNzX2xpc3Q6IGZ1bmN0aW9uIChlbGVtZW50KSB7CiAgICBpZiAodHlwZW9mIGVsZW1lbnQuY2xhc3NOYW1lICE9ICd1bmRlZmluZWQnKQogICAgICByZXR1cm4gZWxlbWVudC5jbGFzc05hbWU7CgogICAgcmV0dXJuIGVsZW1lbnQuZ2V0QXR0cmlidXRlKCJjbGFzcyIpOwogIH0sCgogIGhhc19jbGFzczogZnVuY3Rpb24gKGVsZW1lbnQsIG5hbWUpIHsKICAgIGlmIChlbGVtZW50Lm5vZGVUeXBlICE9IDEpCiAgICAgIHJldHVybiBmYWxzZTsKCiAgICB2YXIgcmVnZXhwID0gbmV3IFJlZ0V4cCgiKF58ICkiICsgbmFtZSArICJcVyoiKTsKCiAgICBpZiAodHlwZW9mIGVsZW1lbnQuY2xhc3NOYW1lICE9ICd1bmRlZmluZWQnKQogICAgICByZXR1cm4gcmVnZXhwLnRlc3QoZWxlbWVudC5jbGFzc05hbWUpOwoKICAgIHJldHVybiByZWdleHAudGVzdChlbGVtZW50LmdldEF0dHJpYnV0ZSgiY2xhc3MiKSk7CiAgfSwKCiAgcmVtb3ZlX2NsYXNzOiBmdW5jdGlvbiAoZWxlbWVudCwgbmFtZSkgewogICAgdmFyIHJlZ2V4cCA9IG5ldyBSZWdFeHAoIihefCApIiArIG5hbWUgKyAiXFcqIik7CiAgICB2YXIgY2xzdmFsID0gIiI7CgogICAgaWYgKHR5cGVvZiBlbGVtZW50LmNsYXNzTmFtZSAhPSAndW5kZWZpbmVkJykKICAgIHsKICAgICAgY2xzdmFsID0gZWxlbWVudC5jbGFzc05hbWU7CgogICAgICBpZiAoY2xzdmFsKQogICAgICB7CiAgICAgICAgY2xzdmFsID0gY2xzdmFsLnJlcGxhY2UocmVnZXhwLCAiIik7CiAgICAgICAgZWxlbWVudC5jbGFzc05hbWUgPSBjbHN2YWw7CiAgICAgIH0KICAgIH0KICAgIGVsc2UKICAgIHsKICAgICAgY2xzdmFsID0gZWxlbWVudC5nZXRBdHRyaWJ1dGUoImNsYXNzIik7CgogICAgICBpZiAoY2xzdmFsKQogICAgICB7CiAgICAgICAgY2xzdmFsID0gY2xzdmFsLnJlcGxhY2UocmVnZXhwLCAiIik7CiAgICAgICAgZWxlbWVudC5zZXRBdHRyaWJ1dGUoImNsYXNzIiwgY2xzdmFsKTsKICAgICAgfQogICAgfQogIH0sCgogIGFkZF9jbGFzczogZnVuY3Rpb24gKGVsZW1lbnQsIG5hbWUpIHsKICAgIGlmICghdGhpcy5oYXNfY2xhc3MoZWxlbWVudCwgbmFtZSkpCiAgICB7CiAgICAgIGlmICh0eXBlb2YgZWxlbWVudC5jbGFzc05hbWUgIT0gJ3VuZGVmaW5lZCcpCiAgICAgICAgZWxlbWVudC5jbGFzc05hbWUgKz0gIiAiICsgbmFtZTsKICAgICAgZWxzZQogICAgICB7CiAgICAgICAgdmFyIGNsc3ZhbCA9IGVsZW1lbnQuZ2V0QXR0cmlidXRlKCJjbGFzcyIpOwogICAgICAgIGNsc3ZhbCA9IGNsc3ZhbCA/IGNsc3ZhbCArICIgIiArIG5hbWUgOiBuYW1lOwogICAgICAgIGVsZW1lbnQuc2V0QXR0cmlidXRlKCJjbGFzcyIsIGNsc3ZhbCk7CiAgICAgIH0KICAgIH0KICB9LAoKICAvLyBIVE1MIGVsZW1lbnRzIHRoYXQgY2FuIGJlIHVzZWQgd2l0aCBjbGFzcz0iaW5jcmVtZW50YWwiCiAgLy8gbm90ZSB0aGF0IHlvdSBjYW4gYWxzbyBwdXQgdGhlIGNsYXNzIG9uIGNvbnRhaW5lcnMgbGlrZQogIC8vIHVwLCBvbCwgZGwsIGFuZCBkaXYgdG8gbWFrZSB0aGVpciBjb250ZW50cyBhcHBlYXIKICAvLyBpbmNyZW1lbnRhbGx5LiBVcHBlciBjYXNlIGlzIHVzZWQgc2luY2UgdGhpcyBpcyB3aGF0CiAgLy8gYnJvd3NlcnMgcmVwb3J0IGZvciBIVE1MIG5vZGUgbmFtZXMgKHRleHQvaHRtbCkuCiAgaW5jcmVtZW50YWxfZWxlbWVudHM6IG51bGwsCiAgb2theV9mb3JfaW5jcmVtZW50YWw6IGZ1bmN0aW9uIChuYW1lKSB7CiAgICBpZiAoIXRoaXMuaW5jcmVtZW50YWxfZWxlbWVudHMpCiAgICB7CiAgICAgIHZhciBpbmNsaXN0ID0gbmV3IEFycmF5KCk7CiAgICAgIGluY2xpc3RbInAiXSA9IHRydWU7CiAgICAgIGluY2xpc3RbInByZSJdID0gdHJ1ZTsKICAgICAgaW5jbGlzdFsibGkiXSA9IHRydWU7CiAgICAgIGluY2xpc3RbImJsb2NrcXVvdGUiXSA9IHRydWU7CiAgICAgIGluY2xpc3RbImR0Il0gPSB0cnVlOwogICAgICBpbmNsaXN0WyJkZCJdID0gdHJ1ZTsKICAgICAgaW5jbGlzdFsiaDIiXSA9IHRydWU7CiAgICAgIGluY2xpc3RbImgzIl0gPSB0cnVlOwogICAgICBpbmNsaXN0WyJoNCJdID0gdHJ1ZTsKICAgICAgaW5jbGlzdFsiaDUiXSA9IHRydWU7CiAgICAgIGluY2xpc3RbImg2Il0gPSB0cnVlOwogICAgICBpbmNsaXN0WyJzcGFuIl0gPSB0cnVlOwogICAgICBpbmNsaXN0WyJhZGRyZXNzIl0gPSB0cnVlOwogICAgICBpbmNsaXN0WyJ0YWJsZSJdID0gdHJ1ZTsKICAgICAgaW5jbGlzdFsidHIiXSA9IHRydWU7CiAgICAgIGluY2xpc3RbInRoIl0gPSB0cnVlOwogICAgICBpbmNsaXN0WyJ0ZCJdID0gdHJ1ZTsKICAgICAgaW5jbGlzdFsiaW1nIl0gPSB0cnVlOwogICAgICBpbmNsaXN0WyJvYmplY3QiXSA9IHRydWU7CiAgICAgIHRoaXMuaW5jcmVtZW50YWxfZWxlbWVudHMgPSBpbmNsaXN0OwogICAgfQogICAgcmV0dXJuIHRoaXMuaW5jcmVtZW50YWxfZWxlbWVudHNbbmFtZS50b0xvd2VyQ2FzZSgpXTsKICB9LAoKICBuZXh0X2luY3JlbWVudGFsX2l0ZW06IGZ1bmN0aW9uIChub2RlKSB7CiAgICB2YXIgYnIgPSB0aGlzLmlzX3hodG1sID8gImJyIiA6ICJCUiI7CiAgICB2YXIgc2xpZGUgPSB3M2Nfc2xpZHkuc2xpZGVzW3czY19zbGlkeS5zbGlkZV9udW1iZXJdOwoKICAgIGZvciAoOzspCiAgICB7CiAgICAgIG5vZGUgPSB3M2Nfc2xpZHkubmV4dF9ub2RlKHNsaWRlLCBub2RlKTsKCiAgICAgIGlmIChub2RlID09IG51bGwgfHwgbm9kZS5wYXJlbnROb2RlID09IG51bGwpCiAgICAgICAgYnJlYWs7CgogICAgICBpZiAobm9kZS5ub2RlVHlwZSA9PSAxKSAgLy8gRUxFTUVOVAogICAgICB7CiAgICAgICAgaWYgKG5vZGUubm9kZU5hbWUgPT0gYnIpCiAgICAgICAgICBjb250aW51ZTsKCiAgICAgICAgaWYgKHczY19zbGlkeS5oYXNfY2xhc3Mobm9kZSwgImluY3JlbWVudGFsIikKICAgICAgICAgICAgICYmIHczY19zbGlkeS5va2F5X2Zvcl9pbmNyZW1lbnRhbChub2RlLm5vZGVOYW1lKSkKICAgICAgICAgIHJldHVybiBub2RlOwoKICAgICAgICBpZiAodzNjX3NsaWR5Lmhhc19jbGFzcyhub2RlLnBhcmVudE5vZGUsICJpbmNyZW1lbnRhbCIpCiAgICAgICAgICAgICAmJiAhdzNjX3NsaWR5Lmhhc19jbGFzcyhub2RlLCAibm9uLWluY3JlbWVudGFsIikpCiAgICAgICAgICByZXR1cm4gbm9kZTsKICAgICAgfQogICAgfQoKICAgIHJldHVybiBub2RlOwogIH0sCgogIHByZXZpb3VzX2luY3JlbWVudGFsX2l0ZW06IGZ1bmN0aW9uIChub2RlKSB7CiAgICB2YXIgYnIgPSB0aGlzLmlzX3hodG1sID8gImJyIiA6ICJCUiI7CiAgICB2YXIgc2xpZGUgPSB3M2Nfc2xpZHkuc2xpZGVzW3czY19zbGlkeS5zbGlkZV9udW1iZXJdOwoKICAgIGZvciAoOzspCiAgICB7CiAgICAgIG5vZGUgPSB3M2Nfc2xpZHkucHJldmlvdXNfbm9kZShzbGlkZSwgbm9kZSk7CgogICAgICBpZiAobm9kZSA9PSBudWxsIHx8IG5vZGUucGFyZW50Tm9kZSA9PSBudWxsKQogICAgICAgIGJyZWFrOwoKICAgICAgaWYgKG5vZGUubm9kZVR5cGUgPT0gMSkKICAgICAgewogICAgICAgIGlmIChub2RlLm5vZGVOYW1lID09IGJyKQogICAgICAgICAgY29udGludWU7CgogICAgICAgIGlmICh3M2Nfc2xpZHkuaGFzX2NsYXNzKG5vZGUsICJpbmNyZW1lbnRhbCIpCiAgICAgICAgICAgICAmJiB3M2Nfc2xpZHkub2theV9mb3JfaW5jcmVtZW50YWwobm9kZS5ub2RlTmFtZSkpCiAgICAgICAgICByZXR1cm4gbm9kZTsKCiAgICAgICAgaWYgKHczY19zbGlkeS5oYXNfY2xhc3Mobm9kZS5wYXJlbnROb2RlLCAiaW5jcmVtZW50YWwiKQogICAgICAgICAgICAgJiYgIXczY19zbGlkeS5oYXNfY2xhc3Mobm9kZSwgIm5vbi1pbmNyZW1lbnRhbCIpKQogICAgICAgICAgcmV0dXJuIG5vZGU7CiAgICAgIH0KICAgIH0KCiAgICByZXR1cm4gbm9kZTsKICB9LAoKICAvLyBzZXQgdmlzaWJpbGl0eSBmb3IgYWxsIGVsZW1lbnRzIG9uIGN1cnJlbnQgc2xpZGUgd2l0aAogIC8vIGEgcGFyZW50IGVsZW1lbnQgd2l0aCBhdHRyaWJ1dGUgY2xhc3M9ImluY3JlbWVudGFsIgogIHNldF92aXNpYmlsaXR5X2FsbF9pbmNyZW1lbnRhbDogZnVuY3Rpb24gKHZhbHVlKSB7CiAgICB2YXIgbm9kZSA9IHRoaXMubmV4dF9pbmNyZW1lbnRhbF9pdGVtKG51bGwpOwoKICAgIGlmICh2YWx1ZSA9PSAiaGlkZGVuIikKICAgIHsKICAgICAgd2hpbGUgKG5vZGUpCiAgICAgIHsKICAgICAgICB3M2Nfc2xpZHkuYWRkX2NsYXNzKG5vZGUsICJpbnZpc2libGUiKTsKICAgICAgICBub2RlID0gdzNjX3NsaWR5Lm5leHRfaW5jcmVtZW50YWxfaXRlbShub2RlKTsKICAgICAgfQogICAgfQogICAgZWxzZSAvLyB2YWx1ZSA9PSAidmlzaWJsZSIKICAgIHsKICAgICAgd2hpbGUgKG5vZGUpCiAgICAgIHsKICAgICAgICB3M2Nfc2xpZHkucmVtb3ZlX2NsYXNzKG5vZGUsICJpbnZpc2libGUiKTsKICAgICAgICBub2RlID0gdzNjX3NsaWR5Lm5leHRfaW5jcmVtZW50YWxfaXRlbShub2RlKTsKICAgICAgfQogICAgfQogIH0sCgogIC8vIHJldmVhbCB0aGUgbmV4dCBoaWRkZW4gaXRlbSBvbiB0aGUgc2xpZGUKICAvLyBub2RlIGlzIG51bGwgb3IgdGhlIG5vZGUgdGhhdCB3YXMgbGFzdCByZXZlYWxlZAogIHJldmVhbF9uZXh0X2l0ZW06IGZ1bmN0aW9uIChub2RlKSB7CiAgICBub2RlID0gdzNjX3NsaWR5Lm5leHRfaW5jcmVtZW50YWxfaXRlbShub2RlKTsKCiAgICBpZiAobm9kZSAmJiBub2RlLm5vZGVUeXBlID09IDEpICAvLyBhbiBlbGVtZW50CiAgICAgIHczY19zbGlkeS5yZW1vdmVfY2xhc3Mobm9kZSwgImludmlzaWJsZSIpOwoKICAgIHJldHVybiBub2RlOwogIH0sCgogIC8vIGV4YWN0IGludmVyc2Ugb2YgcmV2ZWFsTmV4dEl0ZW0obm9kZSkKICBoaWRlX3ByZXZpb3VzX2l0ZW06IGZ1bmN0aW9uIChub2RlKSB7CiAgICBpZiAobm9kZSAmJiBub2RlLm5vZGVUeXBlID09IDEpICAvLyBhbiBlbGVtZW50CiAgICAgIHczY19zbGlkeS5hZGRfY2xhc3Mobm9kZSwgImludmlzaWJsZSIpOwoKICAgIHJldHVybiB0aGlzLnByZXZpb3VzX2luY3JlbWVudGFsX2l0ZW0obm9kZSk7CiAgfSwKCiAgLy8gbGVmdCB0byByaWdodCB0cmF2ZXJzYWwgb2Ygcm9vdCdzIGNvbnRlbnQKICBuZXh0X25vZGU6IGZ1bmN0aW9uIChyb290LCBub2RlKSB7CiAgICBpZiAobm9kZSA9PSBudWxsKQogICAgICByZXR1cm4gcm9vdC5maXJzdENoaWxkOwoKICAgIGlmIChub2RlLmZpcnN0Q2hpbGQpCiAgICAgIHJldHVybiBub2RlLmZpcnN0Q2hpbGQ7CgogICAgaWYgKG5vZGUubmV4dFNpYmxpbmcpCiAgICAgIHJldHVybiBub2RlLm5leHRTaWJsaW5nOwoKICAgIGZvciAoOzspCiAgICB7CiAgICAgIG5vZGUgPSBub2RlLnBhcmVudE5vZGU7CgogICAgICBpZiAoIW5vZGUgfHwgbm9kZSA9PSByb290KQogICAgICAgIGJyZWFrOwoKICAgICAgaWYgKG5vZGUgJiYgbm9kZS5uZXh0U2libGluZykKICAgICAgICByZXR1cm4gbm9kZS5uZXh0U2libGluZzsKICAgIH0KCiAgICByZXR1cm4gbnVsbDsKICB9LAoKICAvLyByaWdodCB0byBsZWZ0IHRyYXZlcnNhbCBvZiByb290J3MgY29udGVudAogIHByZXZpb3VzX25vZGU6IGZ1bmN0aW9uIChyb290LCBub2RlKSB7CiAgICBpZiAobm9kZSA9PSBudWxsKQogICAgewogICAgICBub2RlID0gcm9vdC5sYXN0Q2hpbGQ7CgogICAgICBpZiAobm9kZSkKICAgICAgewogICAgICAgIHdoaWxlIChub2RlLmxhc3RDaGlsZCkKICAgICAgICAgIG5vZGUgPSBub2RlLmxhc3RDaGlsZDsKICAgICAgfQoKICAgICAgcmV0dXJuIG5vZGU7CiAgICB9CgogICAgaWYgKG5vZGUucHJldmlvdXNTaWJsaW5nKQogICAgewogICAgICBub2RlID0gbm9kZS5wcmV2aW91c1NpYmxpbmc7CgogICAgICB3aGlsZSAobm9kZS5sYXN0Q2hpbGQpCiAgICAgICAgbm9kZSA9IG5vZGUubGFzdENoaWxkOwoKICAgICAgcmV0dXJuIG5vZGU7CiAgICB9CgogICAgaWYgKG5vZGUucGFyZW50Tm9kZSAhPSByb290KQogICAgICByZXR1cm4gbm9kZS5wYXJlbnROb2RlOwoKICAgIHJldHVybiBudWxsOwogIH0sCgogIHByZXZpb3VzX3NpYmxpbmdfZWxlbWVudDogZnVuY3Rpb24gKGVsKSB7CiAgICBlbCA9IGVsLnByZXZpb3VzU2libGluZzsKCiAgICB3aGlsZSAoZWwgJiYgZWwubm9kZVR5cGUgIT0gMSkKICAgICAgZWwgPSBlbC5wcmV2aW91c1NpYmxpbmc7CgogICAgcmV0dXJuIGVsOwogIH0sCgogIG5leHRfc2libGluZ19lbGVtZW50OiBmdW5jdGlvbiAoZWwpIHsKICAgIGVsID0gZWwubmV4dFNpYmxpbmc7CgogICAgd2hpbGUgKGVsICYmIGVsLm5vZGVUeXBlICE9IDEpCiAgICAgIGVsID0gZWwubmV4dFNpYmxpbmc7CgogICAgcmV0dXJuIGVsOwogIH0sCgogIGZpcnN0X2NoaWxkX2VsZW1lbnQ6IGZ1bmN0aW9uIChlbCkgewogICAgdmFyIG5vZGU7CgogICAgZm9yIChub2RlID0gZWwuZmlyc3RDaGlsZDsgbm9kZTsgbm9kZSA9IG5vZGUubmV4dFNpYmxpbmcpCiAgICB7CiAgICAgIGlmIChub2RlLm5vZGVUeXBlID09IDEpCiAgICAgICAgYnJlYWs7CiAgICB9CgogICAgcmV0dXJuIG5vZGU7CiAgfSwKCiAgZmlyc3RfdGFnOiBmdW5jdGlvbiAoZWxlbWVudCwgdGFnKSB7CiAgICB2YXIgbm9kZTsKCiAgICBpZiAoIXRoaXMuaXNfeGh0bWwpCiAgICAgIHRhZyA9IHRhZy50b1VwcGVyQ2FzZSgpOwoKICAgIGZvciAobm9kZSA9IGVsZW1lbnQuZmlyc3RDaGlsZDsgbm9kZTsgbm9kZSA9IG5vZGUubmV4dFNpYmxpbmcpCiAgICB7CiAgICAgIGlmIChub2RlLm5vZGVUeXBlID09IDEgJiYgbm9kZS5ub2RlTmFtZSA9PSB0YWcpCiAgICAgICAgYnJlYWs7CiAgICB9CgogICAgcmV0dXJuIG5vZGU7CiAgfSwKCiAgaGlkZV9zZWxlY3Rpb246IGZ1bmN0aW9uICgpIHsKICAgIGlmICh3aW5kb3cuZ2V0U2VsZWN0aW9uKSAvLyBGaXJlZm94LCBDaHJvbWl1bSwgU2FmYXJpLCBPcGVyYQogICAgewogICAgICB2YXIgc2VsZWN0aW9uID0gd2luZG93LmdldFNlbGVjdGlvbigpOwoKICAgICAgaWYgKHNlbGVjdGlvbi5yYW5nZUNvdW50ID4gMCkKICAgICAgewogICAgICAgIHZhciByYW5nZSA9IHNlbGVjdGlvbi5nZXRSYW5nZUF0KDApOwogICAgICAgIHJhbmdlLmNvbGxhcHNlIChmYWxzZSk7CiAgICAgIH0KICAgIH0KICAgIGVsc2UgLy8gSW50ZXJuZXQgRXhwbG9yZXIKICAgIHsKICAgICAgdmFyIHRleHRSYW5nZSA9IGRvY3VtZW50LnNlbGVjdGlvbi5jcmVhdGVSYW5nZSAoKTsKICAgICAgdGV4dFJhbmdlLmNvbGxhcHNlIChmYWxzZSk7CiAgICB9CiAgfSwKCiAgZ2V0X3NlbGVjdGVkX3RleHQ6IGZ1bmN0aW9uICgpIHsKICAgIHRyeQogICAgewogICAgICBpZiAod2luZG93LmdldFNlbGVjdGlvbikKICAgICAgICByZXR1cm4gd2luZG93LmdldFNlbGVjdGlvbigpLnRvU3RyaW5nKCk7CgogICAgICBpZiAoZG9jdW1lbnQuZ2V0U2VsZWN0aW9uKQogICAgICAgIHJldHVybiBkb2N1bWVudC5nZXRTZWxlY3Rpb24oKS50b1N0cmluZygpOwoKICAgICAgaWYgKGRvY3VtZW50LnNlbGVjdGlvbikKICAgICAgICByZXR1cm4gZG9jdW1lbnQuc2VsZWN0aW9uLmNyZWF0ZVJhbmdlKCkudGV4dDsKICAgIH0KICAgIGNhdGNoIChlKQogICAgewogICAgfQoKICAgIHJldHVybiAiIjsKICB9LAoKICAvLyBtYWtlIG5vdGUgb2YgbGVuZ3RoIG9mIHNlbGVjdGVkIHRleHQKICAvLyBhcyB0aGlzIGV2YWx1YXRlcyB0byB6ZXJvIGluIGNsaWNrIGV2ZW50CiAgbW91c2VfYnV0dG9uX3VwOiBmdW5jdGlvbiAoZSkgewogICAgdzNjX3NsaWR5LnNlbGVjdGVkX3RleHRfbGVuID0gdzNjX3NsaWR5LmdldF9zZWxlY3RlZF90ZXh0KCkubGVuZ3RoOwogIH0sCgogIG1vdXNlX2J1dHRvbl9kb3duOiBmdW5jdGlvbiAoZSkgewogICAgdzNjX3NsaWR5LnNlbGVjdGVkX3RleHRfbGVuID0gdzNjX3NsaWR5LmdldF9zZWxlY3RlZF90ZXh0KCkubGVuZ3RoOwogICAgdzNjX3NsaWR5Lm1vdXNlX3ggPSBlLmNsaWVudFg7CiAgICB3M2Nfc2xpZHkubW91c2VfeSA9IGUuY2xpZW50WTsKICB9LAoKICAvLyByaWdodCBtb3VzZSBidXR0b24gY2xpY2sgaXMgcmVzZXJ2ZWQgZm9yIGNvbnRleHQgbWVudXMKICAvLyBpdCBpcyBtb3JlIHJlbGlhYmxlIHRvIGRldGVjdCByaWdodGNsaWNrIHRoYW4gbGVmdGNsaWNrCiAgbW91c2VfYnV0dG9uX2NsaWNrOiBmdW5jdGlvbiAoZSkgewogICAgaWYgKCFlKQogICAgICB2YXIgZSA9IHdpbmRvdy5ldmVudDsKCiAgICBpZiAoTWF0aC5hYnMoZS5jbGllbnRYIC13M2Nfc2xpZHkubW91c2VfeCkgKwogICAgICAgIE1hdGguYWJzKGUuY2xpZW50WSAtdzNjX3NsaWR5Lm1vdXNlX3kpID4gMTApCiAgICAgIHJldHVybiB0cnVlOwoKICAgIGlmICh3M2Nfc2xpZHkuc2VsZWN0ZWRfdGV4dF9sZW4gPiAwKQogICAgICByZXR1cm4gdHJ1ZTsKCiAgICB2YXIgcmlnaHRjbGljayA9IGZhbHNlOwogICAgdmFyIGxlZnRjbGljayA9IGZhbHNlOwogICAgdmFyIG1pZGRsZWNsaWNrID0gZmFsc2U7CiAgICB2YXIgdGFyZ2V0OwoKICAgIGlmICghZSkKICAgICAgdmFyIGUgPSB3aW5kb3cuZXZlbnQ7CgogICAgaWYgKGUudGFyZ2V0KQogICAgICB0YXJnZXQgPSBlLnRhcmdldDsKICAgIGVsc2UgaWYgKGUuc3JjRWxlbWVudCkKICAgICAgdGFyZ2V0ID0gZS5zcmNFbGVtZW50OwoKICAgIC8vIHdvcmsgYXJvdW5kIFNhZmFyaSBidWcKICAgIGlmICh0YXJnZXQubm9kZVR5cGUgPT0gMykKICAgICAgdGFyZ2V0ID0gdGFyZ2V0LnBhcmVudE5vZGU7CgogICAgaWYgKGUud2hpY2gpIC8vIGFsbCBicm93c2VycyBleGNlcHQgSUUKICAgIHsKICAgICAgbGVmdGNsaWNrID0gKGUud2hpY2ggPT0gMSk7CiAgICAgIG1pZGRsZWNsaWNrID0gKGUud2hpY2ggPT0gMik7CiAgICAgIHJpZ2h0Y2xpY2sgPSAoZS53aGljaCA9PSAzKTsKICAgIH0KICAgIGVsc2UgaWYgKGUuYnV0dG9uKQogICAgewogICAgICAvLyBLb25xdWVyb3IgZ2l2ZXMgMSBmb3IgbGVmdCwgNCBmb3IgbWlkZGxlCiAgICAgIC8vIElFNiBnaXZlcyAwIGZvciBsZWZ0IGFuZCBub3QgMSBhcyBJIGV4cGVjdGVkCgogICAgICBpZiAoZS5idXR0b24gPT0gNCkKICAgICAgICBtaWRkbGVjbGljayA9IHRydWU7CgogICAgICAvLyBhbGwgYnJvd3NlcnMgYWdyZWUgb24gMiBmb3IgcmlnaHQgYnV0dG9uCiAgICAgIHJpZ2h0Y2xpY2sgPSAoZS5idXR0b24gPT0gMik7CiAgICB9CiAgICBlbHNlCiAgICAgIGxlZnRjbGljayA9IHRydWU7CgogICAgaWYgKHczY19zbGlkeS5zZWxlY3RlZF90ZXh0X2xlbiA+IDApCiAgICB7CiAgICAgIHczY19zbGlkeS5zdG9wX3Byb3BhZ2F0aW9uKGUpOwogICAgICBlLmNhbmNlbCA9IHRydWU7CiAgICAgIGUucmV0dXJuVmFsdWUgPSBmYWxzZTsKICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQoKICAgIC8vIGRpc21pc3MgdGFibGUgb2YgY29udGVudHMKICAgIHczY19zbGlkeS5oaWRlX3RhYmxlX29mX2NvbnRlbnRzKGZhbHNlKTsKCiAgICAvLyBjaGVjayBpZiB0YXJnZXQgaXMgc29tZXRoaW5nIHRoYXQgcHJvYmFibHkgd2FudCdzIGNsaWNrcwogICAgLy8gZS5nLiBhLCBlbWJlZCwgb2JqZWN0LCBpbnB1dCwgdGV4dGFyZWEsIHNlbGVjdCwgb3B0aW9uCiAgICB2YXIgdGFnID0gdGFyZ2V0Lm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7CgogICAgaWYgKHczY19zbGlkeS5tb3VzZV9jbGlja19lbmFibGVkICYmIGxlZnRjbGljayAmJgogICAgICAgICF3M2Nfc2xpZHkuc3BlY2lhbF9lbGVtZW50KHRhcmdldCkgJiYKICAgICAgICAhdGFyZ2V0Lm9uY2xpY2spCiAgICB7CiAgICAgIHczY19zbGlkeS5uZXh0X3NsaWRlKHRydWUpOwogICAgICB3M2Nfc2xpZHkuc3RvcF9wcm9wYWdhdGlvbihlKTsKICAgICAgZS5jYW5jZWwgPSB0cnVlOwogICAgICBlLnJldHVyblZhbHVlID0gZmFsc2U7CiAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KCiAgICByZXR1cm4gdHJ1ZTsKICB9LAoKICBzcGVjaWFsX2VsZW1lbnQ6IGZ1bmN0aW9uIChlbGVtZW50KSB7CiAgICBpZiAodGhpcy5oYXNfY2xhc3MoZWxlbWVudCwgIm5vbi1pbnRlcmFjdGl2ZSIpKQogICAgICByZXR1cm4gZmFsc2U7CgogICAgdmFyIHRhZyA9IGVsZW1lbnQubm9kZU5hbWUudG9Mb3dlckNhc2UoKTsKCiAgICByZXR1cm4gZWxlbWVudC5vbmtleWRvd24gfHwKICAgICAgZWxlbWVudC5vbmNsaWNrIHx8CiAgICAgIHRhZyA9PSAiYSIgfHwKICAgICAgdGFnID09ICJlbWJlZCIgfHwKICAgICAgdGFnID09ICJvYmplY3QiIHx8CiAgICAgIHRhZyA9PSAidmlkZW8iIHx8CiAgICAgIHRhZyA9PSAiYXVkaW8iIHx8CiAgICAgIHRhZyA9PSAic3ZnIiB8fAogICAgICB0YWcgPT0gImNhbnZhcyIgfHwKICAgICAgdGFnID09ICJpbnB1dCIgfHwKICAgICAgdGFnID09ICJ0ZXh0YXJlYSIgfHwKICAgICAgdGFnID09ICJzZWxlY3QiIHx8CiAgICAgIHRhZyA9PSAib3B0aW9uIjsKICB9LAoKICBzbGlkeV9jaHJvbWU6IGZ1bmN0aW9uIChlbCkgewogICAgd2hpbGUgKGVsKQogICAgewogICAgICBpZiAoZWwgPT0gdzNjX3NsaWR5LnRvYyB8fAogICAgICAgICAgZWwgPT0gdzNjX3NsaWR5LnRvb2xiYXIgfHwKICAgICAgICAgIHczY19zbGlkeS5oYXNfY2xhc3MoZWwsICJvdXRsaW5lIikpCiAgICAgICAgcmV0dXJuIHRydWU7CgogICAgICBlbCA9IGVsLnBhcmVudE5vZGU7CiAgICB9CgogICAgcmV0dXJuIGZhbHNlOwogIH0sCgogIGdldF9rZXk6IGZ1bmN0aW9uIChlKQogIHsKICAgIHZhciBrZXk7CgogICAgLy8ga2x1ZGdlIGFyb3VuZCBOUy9JRSBkaWZmZXJlbmNlcyAKICAgIGlmICh0eXBlb2Ygd2luZG93LmV2ZW50ICE9ICJ1bmRlZmluZWQiKQogICAgICBrZXkgPSB3aW5kb3cuZXZlbnQua2V5Q29kZTsKICAgIGVsc2UgaWYgKGUud2hpY2gpCiAgICAgIGtleSA9IGUud2hpY2g7CgogICAgcmV0dXJuIGtleTsKICB9LAoKICBnZXRfdGFyZ2V0OiBmdW5jdGlvbiAoZSkgewogICAgdmFyIHRhcmdldDsKCiAgICBpZiAoIWUpCiAgICAgIGUgPSB3aW5kb3cuZXZlbnQ7CgogICAgaWYgKGUudGFyZ2V0KQogICAgICB0YXJnZXQgPSBlLnRhcmdldDsKICAgIGVsc2UgaWYgKGUuc3JjRWxlbWVudCkKICAgICAgdGFyZ2V0ID0gZS5zcmNFbGVtZW50OwoKICAgIGlmICh0YXJnZXQubm9kZVR5cGUgIT0gMSkKICAgICAgdGFyZ2V0ID0gdGFyZ2V0LnBhcmVudE5vZGU7CgogICAgcmV0dXJuIHRhcmdldDsKICB9LAoKICAvLyBkb2VzIGRpc3BsYXkgcHJvcGVydHkgcHJvdmlkZSBjb3JyZWN0IGRlZmF1bHRzPwogIGlzX2Jsb2NrOiBmdW5jdGlvbiAoZWxlbSkgewogICAgdmFyIHRhZyA9IGVsZW0ubm9kZU5hbWUudG9Mb3dlckNhc2UoKTsKCiAgICByZXR1cm4gdGFnID09ICJvbCIgfHwgdGFnID09ICJ1bCIgfHwgdGFnID09ICJwIiB8fCB0YWcgPT0gImRsIiB8fAogICAgICAgICAgIHRhZyA9PSAibGkiIHx8IHRhZyA9PSAidGFibGUiIHx8IHRhZyA9PSAicHJlIiB8fAogICAgICAgICAgIHRhZyA9PSAiaDEiIHx8IHRhZyA9PSAiaDIiIHx8IHRhZyA9PSAiaDMiIHx8CiAgICAgICAgICAgdGFnID09ICJoNCIgfHwgdGFnID09ICJoNSIgfHwgdGFnID09ICJoNiIgfHwKICAgICAgICAgICB0YWcgPT0gImJsb2NrcXVvdGUiIHx8IHRhZyA9PSAiYWRkcmVzcyI7IAogIH0sCgogIGFkZF9saXN0ZW5lcjogZnVuY3Rpb24gKGVsZW1lbnQsIGV2ZW50LCBoYW5kbGVyKSB7CiAgICBpZiAod2luZG93LmFkZEV2ZW50TGlzdGVuZXIpCiAgICAgIGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihldmVudCwgaGFuZGxlciwgZmFsc2UpOwogICAgZWxzZQogICAgICBlbGVtZW50LmF0dGFjaEV2ZW50KCJvbiIrZXZlbnQsIGhhbmRsZXIpOwogIH0sCgogIC8vIHVzZWQgdG8gcHJldmVudCBldmVudCBwcm9wYWdhdGlvbiBmcm9tIGZpZWxkIGNvbnRyb2xzCiAgc3RvcF9wcm9wYWdhdGlvbjogZnVuY3Rpb24gKGV2ZW50KSB7CiAgICBldmVudCA9IGV2ZW50ID8gZXZlbnQgOiB3aW5kb3cuZXZlbnQ7CiAgICBldmVudC5jYW5jZWxCdWJibGUgPSB0cnVlOyAgLy8gZm9yIElFCgogICAgaWYgKGV2ZW50LnN0b3BQcm9wYWdhdGlvbikKICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7CgogICAgcmV0dXJuIHRydWU7CiAgfSwKCiAgY2FuY2VsOiBmdW5jdGlvbiAoZXZlbnQpIHsKICAgIGlmIChldmVudCkKICAgIHsKICAgICAgIGV2ZW50LmNhbmNlbCA9IHRydWU7CiAgICAgICBldmVudC5yZXR1cm5WYWx1ZSA9IGZhbHNlOwoKICAgICAgaWYgKGV2ZW50LnByZXZlbnREZWZhdWx0KQogICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7CiAgICB9CgogICAgdzNjX3NsaWR5LmtleV93YW50ZWQgPSBmYWxzZTsKICAgIHJldHVybiBmYWxzZTsKICB9LAoKLy8gZm9yIGVhY2ggbGFuZ3VhZ2UgZGVmaW5lIGFuIGFzc29jaWF0aXZlIGFycmF5Ci8vIGFuZCBhbHNvIHRoZSBoZWxwIHRleHQgd2hpY2ggaXMgbG9uZ2VyCgogIHN0cmluZ3NfZXM6IHsKICAgICJzbGlkZSI6InDDoWcuIiwKICAgICJoZWxwPyI6IkF5dWRhIiwKICAgICJjb250ZW50cz8iOiLDjW5kaWNlIiwKICAgICJ0YWJsZSBvZiBjb250ZW50cyI6InRhYmxhIGRlIGNvbnRlbmlkb3MiLAogICAgIlRhYmxlIG9mIENvbnRlbnRzIjoiVGFibGEgZGUgQ29udGVuaWRvcyIsCiAgICAicmVzdGFydCBwcmVzZW50YXRpb24iOiJSZWluaWNpYXIgcHJlc2VudGFjacOzbiIsCiAgICAicmVzdGFydD8iOiJJbmljaW8iCiAgfSwKICBoZWxwX2VzOgogICAgIlV0aWxpY2UgZWwgcmF0w7NuLCBiYXJyYSBlc3BhY2lhZG9yYSwgdGVjbGFzIEl6ZGEvRGNoYSwgIiArCiAgICAibyBSZSBww6FnIHkgQXYgcMOhZy4gVXNlIFMgeSBCIHBhcmEgY2FtYmlhciBlbCB0YW1hw7FvIGRlIGZ1ZW50ZS4iLAoKICBzdHJpbmdzX2NhOiB7CiAgICAic2xpZGUiOiJww6BnLi4iLAogICAgImhlbHA/IjoiQWp1ZGEiLAogICAgImNvbnRlbnRzPyI6IsONbmRleCIsCiAgICAidGFibGUgb2YgY29udGVudHMiOiJ0YXVsYSBkZSBjb250aW5ndXRzIiwKICAgICJUYWJsZSBvZiBDb250ZW50cyI6IlRhdWxhIGRlIENvbnRpbmd1dHMiLAogICAgInJlc3RhcnQgcHJlc2VudGF0aW9uIjoiUmVpbmljaWFyIHByZXNlbnRhY2nDsyIsCiAgICAicmVzdGFydD8iOiJJbmljaSIKICB9LAogIGhlbHBfY2E6CiAgICAiVXRpbGl0emkgZWwgcmF0b2zDrSwgYmFycmEgZXNwYWlhZG9yYSwgdGVjbGVzIEVzcS4vRHRhLiAiICsKICAgICJvIFJlIHDDoGcgeSBBdiBww6BnLiBVc2kgUyBpIEIgcGVyIGNhbnZpYXIgZ3JhbmTDoHJpYSBkZSBmb250LiIsCgogIHN0cmluZ3NfY3M6IHsKICAgICJzbGlkZSI6InNuw61tZWsiLAogICAgImhlbHA/IjoibsOhcG92xJtkYSIsCiAgICAiY29udGVudHM/Ijoib2JzYWgiLAogICAgInRhYmxlIG9mIGNvbnRlbnRzIjoib2JzYWggcHJlemVudGFjZSIsCiAgICAiVGFibGUgb2YgQ29udGVudHMiOiJPYnNhaCBwcmV6ZW50YWNlIiwKICAgICJyZXN0YXJ0IHByZXNlbnRhdGlvbiI6Inpub3Z1IHNwdXN0aXQgcHJlemVudGFjaSIsCiAgICAicmVzdGFydD8iOiJyZXN0YXJ0IgogIH0sCiAgaGVscF9jczoKICAgICJQcmV6ZW50YWNpIG3Fr8W+ZXRlIHByb2Now6F6ZXQgcG9tb2PDrSBrbGlrbnV0w60gbXnFoWksIG1lemVybsOta3UsICIgKwogICAgIsWhaXBlayB2bGV2byBhIHZwcmF2byBuZWJvIGtsw6F2ZXMgUGFnZVVwIGEgUGFnZURvd24uIFDDrXNtbyBzZSAiICsKICAgICJkw6EgenbEm3TFoWl0IGEgem1lbsWhaXQgcG9tb2PDrSBrbMOhdmVzIEIgYSBTLiIsCgogIHN0cmluZ3Nfbmw6IHsKICAgICJzbGlkZSI6InBhZ2luYSIsCiAgICAiaGVscD8iOiJIZWxwPyIsCiAgICAiY29udGVudHM/IjoiSW5ob3VkPyIsCiAgICAidGFibGUgb2YgY29udGVudHMiOiJpbmhvdWRzb3BnYXZlIiwKICAgICJUYWJsZSBvZiBDb250ZW50cyI6IkluaG91ZHNvcGdhdmUiLAogICAgInJlc3RhcnQgcHJlc2VudGF0aW9uIjoiaGVyc3RhcnQgcHJlc2VudGF0aWUiLAogICAgInJlc3RhcnQ/IjoiSGVyc3RhcnQ/IgogIH0sCiAgaGVscF9ubDoKICAgICAiTmF2aWdlZXIgZC5tLnYuIGhldCBtdWlzLCBzcGF0aWViYXIsIExpbmtzL1JlY2h0cyB0b2V0c2VuLCAiICsKICAgICAib2YgUGdVcCBlbiBQZ0RuLiBHZWJydWlrIFMgZW4gQiBvbSBkZSBrYXJha3Rlcmdyb290dGUgdGUgdmVyYW5kZXJlbi4iLAoKICBzdHJpbmdzX2RlOiB7CiAgICAic2xpZGUiOiJTZWl0ZSIsCiAgICAiaGVscD8iOiJIaWxmZSIsCiAgICAiY29udGVudHM/Ijoiw5xiZXJzaWNodCIsCiAgICAidGFibGUgb2YgY29udGVudHMiOiJJbmhhbHRzdmVyemVpY2huaXMiLAogICAgIlRhYmxlIG9mIENvbnRlbnRzIjoiSW5oYWx0c3ZlcnplaWNobmlzIiwKICAgICJyZXN0YXJ0IHByZXNlbnRhdGlvbiI6IlByw6RzZW50YXRpb24gbmV1IHN0YXJ0ZW4iLAogICAgInJlc3RhcnQ/IjoiTmV1c3RhcnQiCiAgfSwKICBoZWxwX2RlOgogICAgIkJlbnV0emVuIFNpZSBkaWUgTWF1cywgTGVlcnNjaGxhZywgZGllIEN1cnNvcnRhc3RlbiBsaW5rcy9yZWNodHMgb2RlciAiICsKICAgICJQYWdlIHVwL1BhZ2UgRG93biB6dW0gV2VjaHNlbG4gZGVyIFNlaXRlbiB1bmQgUyB1bmQgQiBmw7xyIGRpZSBTY2hyaWZ0Z3LDtnNzZS4iLAoKICBzdHJpbmdzX3BsOiB7CiAgICAic2xpZGUiOiJzbGFqZCIsCiAgICAiaGVscD8iOiJwb21vYz8iLAogICAgImNvbnRlbnRzPyI6InNwaXMgdHJlxZtjaT8iLAogICAgInRhYmxlIG9mIGNvbnRlbnRzIjoic3BpcyB0cmXFm2NpIiwKICAgICJUYWJsZSBvZiBDb250ZW50cyI6IlNwaXMgVHJlxZtjaSIsCiAgICAicmVzdGFydCBwcmVzZW50YXRpb24iOiJSZXN0YXJ0dWogcHJlemVudGFjasSZIiwKICAgICJyZXN0YXJ0PyI6InJlc3RhcnQ/IgogIH0sCiAgaGVscF9wbDoKICAgICJabWllbmlhaiBzbGFqZHkga2xpa2FqxIVjIG15c3rEhSwgbmFjaXNrYWrEhWMgc3BhY2rEmSwgc3RyemHFgmtpIGxld28vcHJhd28iICsKICAgICJsdWIgUGdVcCAvIFBnRG4uIFXFvHlqIGtsYXdpc3p5IFMgaSBCLCBhYnkgem1pZW5pxIcgcm96bWlhciBjemN6aW9ua2kuIiwKCiAgc3RyaW5nc19mcjogewogICAgInNsaWRlIjoicGFnZSIsCiAgICAiaGVscD8iOiJBaWRlIiwKICAgICJjb250ZW50cz8iOiJJbmRleCIsCiAgICAidGFibGUgb2YgY29udGVudHMiOiJ0YWJsZSBkZXMgbWF0acOocmVzIiwKICAgICJUYWJsZSBvZiBDb250ZW50cyI6IlRhYmxlIGRlcyBtYXRpw6hyZXMiLAogICAgInJlc3RhcnQgcHJlc2VudGF0aW9uIjoiUmVjb21tZW5jZXIgbCdleHBvc8OpIiwKICAgICJyZXN0YXJ0PyI6IkTDqWJ1dCIKICB9LAogIGhlbHBfZnI6CiAgICAiTmF2aWd1ZXogYXZlYyBsYSBzb3VyaXMsIGxhIGJhcnJlIGQnZXNwYWNlLCBsZXMgZmzDqGNoZXMgIiArCiAgICAiZ2F1Y2hlL2Ryb2l0ZSBvdSBsZXMgdG91Y2hlcyBQZyBVcCwgUGcgRG4uIFV0aWxpc2V6ICIgKwogICAgImxlcyB0b3VjaGVzIFMgZXQgQiBwb3VyIG1vZGlmaWVyIGxhIHRhaWxsZSBkZSBsYSBwb2xpY2UuIiwKCiAgc3RyaW5nc19odTogewogICAgInNsaWRlIjoib2xkYWwiLAogICAgImhlbHA/Ijoic2Vnw610c8OpZyIsCiAgICAiY29udGVudHM/IjoidGFydGFsb20iLAogICAgInRhYmxlIG9mIGNvbnRlbnRzIjoidGFydGFsb21qZWd5esOpayIsCiAgICAiVGFibGUgb2YgQ29udGVudHMiOiJUYXJ0YWxvbWplZ3l6w6lrIiwKICAgICJyZXN0YXJ0IHByZXNlbnRhdGlvbiI6ImJlbXV0YXTDsyDDumpyYWluZMOtdMOhc2EiLAogICAgInJlc3RhcnQ/Ijoiw7pqcmFpbmTDrXTDoXMiCiAgfSwKICBoZWxwX2h1OgogICAgIkF6IG9sZGFsYWsga8O2enRpIGzDqXBrZWTDqXNoZXoga2F0dGludHNvbiBheiBlZ8OpcnJlbCwgdmFneSAiICsKICAgICJoYXN6bsOhbGphIGEgc3rDs2vDtnosIGEgYmFsLCB2YWd5IGEgam9iYiBuecOtbCwgaWxsZXR2ZSBhIFBhZ2UgRG93biwgIiArCiAgICAiUGFnZSBVcCBiaWxsZW50ecWxa2V0LiBBeiBTIMOpcyBhIEIgYmlsbGVudHnFsWtrZWwgdsOhbHRvenRhdGhhdGphICIgKwogICAgImEgc3rDtnZlZyBtw6lyZXTDqXQuIiwKCiAgc3RyaW5nc19pdDogewogICAgInNsaWRlIjoicGFnLiIsCiAgICAiaGVscD8iOiJBaXV0byIsCiAgICAiY29udGVudHM/IjoiSW5kaWNlIiwKICAgICJ0YWJsZSBvZiBjb250ZW50cyI6ImluZGljZSIsCiAgICAiVGFibGUgb2YgQ29udGVudHMiOiJJbmRpY2UiLAogICAgInJlc3RhcnQgcHJlc2VudGF0aW9uIjoiUmljb21pbmNpYXJlIGxhIHByZXNlbnRhemlvbmUiLAogICAgInJlc3RhcnQ/IjoiSW5pemlvIgogIH0sCiAgaGVscF9pdDoKICAgICJOYXZpZ2FyZSBjb24gbW91c2UsIGJhcnJhIHNwYXppbywgZnJlY2NlIHNpbmlzdHJhL2Rlc3RyYSBvICIgKwogICAgIlBnVXAgZSBQZ0RuLiBVc2FyZSBTIGUgQiBwZXIgY2FtYmlhcmUgbGEgZGltZW5zaW9uZSBkZWkgY2FyYXR0ZXJpLiIsCgogIHN0cmluZ3NfZWw6IHsKICAgICJzbGlkZSI6Is+DzrXOu86vzrTOsSIsCiAgICAiaGVscD8iOiLOss6/zq7OuM61zrnOsTsiLAogICAgImNvbnRlbnRzPyI6Is+AzrXPgc65zrXPh8+MzrzOtc69zrE7IiwKICAgICJ0YWJsZSBvZiBjb250ZW50cyI6Is+Azq/Ovc6xzrrOsc+CIM+AzrXPgc65zrXPh86/zrzOrc69z4nOvSIsCiAgICAiVGFibGUgb2YgQ29udGVudHMiOiLOoM6vzr3Osc66zrHPgiDOoM61z4HOuc61z4fOv868zq3Ovc+Jzr0iLAogICAgInJlc3RhcnQgcHJlc2VudGF0aW9uIjoizrXPgM6xzr3Otc66zrrOr869zrfPg863IM+AzrHPgc6/z4XPg86vzrHPg863z4IiLAogICAgInJlc3RhcnQ/IjoizrXPgM6xzr3Otc66zrrOr869zrfPg863OyIKICB9LAogIGhlbHBfZWw6CiAgICAizqDOu86/zrfOs863zrjOtc6vz4TOtSDOvM61IM+Ezr8gzrrOu86vzrogz4TOv8+FIM+Azr/Ovc+EzrnOus65zr/PjSwgz4TOvyBzcGFjZSwgz4TOsSDOss6tzrvOtyDOsc+BzrnPg8+EzrXPgc6sL860zrXOvs65zqwsICIgKwogICAgIs6uIFBhZ2UgVXAgzrrOsc65IFBhZ2UgRG93bi4gzqfPgc63z4POuc68zr/PgM6/zrnOrs+Dz4TOtSDPhM6xIM+AzrvOrs66z4TPgc6xIFMgzrrOsc65IEIgzrPOuc6xIM69zrEgzrHOu867zqzOvs61z4TOtSAiICsKICAgICLPhM6/IM68zq3Os861zrjOv8+CIM+EzrfPgiDOs8+BzrHOvM68zrHPhM6/z4POtc65z4HOrM+CLiIsCgogIHN0cmluZ3NfamE6IHsKICAgICJzbGlkZSI6IuOCueODqeOCpOODiSIsCiAgICAiaGVscD8iOiLjg5jjg6vjg5ciLAogICAgImNvbnRlbnRzPyI6IuebruasoSIsCiAgICAidGFibGUgb2YgY29udGVudHMiOiLnm67mrKHjgpLooajnpLoiLAogICAgIlRhYmxlIG9mIENvbnRlbnRzIjoi55uu5qyhIiwKICAgICJyZXN0YXJ0IHByZXNlbnRhdGlvbiI6IuacgOWIneOBi+OCieWGjeeUnyIsCiAgICAicmVzdGFydD8iOiLmnIDliJ3jgYvjgokiCiAgfSwKICBoZWxwX2phOgogICAgICLjg57jgqbjgrnlt6bjgq/jg6rjg4Pjgq8g44O7IOOCueODmuODvOOCuSDjg7sg5bem5Y+z44Kt44O8ICIgKwogICAgICLjgb7jgZ/jga8gUGFnZSBVcCDjg7sgUGFnZSBEb3du44Gn5pON5L2c77yMIFMg44O7IELjgafjg5Xjgqnjg7Pjg4jjgrXjgqTjgrrlpInmm7QiLAoKICBzdHJpbmdzX3poOiB7CiAgICAic2xpZGUiOiLlubvnga/niYciLAogICAgImhlbHA/Ijoi5biu5YqpPyIsCiAgICAiY29udGVudHM/Ijoi5YaF5a65PyIsCiAgICAidGFibGUgb2YgY29udGVudHMiOiLnm67lvZUiLAogICAgIlRhYmxlIG9mIENvbnRlbnRzIjoi55uu5b2VIiwKICAgICJyZXN0YXJ0IHByZXNlbnRhdGlvbiI6IumHjeaWsOWQr+WKqOWxleekuiIsCiAgICAicmVzdGFydD8iOiLph43mlrDlkK/liqg/IgogIH0sCiAgaGVscF96aDoKICAgICLnlKjpvKDmoIfngrnlh7ssIOepuuagvOadoSwg5bem5Y+z566t5aS0LCBQZyBVcCDlkowgUGcgRG4g5a+86IiqLiAiICsKICAgICLnlKggUywgQiDmlLnlj5jlrZfkvZPlpKflsI8uIiwKCiAgc3RyaW5nc19ydTogewogICAgInNsaWRlIjoi0YHQu9Cw0LnQtCIsCiAgICAiaGVscD8iOiLQv9C+0LzQvtGJ0Yw/IiwKICAgICJjb250ZW50cz8iOiLRgdC+0LTQtdGA0LbQsNC90LjQtT8iLAogICAgInRhYmxlIG9mIGNvbnRlbnRzIjoi0L7Qs9C70LDQstC70LXQvdC40LUiLAogICAgIlRhYmxlIG9mIENvbnRlbnRzIjoi0J7Qs9C70LDQstC70LXQvdC40LUiLAogICAgInJlc3RhcnQgcHJlc2VudGF0aW9uIjoi0L/QtdGA0LXQt9Cw0L/Rg9GB0YLQuNGC0Ywg0L/RgNC10LfQtdC90YLQsNGG0LjRjiIsCiAgICAicmVzdGFydD8iOiLQv9C10YDQtdC30LDQv9GD0YHQuj8iCiAgfSwKICBoZWxwX3J1OgogICAgItCf0LXRgNC10LzQtdGJ0LDQudGC0LXRgdGMINC60LvQuNC60LDRjyDQvNGL0YjQutC+0LksINC40YHQv9C+0LvRjNC30YPRjyDQutC70LDQstC40YjRgyDQv9GA0L7QsdC10LssINGB0YLRgNC10LvQutC4IiArCiAgICAi0LLQu9C10LLQvi/QstC/0YDQsNCy0L4g0LjQu9C4IFBnIFVwINC4IFBnIERuLiDQmtC70LDQstC40YjQuCBTINC4IEIg0LzQtdC90Y/RjtGCINGA0LDQt9C80LXRgCDRiNGA0LjRhNGC0LAuIiwKCiAgc3RyaW5nc19zdjogewogICAgInNsaWRlIjoic2lkYSIsCiAgICAiaGVscD8iOiJoasOkbHAiLAogICAgImNvbnRlbnRzPyI6ImlubmVow6VsbCIsCiAgICAidGFibGUgb2YgY29udGVudHMiOiJpbm5laMOlbGxzZsO2cnRlY2tuaW5nIiwKICAgICJUYWJsZSBvZiBDb250ZW50cyI6IklubmVow6VsbHNmw7ZydGVja25pbmciLAogICAgInJlc3RhcnQgcHJlc2VudGF0aW9uIjoidmlzYSBwcmVzZW50YXRpb25lbiBmcsOlbiBiw7ZyamFuIiwKICAgICJyZXN0YXJ0PyI6ImLDtnJqYSBvbSIKICB9LAogIGhlbHBfc3Y6CiAgICAiQmzDpGRkcmEgbWVkIGV0dCBrbGljayBtZWQgdsOkbnN0cmEgbXVza25hcHBlbiwgbWVsbGFuc2xhZ3N0YW5nZW50ZW4sICIgKwogICAgInbDpG5zdGVyLSBvY2ggaMO2Z2VycGlsdGFuZ2VudGVybmEgZWxsZXIgdGFuZ2VudGVybmEgUGcgVXAsIFBnIERuLiAiICsKICAgICJBbnbDpG5kIHRhbmdlbnRlcm5hIFMgb2NoIEIgZsO2ciBhdHQgw6RuZHJhIHRleHRlbnMgc3Rvcmxlay4iLAoKICBzdHJpbmdzOiB7IH0sCgogIGxvY2FsaXplOiBmdW5jdGlvbiAoc3JjKSB7CiAgICBpZiAoc3JjID09ICIiKQogICAgICByZXR1cm4gc3JjOwoKICAgICAvLyB0cnkgZnVsbCBsYW5ndWFnZSBjb2RlLCBlLmcuIGVuLVVTCiAgICAgdmFyIHMsIGxvb2t1cCA9IHczY19zbGlkeS5zdHJpbmdzW3czY19zbGlkeS5sYW5nXTsKCiAgICAgaWYgKGxvb2t1cCkKICAgICB7CiAgICAgICBzID0gbG9va3VwW3NyY107CgogICAgICAgaWYgKHMpCiAgICAgICAgcmV0dXJuIHM7CiAgICAgfQoKICAgICAvLyBzdHJpcCBjb3VudHJ5IGNvZGUgc3VmZml4LCBlLmcuCiAgICAgLy8gdHJ5IGVuIGlmIHVuZGVmaW5lZCBmb3IgZW4tVVMKICAgICB2YXIgbGcgPSB3M2Nfc2xpZHkubGFuZy5zcGxpdCgiLSIpOwoKICAgICBpZiAobGcubGVuZ3RoID4gMSkKICAgICB7CiAgICAgICBsb29rdXAgPSB3M2Nfc2xpZHkuc3RyaW5nc1tsZ1swXV07CgogICAgICAgaWYgKGxvb2t1cCkKICAgICAgIHsKICAgICAgICAgcyA9IGxvb2t1cFtzcmNdOwoKICAgICAgICAgaWYgKHMpCiAgICAgICAgICByZXR1cm4gczsKICAgICAgIH0KICAgICB9CgogICAgIC8vIG90aGVyd2lzZSBzdHJpbmcgYXMgaXMKICAgICByZXR1cm4gc3JjOwogIH0sCgogIGluaXRfbG9jYWxpemF0aW9uOiBmdW5jdGlvbiAoKSB7CiAgICB2YXIgaTE4biA9IHczY19zbGlkeTsKICAgIHZhciBoZWxwX3RleHQgPSB3M2Nfc2xpZHkuaGVscF90ZXh0OwoKICAgIC8vIGVhY2ggc3VjaCBsYW5ndWFnZSBhcnJheSBpcyBkZWNsYXJlZCBpbiB0aGUgbG9jYWxpemUgYXJyYXkKICAgIC8vIHRoaXMgaXMgdXNlZCBhcyBpbiAgdzNjX3NsaWR5LmxvY2FsaXplKCJmb28iKTsKICAgIHRoaXMuc3RyaW5ncyA9IHsKICAgICAgImVzIjp0aGlzLnN0cmluZ3NfZXMsCiAgICAgICJjYSI6dGhpcy5zdHJpbmdzX2NhLAogICAgICAiY3MiOnRoaXMuc3RyaW5nc19jcywKICAgICAgIm5sIjp0aGlzLnN0cmluZ3NfbmwsCiAgICAgICJkZSI6dGhpcy5zdHJpbmdzX2RlLAogICAgICAicGwiOnRoaXMuc3RyaW5nc19wbCwKICAgICAgImZyIjp0aGlzLnN0cmluZ3NfZnIsCiAgICAgICJodSI6dGhpcy5zdHJpbmdzX2h1LAogICAgICAiaXQiOnRoaXMuc3RyaW5nc19pdCwKICAgICAgImVsIjp0aGlzLnN0cmluZ3NfZWwsCiAgICAgICJqcCI6dGhpcy5zdHJpbmdzX2phLAogICAgICAiemgiOnRoaXMuc3RyaW5nc196aCwKICAgICAgInJ1Ijp0aGlzLnN0cmluZ3NfcnUsCiAgICAgICJzdiI6dGhpcy5zdHJpbmdzX3N2CiAgICB9LAoKICAgIGkxOG4uc3RyaW5nc19lc1toZWxwX3RleHRdID0gaTE4bi5oZWxwX2VzOwogICAgaTE4bi5zdHJpbmdzX2NhW2hlbHBfdGV4dF0gPSBpMThuLmhlbHBfY2E7CiAgICBpMThuLnN0cmluZ3NfY3NbaGVscF90ZXh0XSA9IGkxOG4uaGVscF9jczsKICAgIGkxOG4uc3RyaW5nc19ubFtoZWxwX3RleHRdID0gaTE4bi5oZWxwX25sOwogICAgaTE4bi5zdHJpbmdzX2RlW2hlbHBfdGV4dF0gPSBpMThuLmhlbHBfZGU7CiAgICBpMThuLnN0cmluZ3NfcGxbaGVscF90ZXh0XSA9IGkxOG4uaGVscF9wbDsKICAgIGkxOG4uc3RyaW5nc19mcltoZWxwX3RleHRdID0gaTE4bi5oZWxwX2ZyOwogICAgaTE4bi5zdHJpbmdzX2h1W2hlbHBfdGV4dF0gPSBpMThuLmhlbHBfaHU7CiAgICBpMThuLnN0cmluZ3NfaXRbaGVscF90ZXh0XSA9IGkxOG4uaGVscF9pdDsKICAgIGkxOG4uc3RyaW5nc19lbFtoZWxwX3RleHRdID0gaTE4bi5oZWxwX2VsOwogICAgaTE4bi5zdHJpbmdzX2phW2hlbHBfdGV4dF0gPSBpMThuLmhlbHBfamE7CiAgICBpMThuLnN0cmluZ3NfemhbaGVscF90ZXh0XSA9IGkxOG4uaGVscF96aDsKICAgIGkxOG4uc3RyaW5nc19ydVtoZWxwX3RleHRdID0gaTE4bi5oZWxwX3J1OwogICAgaTE4bi5zdHJpbmdzX3N2W2hlbHBfdGV4dF0gPSBpMThuLmhlbHBfc3Y7CgogICAgdzNjX3NsaWR5LmxhbmcgPSBkb2N1bWVudC5ib2R5LnBhcmVudE5vZGUuZ2V0QXR0cmlidXRlKCJsYW5nIik7CgogICAgaWYgKCF3M2Nfc2xpZHkubGFuZykKICAgICAgdzNjX3NsaWR5LmxhbmcgPSBkb2N1bWVudC5ib2R5LnBhcmVudE5vZGUuZ2V0QXR0cmlidXRlKCJ4bWw6bGFuZyIpOwoKICAgIGlmICghdzNjX3NsaWR5LmxhbmcpCiAgICAgIHczY19zbGlkeS5sYW5nID0gImVuIjsKICB9Cn07CgovLyBoYWNrIGZvciBiYWNrIGJ1dHRvbiBiZWhhdmlvcgppZiAodzNjX3NsaWR5LmllNiB8fCB3M2Nfc2xpZHkuaWU3KQp7CiAgZG9jdW1lbnQud3JpdGUoIjxpZnJhbWUgaWQ9J2hpc3RvcnlGcmFtZScgIiArCiAgInNyYz0namF2YXNjcmlwdDpcIjxodG1sIisiPjwvIisiaHRtbD5cIicgIiArCiAgImhlaWdodD0nMScgd2lkdGg9JzEnICIgKwogICJzdHlsZT0ncG9zaXRpb246YWJzb2x1dGU7bGVmdDotODAwcHgnPjwvaWZyYW1lPiIpOwp9CgovLyBhdHRhY2ggZXZlbnQgbGlzdGVuZXJzIGZvciBpbml0aWFsaXphdGlvbgp3M2Nfc2xpZHkuc2V0X3VwKCk7CgovLyBoaWRlIHRoZSBzbGlkZXMgYXMgc29vbiBhcyBib2R5IGVsZW1lbnQgaXMgYXZhaWxhYmxlCi8vIHRvIHJlZHVjZSBhbm5veWluZyBzY3JlZW4gbWVzcyBiZWZvcmUgdGhlIG9ubG9hZCBldmVudApzZXRUaW1lb3V0KHczY19zbGlkeS5oaWRlX3NsaWRlcywgNTApOwoK"></script>
</head>
<body>
<div class="slide titlepage">
  <h1 class="title">Introduction to Structural Equation Modeling with R</h1>
  <p class="author">
Daniel Gundersen, PhD<br /><a href="mailto:DanielA_Gundersen@dfci.harvard.edu">DanielA_Gundersen@dfci.harvard.edu</a><br />Survey and Data Management Core<br />Dana-Farber Cancer Institute
  </p>
  <p class="date">September 28, 2017</p>
</div>
<div id="overviewagenda" class="slide section level2">
<h1>Overview/Agenda</h1>
<ol style="list-style-type: decimal">
<li>Key concepts and terms</li>
<li>Model identification and estimation</li>
<li>R and the lavaan package</li>
<li>Overview of models:
<ul>
<li>Path models</li>
<li>Measurement/Latent variable models</li>
<li>Combining measurement variable and path models</li>
</ul></li>
</ol>
</div>
<div id="learning-objectives" class="slide section level2">
<h1>Learning Objectives</h1>
<ol style="list-style-type: decimal">
<li>Describe key terms in structural equation modeling (SEM)</li>
<li>Identify analytic goals and data that lend themselves to SEM</li>
<li>Write out SEM model in equation and graphical form</li>
<li>Interpret and assess models</li>
</ol>
</div>
<div id="key-concepts-and-terms" class="slide section level2">
<h1>Key concepts and terms</h1>
<ul>
<li>Structural Equation Modeling (SEM):
<ul>
<li>General framework for fitting (often complex) statistical models</li>
<li>Many familiar models are special cases of SEM</li>
<li>Flexible in allowing constraints on parameter estimates</li>
</ul></li>
<li>Common analyses:
<ul>
<li>Relate <span class="math inline">\(\geq1\)</span> dependent to <span class="math inline">\(\geq1\)</span> independent variables</li>
<li>Confirm a hypothesized causal mechanism</li>
<li>Confirm a latent variable measurement model</li>
</ul></li>
</ul>
</div>
<div id="key-concepts-and-terms-1" class="slide section level2">
<h1>Key concepts and terms</h1>
<ul>
<li><p>Measurement model: relates manifest variables to latent construct</p></li>
<li><p>Structural Model: relates constructs to other constructs</p></li>
<li><p>Mediation: Effect of an independent variable on a dependent variable operates through its effect on an intermediate variable</p></li>
<li><p>Moderation: Effect of an independent variable on a dependent variable is different at levels of a third variable</p></li>
</ul>
</div>
<div id="graphical-model-presentation" class="slide section level2 center">
<h1>Graphical model presentation</h1>
<p><img src="data:image/png;base64,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" /><!-- --></p>
</div>
<div id="writing-model-in-equation-form" class="slide section level2">
<h1>Writing model in equation form</h1>
<ul>
<li>General Notation (measurement model):</li>
</ul>
<p><span class="math display">\[
\begin{align}
y_{i1} = v_{1} + \lambda_{1k}\eta_{i1} +&amp;... + \lambda_{1m}\eta_{im} + e_{i1} \\
&amp;\vdots \\
y_{ij} = v_{j} + \lambda_{j1}\eta_{i1} +&amp;... + \lambda_{jm}\eta_{im} + e_{ij} \\
\end{align}
\]</span> (notation varies by software and text books)</p>
</div>
<div id="writing-model-in-equation-form-1" class="slide section level2">
<h1>Writing model in equation form</h1>
<ul>
<li>Preceding model:</li>
</ul>
$$
<span class="math display">\[\begin{align}
inheritance = v_1 + \lambda_{1} genetic\_testing\_knowledge + e_{i1} \\

tx\_impact = v_2 + \lambda_{2} genetic\_testing\_knowledge + e_{i2} \\

discrimination = v_3 + \lambda_{3} genetic\_testing\_knowledge + e_{i3} \\

risk\_reduction = v_4 + \lambda_{4} genetic\_testing\_knowledge + e_{i4}
\end{align}\]</span>
<p>$$</p>
</div>
<div id="writing-model-in-equation-form-2" class="slide section level2">
<h1>Writing model in equation form</h1>
<ul>
<li>In software, the model is often written: <span class="math display">\[
\begin{align}
latent_1 \space \left&lt; operator \right&gt; \space man&amp;ifest_{1,1} + ... + manifest_{j,1} \\
&amp;\vdots \\
latent_m \space \left&lt; operator \right&gt; \space man&amp;ifest_{j,m} + ... + manifest_{k,m} \\
\end{align}
\]</span></li>
<li><p>operator indicates unique symbols for regress, variance/covariance, and latent measures</p></li>
<li><p>Genetic testing knowledge:</p></li>
</ul>
<p><span class="math display">\[
\begin{align}
Gx\_testing\_know \space \left&lt; operator \right&gt; \space inherit + tx\_impact + discrim + risk\_reduc
\end{align}
\]</span></p>
</div>
<div id="model-identification" class="slide section level2">
<h1>Model identification</h1>
<ul>
<li>Latent variables do not have a natural unit of measurement</li>
<li>Constrain one parameter to identify the model
<ul>
<li>Usually, the first path coefficient, <span class="math inline">\(\lambda\)</span>, is constrained to 1</li>
<li>Alternatively, constrain variance of latent variable to 1</li>
</ul></li>
</ul>
</div>
<div id="estimation" class="slide section level2">
<h1>Estimation</h1>
<ul>
<li>Maximum likelihood:
<ul>
<li>Assumes conditional multivariate normality (MVN)</li>
<li>Bootstrapping or adjustments to Chi2 value (Satorra-Bentler) and standard errors can adjust bias in standard errors and confidence intervals in presence of non-normality</li>
</ul></li>
<li>Asymptotic Distribution Free/Weighted Least Squares:
<ul>
<li>Uses a weighting matrix in the fitting function to adjust for non-normality</li>
<li>Variations inlude means- or means and variance adjusted WLS to produce robust standard errors, and Diagnoally WLS to reduce computation</li>
</ul></li>
</ul>
</div>
<div id="assessing-model-fit" class="slide section level2">
<h1>Assessing model fit</h1>
<ul>
<li>Chi2 goodness of fit:
<ul>
<li>compares estimated model against a saturated model</li>
<li>if model is not statistically different, it can be regarded as a good fitting model</li>
<li>null hypothesis is equal fit of analytic and saturated models</li>
<li>Strongly influenced by sample size</li>
</ul></li>
<li>Tucker Lewis and Comparative Fit Indices:
<ul>
<li>analogous to R-squared</li>
<li>compares fit in observed model to null model</li>
<li>ranges from 0 to 1</li>
<li>descriptive; guides for good fit is &gt;0.90 or &gt;0.95</li>
</ul></li>
</ul>
</div>
<div id="assessing-model-fit-1" class="slide section level2">
<h1>Assessing model fit</h1>
<ul>
<li>Standardized Root Mean Square Residual (SRMR)
<ul>
<li>standardized difference between observed and model implied correlations</li>
<li>0 indicates perfect fit, &lt;0.08 usually considered good</li>
</ul></li>
<li>Root Mean Square Error of Approximation (RMSEA)
<ul>
<li>calculated based on non-centrality parameter</li>
<li>0 indicates perfect fit, &lt;0.06, &lt;0.08, and &lt;0.10 common cut-off values</li>
<li>can generate confidence intervals, or test RMSEA&lt;0.08 (or other value)</li>
</ul></li>
</ul>
</div>
<div id="assessing-model-fit-2" class="slide section level2">
<h1>Assessing model fit</h1>
<ul>
<li><p>Inspect residual covariance or correlation matrix: <span class="math display">\[
\begin{align}
\mathbf{R_{resid} = R_{observed} - R_{modelimplied}}
\end{align}
\]</span></p></li>
<li><p>Large residual covariance among item pairs indicates lack of fit</p></li>
<li>Inspect modification indices or LR-Chi2 test of nested models
<ul>
<li>MI is estimated change in model-Chi2 by allowing parameter to be estimated</li>
<li>LR-Chi2 gives significance test on path coefficients</li>
</ul></li>
</ul>
</div>
<div id="r-and-the-lavaan-package" class="slide section level2">
<h1>R and the lavaan package</h1>
<ul>
<li>R is open source statistical programming software</li>
<li>A number of statistial functions included in base</li>
<li><p>Several user written packages for specialized analyses can be installed (or written)</p></li>
<li>lavaan package:
<ul>
<li>R package for fitting structural equation models</li>
<li>developed by Yves Rosseel at Ghent University</li>
</ul></li>
</ul>
</div>
<div id="path-models" class="slide section level2">
<h1>Path models:</h1>
<ul>
<li>Causal model without latent variables</li>
<li>Hypothesize effect of education on health care consumption is mediated by income</li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">cor_mat2 &lt;-<span class="st"> </span><span class="kw">matrix</span>(<span class="kw">c</span>(<span class="fl">1.0</span>, <span class="fl">0.4</span>, <span class="fl">0.5</span>,
                    <span class="fl">0.4</span>, <span class="fl">1.0</span>, <span class="fl">0.6</span>, 
                    <span class="fl">0.5</span>, <span class="fl">0.6</span>, <span class="fl">1.0</span>),
                   <span class="dv">3</span>,<span class="dv">3</span>)

<span class="kw">colnames</span>(cor_mat2) &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;Education&quot;</span>, <span class="st">&quot;Income&quot;</span>, <span class="st">&quot;HC_consumption&quot;</span>)
<span class="kw">rownames</span>(cor_mat2) &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;Education&quot;</span>, <span class="st">&quot;Income&quot;</span>, <span class="st">&quot;HC_consumption&quot;</span>)</code></pre></div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">psych::<span class="kw">lowerMat</span>(cor_mat2)</code></pre></div>
<pre><code>##                Edctn Incom HC_cn
## Education      1.0              
## Income         0.4   1.0        
## HC_consumption 0.5   0.6   1.0</code></pre>
</div>
<div id="path-models-1" class="slide section level2">
<h1>Path models:</h1>
<ul>
<li>write out and fit the model</li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(lavaan)
model &lt;-<span class="st"> '# Direct effect</span>
<span class="st">            HC_consumption ~ c*Education</span>
<span class="st">          </span>
<span class="st">          # Mediation</span>
<span class="st">            Income ~ a*Education</span>
<span class="st">            HC_consumption ~ b*Income</span>
<span class="st">            </span>
<span class="st">          # Indirect effect</span>
<span class="st">            ab := a*b</span>

<span class="st">          # Total effect</span>
<span class="st">            total := c + (a*b)</span>
<span class="st">         '</span>
path_fit &lt;-<span class="st"> </span><span class="kw">sem</span>(model, <span class="dt">sample.cov=</span>cor_mat2, <span class="dt">sample.nobs =</span> <span class="dv">551</span>, 
                <span class="dt">estimator=</span><span class="st">&quot;ML&quot;</span>)</code></pre></div>
</div>
<div id="path-models-2" class="slide section level2 smaller">
<h1>Path models:</h1>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">summary</span>(path_fit)</code></pre></div>
<pre><code>## lavaan (0.5-23.1097) converged normally after  11 iterations
## 
##   Number of observations                           551
## 
##   Estimator                                         ML
##   Minimum Function Test Statistic                0.000
##   Degrees of freedom                                 0
## 
## Parameter Estimates:
## 
##   Information                                 Expected
##   Standard Errors                             Standard
## 
## Regressions:
##                    Estimate  Std.Err  z-value  P(&gt;|z|)
##   HC_consumption ~                                    
##     Education  (c)    0.310    0.035    8.902    0.000
##   Income ~                                            
##     Education  (a)    0.400    0.039   10.245    0.000
##   HC_consumption ~                                    
##     Income     (b)    0.476    0.035   13.696    0.000
## 
## Variances:
##                    Estimate  Std.Err  z-value  P(&gt;|z|)
##    .HC_consumption    0.559    0.034   16.598    0.000
##    .Income            0.838    0.051   16.598    0.000
## 
## Defined Parameters:
##                    Estimate  Std.Err  z-value  P(&gt;|z|)
##     ab                0.190    0.023    8.204    0.000
##     total             0.500    0.037   13.552    0.000</code></pre>
</div>
<div id="path-models-3" class="slide section level2">
<h1>Path Models</h1>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(semPlot)

<span class="kw">semPaths</span>(path_fit, <span class="st">&quot;std&quot;</span>, <span class="dt">rotation =</span> <span class="dv">2</span>, <span class="dt">nCharNodes =</span> <span class="dv">0</span>, <span class="dt">layout =</span> <span class="st">&quot;spring&quot;</span>, 
         <span class="dt">edge.label.cex=</span><span class="fl">1.5</span>, <span class="dt">levels =</span> <span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>), <span class="dt">sizeLat =</span> <span class="dv">10</span>, <span class="dt">weighted =</span> F,
         <span class="dt">sizeMan=</span><span class="dv">10</span>, <span class="dt">fixedStyle =</span> <span class="kw">c</span>(<span class="st">&quot;black&quot;</span>, <span class="dv">5</span>), <span class="dt">freeStyle =</span> <span class="kw">c</span>(<span class="st">&quot;black&quot;</span>, <span class="dv">5</span>))</code></pre></div>
<p><img src="data:image/png;base64,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" /><!-- --></p>
</div>
<div id="measurement-latent-variable-model" class="slide section level2">
<h1>Measurement (latent variable) model</h1>
<ul>
<li>Hypothesize a unidimensional model, where knowledge of multi-panel gene testing determines responses to manifest items</li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(lavaan)

knowledge_mod &lt;-<span class="st">  '</span>
<span class="st">                  GenTesting_knowledge =~ know1.factor + know2.factor + </span>
<span class="st">                  know3.factor + know20.factor + know21.factor + </span>
<span class="st">                  know22.factor + know23.factor + know24.factor</span>
<span class="st">                  '</span>
cfa_fit &lt;-<span class="st"> </span><span class="kw">cfa</span>(knowledge_mod, <span class="dt">data =</span> know_micra.df, <span class="dt">estimator =</span> <span class="st">&quot;WLSMV&quot;</span>)</code></pre></div>
</div>
<div id="measurement-latent-variable-model-1" class="slide section level2 smaller">
<h1>Measurement (latent variable) model</h1>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">summary</span>(cfa_fit)</code></pre></div>
<pre><code>## lavaan (0.5-23.1097) converged normally after  30 iterations
## 
##                                                   Used       Total
##   Number of observations                           521         551
## 
##   Estimator                                       DWLS      Robust
##   Minimum Function Test Statistic               37.730      49.018
##   Degrees of freedom                                20          20
##   P-value (Chi-square)                           0.010       0.000
##   Scaling correction factor                                  0.787
##   Shift parameter                                            1.050
##     for simple second-order correction (Mplus variant)
## 
## Parameter Estimates:
## 
##   Information                                 Expected
##   Standard Errors                           Robust.sem
## 
## Latent Variables:
##                           Estimate  Std.Err  z-value  P(&gt;|z|)
##   GenTesting_knowledge =~                                    
##     know1.factor             1.000                           
##     know2.factor             0.095    0.157    0.606    0.544
##     know3.factor             1.309    0.315    4.152    0.000
##     know20.factor            0.512    0.182    2.808    0.005
##     know21.factor            0.650    0.189    3.429    0.001
##     know22.factor            1.623    0.377    4.301    0.000
##     know23.factor            1.574    0.381    4.136    0.000
##     know24.factor            1.465    0.346    4.228    0.000
## 
## Intercepts:
##                    Estimate  Std.Err  z-value  P(&gt;|z|)
##    .know1.factor      0.000                           
##    .know2.factor      0.000                           
##    .know3.factor      0.000                           
##    .know20.factor     0.000                           
##    .know21.factor     0.000                           
##    .know22.factor     0.000                           
##    .know23.factor     0.000                           
##    .know24.factor     0.000                           
##     GnTstng_knwldg    0.000                           
## 
## Thresholds:
##                    Estimate  Std.Err  z-value  P(&gt;|z|)
##     know1.factr|t1    1.376    0.079   17.471    0.000
##     know2.factr|t1   -0.065    0.055   -1.182    0.237
##     know3.factr|t1    0.871    0.063   13.768    0.000
##     know20.fctr|t1    0.065    0.055    1.182    0.237
##     know21.fctr|t1   -0.424    0.057   -7.460    0.000
##     know22.fctr|t1    0.928    0.065   14.395    0.000
##     know23.fctr|t1    0.240    0.056    4.329    0.000
##     know24.fctr|t1    0.543    0.058    9.356    0.000
## 
## Variances:
##                    Estimate  Std.Err  z-value  P(&gt;|z|)
##    .know1.factor      0.788                           
##    .know2.factor      0.998                           
##    .know3.factor      0.637                           
##    .know20.factor     0.945                           
##    .know21.factor     0.911                           
##    .know22.factor     0.443                           
##    .know23.factor     0.476                           
##    .know24.factor     0.546                           
##     GnTstng_knwldg    0.212    0.094    2.251    0.024
## 
## Scales y*:
##                    Estimate  Std.Err  z-value  P(&gt;|z|)
##     know1.factor      1.000                           
##     know2.factor      1.000                           
##     know3.factor      1.000                           
##     know20.factor     1.000                           
##     know21.factor     1.000                           
##     know22.factor     1.000                           
##     know23.factor     1.000                           
##     know24.factor     1.000</code></pre>
</div>
<div id="measurement-latent-variable-model-2" class="slide section level2 smaller">
<h1>Measurement (latent variable) model</h1>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">standardizedsolution</span>(cfa_fit)</code></pre></div>
<pre><code>##                     lhs  op                  rhs est.std    se      z
## 1  GenTesting_knowledge  =~         know1.factor   0.460 0.102  4.502
## 2  GenTesting_knowledge  =~         know2.factor   0.044 0.072  0.610
## 3  GenTesting_knowledge  =~         know3.factor   0.602 0.067  9.038
## 4  GenTesting_knowledge  =~        know20.factor   0.236 0.069  3.418
## 5  GenTesting_knowledge  =~        know21.factor   0.299 0.066  4.547
## 6  GenTesting_knowledge  =~        know22.factor   0.747 0.065 11.448
## 7  GenTesting_knowledge  =~        know23.factor   0.724 0.058 12.503
## 8  GenTesting_knowledge  =~        know24.factor   0.674 0.059 11.370
## 9          know1.factor   |                   t1   1.376 0.079 17.471
## 10         know2.factor   |                   t1  -0.065 0.055 -1.182
## 11         know3.factor   |                   t1   0.871 0.063 13.768
## 12        know20.factor   |                   t1   0.065 0.055  1.182
## 13        know21.factor   |                   t1  -0.424 0.057 -7.460
## 14        know22.factor   |                   t1   0.928 0.065 14.395
## 15        know23.factor   |                   t1   0.240 0.056  4.329
## 16        know24.factor   |                   t1   0.543 0.058  9.356
## 17         know1.factor  ~~         know1.factor   0.788 0.000     NA
## 18         know2.factor  ~~         know2.factor   0.998 0.000     NA
## 19         know3.factor  ~~         know3.factor   0.637 0.000     NA
## 20        know20.factor  ~~        know20.factor   0.945 0.000     NA
## 21        know21.factor  ~~        know21.factor   0.911 0.000     NA
## 22        know22.factor  ~~        know22.factor   0.443 0.000     NA
## 23        know23.factor  ~~        know23.factor   0.476 0.000     NA
## 24        know24.factor  ~~        know24.factor   0.546 0.000     NA
## 25 GenTesting_knowledge  ~~ GenTesting_knowledge   1.000 0.000     NA
## 26         know1.factor ~*~         know1.factor   1.000 0.000     NA
## 27         know2.factor ~*~         know2.factor   1.000 0.000     NA
## 28         know3.factor ~*~         know3.factor   1.000 0.000     NA
## 29        know20.factor ~*~        know20.factor   1.000 0.000     NA
## 30        know21.factor ~*~        know21.factor   1.000 0.000     NA
## 31        know22.factor ~*~        know22.factor   1.000 0.000     NA
## 32        know23.factor ~*~        know23.factor   1.000 0.000     NA
## 33        know24.factor ~*~        know24.factor   1.000 0.000     NA
## 34         know1.factor  ~1                        0.000 0.000     NA
## 35         know2.factor  ~1                        0.000 0.000     NA
## 36         know3.factor  ~1                        0.000 0.000     NA
## 37        know20.factor  ~1                        0.000 0.000     NA
## 38        know21.factor  ~1                        0.000 0.000     NA
## 39        know22.factor  ~1                        0.000 0.000     NA
## 40        know23.factor  ~1                        0.000 0.000     NA
## 41        know24.factor  ~1                        0.000 0.000     NA
## 42 GenTesting_knowledge  ~1                        0.000 0.000     NA
##    pvalue
## 1   0.000
## 2   0.542
## 3   0.000
## 4   0.001
## 5   0.000
## 6   0.000
## 7   0.000
## 8   0.000
## 9   0.000
## 10  0.237
## 11  0.000
## 12  0.237
## 13  0.000
## 14  0.000
## 15  0.000
## 16  0.000
## 17     NA
## 18     NA
## 19     NA
## 20     NA
## 21     NA
## 22     NA
## 23     NA
## 24     NA
## 25     NA
## 26     NA
## 27     NA
## 28     NA
## 29     NA
## 30     NA
## 31     NA
## 32     NA
## 33     NA
## 34     NA
## 35     NA
## 36     NA
## 37     NA
## 38     NA
## 39     NA
## 40     NA
## 41     NA
## 42     NA</code></pre>
</div>
<div id="measurement-latent-variable-model-3" class="slide section level2">
<h1>Measurement (latent variable) model</h1>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">semPaths</span>(cfa_fit, <span class="dt">what =</span> <span class="st">&quot;path&quot;</span>, <span class="dt">whatLabels =</span> <span class="st">&quot;std&quot;</span>, <span class="dt">nCharNodes =</span> <span class="dv">0</span>, 
         <span class="dt">sizeLat =</span> <span class="dv">12</span>, <span class="dt">sizeMan =</span> <span class="dv">10</span>, <span class="dt">fixedStyle =</span> <span class="kw">c</span>(<span class="st">&quot;black&quot;</span>, <span class="dv">5</span>), 
         <span class="dt">edge.label.cex =</span> <span class="fl">0.8</span>, <span class="dt">thresholds =</span> F, <span class="dt">intercepts =</span> F, 
         <span class="dt">freeStyle =</span> <span class="kw">c</span>(<span class="st">&quot;black&quot;</span>, <span class="dv">5</span>), <span class="dt">weighted =</span> F)</code></pre></div>
<p><img src="data:image/png;base64,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" /><!-- --></p>
</div>
<div id="measurement-latent-variable-model-4" class="slide section level2">
<h1>Measurement (latent variable) model</h1>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">fit_ms &lt;-<span class="st"> </span><span class="kw">fitMeasures</span>(cfa_fit)
<span class="kw">round</span>(fit_ms[<span class="st">&quot;cfi.scaled&quot;</span>], <span class="dv">3</span>)</code></pre></div>
<pre><code>## cfi.scaled 
##      0.917</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">round</span>(fit_ms[<span class="st">&quot;rmsea.scaled&quot;</span>], <span class="dv">3</span>)</code></pre></div>
<pre><code>## rmsea.scaled 
##        0.053</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">semTools::<span class="kw">nullRMSEA</span>(cfa_fit)</code></pre></div>
<pre><code>## Baseline RMSEA: 0.168</code></pre>
</div>
<div id="measurement-latent-variable-model-5" class="slide section level2">
<h1>Measurement (latent variable) model</h1>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">resid_r &lt;-<span class="st"> </span><span class="kw">resid</span>(cfa_fit)$cov
psych::<span class="kw">corPlot</span>(resid_r, <span class="dt">upper=</span>F, <span class="dt">numbers =</span> T)</code></pre></div>
<p><img src="data:image/png;base64,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" /><!-- --></p>
</div>
<div id="measurement-model" class="slide section level2 smaller">
<h1>Measurement Model</h1>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">mod_ind &lt;-<span class="st"> </span><span class="kw">modificationindices</span>(cfa_fit)
<span class="kw">head</span>(mod_ind[<span class="kw">order</span>(mod_ind$mi, <span class="dt">decreasing=</span><span class="ot">TRUE</span>), ], <span class="dv">5</span>)</code></pre></div>
<pre><code>##              lhs op           rhs    mi mi.scaled    epc sepc.lv sepc.all
## 51  know2.factor ~~ know20.factor 9.967    12.672  0.214   0.214    0.214
## 61 know20.factor ~~ know21.factor 4.451     5.658  0.152   0.152    0.152
## 55  know2.factor ~~ know24.factor 3.488     4.435  0.152   0.152    0.152
## 56  know3.factor ~~ know20.factor 3.319     4.220 -0.159  -0.159   -0.159
## 66 know21.factor ~~ know23.factor 2.687     3.416 -0.144  -0.144   -0.144
##    sepc.nox
## 51    0.214
## 61    0.152
## 55    0.152
## 56   -0.159
## 66   -0.144</code></pre>
<ul>
<li>MI ~ Chi2, df=1</li>
<li><p>At alpha = 0.05, critical value = 8.28, after adjusting for multiple comparisons</p></li>
<li>Remediation options:
<ul>
<li>free one residual covariances to be estimated, if interpretable</li>
<li>eliminate one of the offending&quot; variables and refit model</li>
<li>leave as is if (1) both variables are crucial for content validity</li>
<li>leave as is if eliminating item does not substantively alter interpretation</li>
</ul></li>
</ul>
</div>
<div id="combining-path-and-measurement-model" class="slide section level2">
<h1>Combining Path and Measurement Model</h1>
<ul>
<li>Hypothesize college educated have greater knowledge, on average, than those without college degree</li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">model &lt;-<span class="st">    '</span>
<span class="st">            # Genetic knowledge measurement</span>
<span class="st">            GenTesting_knowledge =~ know1.factor + know2.factor + know3.factor +</span>
<span class="st">            know20.factor + know21.factor + know22.factor + know23.factor + </span>
<span class="st">            know24.factor</span>

<span class="st">            # structural model</span>
<span class="st">            GenTesting_knowledge ~ college</span>
<span class="st">            '</span>
sem_fit &lt;-<span class="st"> </span><span class="kw">sem</span>(model, <span class="dt">data =</span> know_micra.df, <span class="dt">estimator =</span> <span class="st">&quot;WLSMV&quot;</span>)</code></pre></div>
</div>
<div id="combining-path-and-measurement-model-1" class="slide section level2 smaller">
<h1>Combining Path and Measurement Model</h1>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">summary</span>(sem_fit)</code></pre></div>
<pre><code>## lavaan (0.5-23.1097) converged normally after  29 iterations
## 
##                                                   Used       Total
##   Number of observations                           502         551
## 
##   Estimator                                       DWLS      Robust
##   Minimum Function Test Statistic               43.654      53.177
##   Degrees of freedom                                27          27
##   P-value (Chi-square)                           0.022       0.002
##   Scaling correction factor                                  0.846
##   Shift parameter                                            1.597
##     for simple second-order correction (Mplus variant)
## 
## Parameter Estimates:
## 
##   Information                                 Expected
##   Standard Errors                           Robust.sem
## 
## Latent Variables:
##                           Estimate  Std.Err  z-value  P(&gt;|z|)
##   GenTesting_knowledge =~                                    
##     know1.factor             1.000                           
##     know2.factor             0.101    0.163    0.616    0.538
##     know3.factor             1.445    0.363    3.978    0.000
##     know20.factor            0.520    0.194    2.681    0.007
##     know21.factor            0.666    0.203    3.283    0.001
##     know22.factor            1.691    0.410    4.125    0.000
##     know23.factor            1.636    0.416    3.931    0.000
##     know24.factor            1.462    0.363    4.032    0.000
## 
## Regressions:
##                          Estimate  Std.Err  z-value  P(&gt;|z|)
##   GenTesting_knowledge ~                                    
##     college                -0.318    0.091   -3.504    0.000
## 
## Intercepts:
##                    Estimate  Std.Err  z-value  P(&gt;|z|)
##    .know1.factor      0.000                           
##    .know2.factor      0.000                           
##    .know3.factor      0.000                           
##    .know20.factor     0.000                           
##    .know21.factor     0.000                           
##    .know22.factor     0.000                           
##    .know23.factor     0.000                           
##    .know24.factor     0.000                           
##    .GnTstng_knwldg    0.000                           
## 
## Thresholds:
##                    Estimate  Std.Err  z-value  P(&gt;|z|)
##     know1.factr|t1    1.004    0.321    3.124    0.002
##     know2.factr|t1   -0.293    0.242   -1.214    0.225
##     know3.factr|t1   -0.414    0.250   -1.656    0.098
##     know20.fctr|t1   -0.344    0.241   -1.425    0.154
##     know21.fctr|t1   -1.014    0.261   -3.885    0.000
##     know22.fctr|t1    0.340    0.264    1.286    0.199
##     know23.fctr|t1   -0.764    0.242   -3.150    0.002
##     know24.fctr|t1    0.057    0.247    0.229    0.819
## 
## Variances:
##                    Estimate  Std.Err  z-value  P(&gt;|z|)
##    .know1.factor      0.813                           
##    .know2.factor      0.998                           
##    .know3.factor      0.609                           
##    .know20.factor     0.949                           
##    .know21.factor     0.917                           
##    .know22.factor     0.465                           
##    .know23.factor     0.500                           
##    .know24.factor     0.601                           
##    .GnTstng_knwldg    0.187    0.088    2.118    0.034
## 
## Scales y*:
##                    Estimate  Std.Err  z-value  P(&gt;|z|)
##     know1.factor      1.000                           
##     know2.factor      1.000                           
##     know3.factor      1.000                           
##     know20.factor     1.000                           
##     know21.factor     1.000                           
##     know22.factor     1.000                           
##     know23.factor     1.000                           
##     know24.factor     1.000</code></pre>
</div>
<div id="combining-path-and-measurement-model-2" class="slide section level2">
<h1>Combining Path and Measurement Model</h1>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">semPaths</span>(sem_fit, <span class="dt">what =</span> <span class="st">&quot;path&quot;</span>, <span class="dt">whatLabels =</span> <span class="st">&quot;std&quot;</span>, <span class="dt">nCharNodes =</span> <span class="dv">0</span>,
         <span class="dt">sizeMan =</span> <span class="dv">7</span>, <span class="dt">sizeLat =</span> <span class="dv">10</span>, <span class="dt">rotation =</span> <span class="dv">2</span>, 
         <span class="dt">edge.label.cex=</span><span class="dv">1</span>, <span class="dt">thresholds =</span> F, <span class="dt">intercepts =</span> F,
         <span class="dt">fixedStyle =</span> <span class="kw">c</span>(<span class="st">&quot;black&quot;</span>, <span class="dv">5</span>), <span class="dt">freeStyle =</span> <span class="kw">c</span>(<span class="st">&quot;black&quot;</span>, <span class="dv">5</span>))</code></pre></div>
<p><img src="data:image/png;base64,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" /><!-- --></p>
</div>
<div id="additional-resources" class="slide section level2">
<h1>Additional resources</h1>
<ul>
<li>R:
<ul>
<li><a href="http://www.r-project.org" class="uri">http://www.r-project.org</a></li>
<li><a href="http://www.RStudio.org" class="uri">http://www.RStudio.org</a></li>
</ul></li>
<li>Lavaan:
<ul>
<li><a href="http://lavaan.ugent.be/" class="uri">http://lavaan.ugent.be/</a></li>
<li>Yves Rosseel (2012). lavaan: An R Package for Structural Equation Modeling. Journal of Statistical Software, 48(2), 1-36. URL <a href="http://www.jstatsoft.org/v48/i02/" class="uri">http://www.jstatsoft.org/v48/i02/</a></li>
</ul></li>
<li><p>Confirmatory Factor Analysis:</p>
<ul>
<li>Brown, T.A., 2014. Confirmatory factor analysis for applied research. Guilford Publications.</li>
</ul></li>
<li>Structural Equation Modeling:
<ul>
<li>Hox, J.J. and Bechger, T.M., 2007. An introduction to structural equation modeling.</li>
<li>R packages: <a href="https://cran.r-project.org/web/views/Psychometrics.html" class="uri">https://cran.r-project.org/web/views/Psychometrics.html</a></li>
<li>Lisrel</li>
<li>Mplus</li>
<li>EQS</li>
<li>Stata</li>
<li>SAS</li>
<li>SPSS AMOS</li>
<li>MPlus and Stata have instructive reference manuals for SEM</li>
<li><a href="http://lavaan.ugent.be/" class="uri">http://lavaan.ugent.be/</a> has good examples</li>
</ul></li>
</ul>
</div>

  <!-- dynamically load mathjax for compatibility with self-contained -->
  <script>
    (function () {
      var script = document.createElement("script");
      script.type = "text/javascript";
      script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
      document.getElementsByTagName("head")[0].appendChild(script);
    })();
  </script>

</body>
</html>
